diff --git a/dist/parsley.js b/dist/parsley.js
index 0f5718d83c8e465984a22c345b0c50ff4a65ff5b..d2bef986c5fdafb86713651b871d995e83e13cc3 100644
--- a/dist/parsley.js
+++ b/dist/parsley.js
@@ -942,7 +942,7 @@
       }
 
       if (null === this._focusedField) return null;
-      return this._focusedField.focus();
+      return this._focusedField.trigger('focus');
     },
     _destroyUI: function _destroyUI() {
       // Reset all event listeners
diff --git a/dist/parsley.js.map b/dist/parsley.js.map
index e6b1578d1308c6b1ed1b6ba0ffdeb3c08d65337b..f7078d9c88250d38b7a8c12a1b15bbda3016ad34 100644
--- a/dist/parsley.js.map
+++ b/dist/parsley.js.map
@@ -1 +1 @@
-{"version":3,"file":"parsley.js","sources":["../src/parsley/utils.js","../src/parsley/defaults.js","../src/parsley/base.js","../src/parsley/validator.js","../src/parsley/validator_registry.js","../src/parsley/ui.js","../src/parsley/form.js","../src/parsley/constraint.js","../src/parsley/field.js","../src/parsley/multiple.js","../src/parsley/factory.js","../src/parsley/main.js","../src/parsley/pubsub.js","../src/parsley/remote.js","../src/i18n/en.js","../src/vendor/inputevent.js","../src/parsley.js"],"sourcesContent":["import $ from 'jquery';\n\nvar globalID = 1;\nvar pastWarnings = {};\n\nvar Utils = {\n  // Parsley DOM-API\n  // returns object from dom attributes and values\n  attr: function (element, namespace, obj) {\n    var i;\n    var attribute;\n    var attributes;\n    var regex = new RegExp('^' + namespace, 'i');\n\n    if ('undefined' === typeof obj)\n      obj = {};\n    else {\n      // Clear all own properties. This won't affect prototype's values\n      for (i in obj) {\n        if (obj.hasOwnProperty(i))\n          delete obj[i];\n      }\n    }\n\n    if (!element)\n      return obj;\n\n    attributes = element.attributes;\n    for (i = attributes.length; i--; ) {\n      attribute = attributes[i];\n\n      if (attribute && attribute.specified && regex.test(attribute.name)) {\n        obj[this.camelize(attribute.name.slice(namespace.length))] = this.deserializeValue(attribute.value);\n      }\n    }\n\n    return obj;\n  },\n\n  checkAttr: function (element, namespace, checkAttr) {\n    return element.hasAttribute(namespace + checkAttr);\n  },\n\n  setAttr: function (element, namespace, attr, value) {\n    element.setAttribute(this.dasherize(namespace + attr), String(value));\n  },\n\n  getType: function(element) {\n    return element.getAttribute('type') || 'text';\n  },\n\n  generateID: function () {\n    return '' + globalID++;\n  },\n\n  /** Third party functions **/\n  deserializeValue: function (value) {\n    var num;\n\n    try {\n      return value ?\n        value == \"true\" ||\n        (value == \"false\" ? false :\n        value == \"null\" ? null :\n        !isNaN(num = Number(value)) ? num :\n        /^[\\[\\{]/.test(value) ? JSON.parse(value) :\n        value)\n        : value;\n    } catch (e) { return value; }\n  },\n\n  // Zepto camelize function\n  camelize: function (str) {\n    return str.replace(/-+(.)?/g, function (match, chr) {\n      return chr ? chr.toUpperCase() : '';\n    });\n  },\n\n  // Zepto dasherize function\n  dasherize: function (str) {\n    return str.replace(/::/g, '/')\n      .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')\n      .replace(/([a-z\\d])([A-Z])/g, '$1_$2')\n      .replace(/_/g, '-')\n      .toLowerCase();\n  },\n\n  warn: function () {\n    if (window.console && 'function' === typeof window.console.warn)\n      window.console.warn(...arguments);\n  },\n\n  warnOnce: function(msg) {\n    if (!pastWarnings[msg]) {\n      pastWarnings[msg] = true;\n      this.warn(...arguments);\n    }\n  },\n\n  _resetWarnings: function () {\n    pastWarnings = {};\n  },\n\n  trimString: function(string) {\n    return string.replace(/^\\s+|\\s+$/g, '');\n  },\n\n  parse: {\n    date: function(string) {\n      let parsed = string.match(/^(\\d{4,})-(\\d\\d)-(\\d\\d)$/);\n      if (!parsed)\n        return null;\n      let [_, year, month, day] = parsed.map(x => parseInt(x, 10));\n      let date = new Date(year, month - 1, day);\n      if (date.getFullYear() !== year || date.getMonth() + 1 !== month || date.getDate() !== day)\n        return null;\n      return date;\n    },\n    string: function(string) {\n      return string;\n    },\n    integer: function(string) {\n      if (isNaN(string))\n        return null;\n      return parseInt(string, 10);\n    },\n    number: function(string) {\n      if (isNaN(string))\n        throw null;\n      return parseFloat(string);\n    },\n    'boolean': function _boolean(string) {\n      return !(/^\\s*false\\s*$/i.test(string));\n    },\n    object: function(string) {\n      return Utils.deserializeValue(string);\n    },\n    regexp: function(regexp) {\n      var flags = '';\n\n      // Test if RegExp is literal, if not, nothing to be done, otherwise, we need to isolate flags and pattern\n      if (/^\\/.*\\/(?:[gimy]*)$/.test(regexp)) {\n        // Replace the regexp literal string with the first match group: ([gimy]*)\n        // If no flag is present, this will be a blank string\n        flags = regexp.replace(/.*\\/([gimy]*)$/, '$1');\n        // Again, replace the regexp literal string with the first match group:\n        // everything excluding the opening and closing slashes and the flags\n        regexp = regexp.replace(new RegExp('^/(.*?)/' + flags + '$'), '$1');\n      } else {\n        // Anchor regexp:\n        regexp = '^' + regexp + '$';\n      }\n      return new RegExp(regexp, flags);\n    }\n  },\n\n  parseRequirement: function(requirementType, string) {\n    var converter = this.parse[requirementType || 'string'];\n    if (!converter)\n      throw 'Unknown requirement specification: \"' + requirementType + '\"';\n    let converted = converter(string);\n    if (converted === null)\n      throw `Requirement is not a ${requirementType}: \"${string}\"`;\n    return converted;\n  },\n\n  namespaceEvents: function(events, namespace) {\n    events = this.trimString(events || '').split(/\\s+/);\n    if (!events[0])\n      return '';\n    return $.map(events, evt => `${evt}.${namespace}`).join(' ');\n  },\n\n  difference: function(array, remove) {\n    // This is O(N^2), should be optimized\n    let result = [];\n    $.each(array, (_, elem) => {\n      if (remove.indexOf(elem) == -1)\n        result.push(elem);\n    });\n    return result;\n  },\n\n  // Alter-ego to native Promise.all, but for jQuery\n  all: function(promises) {\n    // jQuery treats $.when() and $.when(singlePromise) differently; let's avoid that and add spurious elements\n    return $.when(...promises, 42, 42);\n  },\n\n  // Object.create polyfill, see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create#Polyfill\n  objectCreate: Object.create || (function () {\n    var Object = function () {};\n    return function (prototype) {\n      if (arguments.length > 1) {\n        throw Error('Second argument not supported');\n      }\n      if (typeof prototype != 'object') {\n        throw TypeError('Argument must be an object');\n      }\n      Object.prototype = prototype;\n      var result = new Object();\n      Object.prototype = null;\n      return result;\n    };\n  })(),\n\n  _SubmitSelector: 'input[type=\"submit\"], button:submit'\n};\n\nexport default Utils;\n","// All these options could be overriden and specified directly in DOM using\n// `data-parsley-` default DOM-API\n// eg: `inputs` can be set in DOM using `data-parsley-inputs=\"input, textarea\"`\n// eg: `data-parsley-stop-on-first-failing-constraint=\"false\"`\n\nvar Defaults = {\n  // ### General\n\n  // Default data-namespace for DOM API\n  namespace: 'data-parsley-',\n\n  // Supported inputs by default\n  inputs: 'input, textarea, select',\n\n  // Excluded inputs by default\n  excluded: 'input[type=button], input[type=submit], input[type=reset], input[type=hidden]',\n\n  // Stop validating field on highest priority failing constraint\n  priorityEnabled: true,\n\n  // ### Field only\n\n  // identifier used to group together inputs (e.g. radio buttons...)\n  multiple: null,\n\n  // identifier (or array of identifiers) used to validate only a select group of inputs\n  group: null,\n\n  // ### UI\n  // Enable\\Disable error messages\n  uiEnabled: true,\n\n  // Key events threshold before validation\n  validationThreshold: 3,\n\n  // Focused field on form validation error. 'first'|'last'|'none'\n  focus: 'first',\n\n  // event(s) that will trigger validation before first failure. eg: `input`...\n  trigger: false,\n\n  // event(s) that will trigger validation after first failure.\n  triggerAfterFailure: 'input',\n\n  // Class that would be added on every failing validation Parsley field\n  errorClass: 'parsley-error',\n\n  // Same for success validation\n  successClass: 'parsley-success',\n\n  // Return the `$element` that will receive these above success or error classes\n  // Could also be (and given directly from DOM) a valid selector like `'#div'`\n  classHandler: function (Field) {},\n\n  // Return the `$element` where errors will be appended\n  // Could also be (and given directly from DOM) a valid selector like `'#div'`\n  errorsContainer: function (Field) {},\n\n  // ul elem that would receive errors' list\n  errorsWrapper: '<ul class=\"parsley-errors-list\"></ul>',\n\n  // li elem that would receive error message\n  errorTemplate: '<li></li>'\n};\n\nexport default Defaults;\n","import $ from 'jquery';\nimport Utils from './utils';\n\nvar Base = function () {\n  this.__id__ = Utils.generateID();\n};\n\nBase.prototype = {\n  asyncSupport: true, // Deprecated\n\n  _pipeAccordingToValidationResult: function () {\n    var pipe = () => {\n      var r = $.Deferred();\n      if (true !== this.validationResult)\n        r.reject();\n      return r.resolve().promise();\n    };\n    return [pipe, pipe];\n  },\n\n  actualizeOptions: function () {\n    Utils.attr(this.element, this.options.namespace, this.domOptions);\n    if (this.parent && this.parent.actualizeOptions)\n      this.parent.actualizeOptions();\n    return this;\n  },\n\n  _resetOptions: function (initOptions) {\n    this.domOptions = Utils.objectCreate(this.parent.options);\n    this.options = Utils.objectCreate(this.domOptions);\n    // Shallow copy of ownProperties of initOptions:\n    for (var i in initOptions) {\n      if (initOptions.hasOwnProperty(i))\n        this.options[i] = initOptions[i];\n    }\n    this.actualizeOptions();\n  },\n\n  _listeners: null,\n\n  // Register a callback for the given event name\n  // Callback is called with context as the first argument and the `this`\n  // The context is the current parsley instance, or window.Parsley if global\n  // A return value of `false` will interrupt the calls\n  on: function (name, fn) {\n    this._listeners = this._listeners || {};\n    var queue = this._listeners[name] = this._listeners[name] || [];\n    queue.push(fn);\n\n    return this;\n  },\n\n  // Deprecated. Use `on` instead\n  subscribe: function(name, fn) {\n    $.listenTo(this, name.toLowerCase(), fn);\n  },\n\n  // Unregister a callback (or all if none is given) for the given event name\n  off: function (name, fn) {\n    var queue = this._listeners && this._listeners[name];\n    if (queue) {\n      if (!fn) {\n        delete this._listeners[name];\n      } else {\n        for (var i = queue.length; i--; )\n          if (queue[i] === fn)\n            queue.splice(i, 1);\n      }\n    }\n    return this;\n  },\n\n  // Deprecated. Use `off`\n  unsubscribe: function(name, fn) {\n    $.unsubscribeTo(this, name.toLowerCase());\n  },\n\n  // Trigger an event of the given name\n  // A return value of `false` interrupts the callback chain\n  // Returns false if execution was interrupted\n  trigger: function (name, target, extraArg) {\n    target = target || this;\n    var queue = this._listeners && this._listeners[name];\n    var result;\n    var parentResult;\n    if (queue) {\n      for (var i = queue.length; i--; ) {\n        result = queue[i].call(target, target, extraArg);\n        if (result === false) return result;\n      }\n    }\n    if (this.parent) {\n      return this.parent.trigger(name, target, extraArg);\n    }\n    return true;\n  },\n\n  asyncIsValid: function (group, force) {\n    Utils.warnOnce(\"asyncIsValid is deprecated; please use whenValid instead\");\n    return this.whenValid({group, force});\n  },\n\n  _findRelated: function () {\n    return this.options.multiple ?\n      $(this.parent.element.querySelectorAll(`[${this.options.namespace}multiple=\"${this.options.multiple}\"]`))\n    : this.$element;\n  }\n};\n\nexport default Base;\n","import $ from 'jquery';\nimport Utils from './utils';\n\nvar convertArrayRequirement = function(string, length) {\n  var m = string.match(/^\\s*\\[(.*)\\]\\s*$/);\n  if (!m)\n    throw 'Requirement is not an array: \"' + string + '\"';\n  var values = m[1].split(',').map(Utils.trimString);\n  if (values.length !== length)\n    throw 'Requirement has ' + values.length + ' values when ' + length + ' are needed';\n  return values;\n};\n\nvar convertExtraOptionRequirement = function(requirementSpec, string, extraOptionReader) {\n  var main = null;\n  var extra = {};\n  for (var key in requirementSpec) {\n    if (key) {\n      var value = extraOptionReader(key);\n      if ('string' === typeof value)\n        value = Utils.parseRequirement(requirementSpec[key], value);\n      extra[key] = value;\n    } else {\n      main = Utils.parseRequirement(requirementSpec[key], string);\n    }\n  }\n  return [main, extra];\n};\n\n// A Validator needs to implement the methods `validate` and `parseRequirements`\n\nvar Validator = function(spec) {\n  $.extend(true, this, spec);\n};\n\nValidator.prototype = {\n  // Returns `true` iff the given `value` is valid according the given requirements.\n  validate: function(value, requirementFirstArg) {\n    if (this.fn) { // Legacy style validator\n\n      if (arguments.length > 3)  // If more args then value, requirement, instance...\n        requirementFirstArg = [].slice.call(arguments, 1, -1);  // Skip first arg (value) and last (instance), combining the rest\n      return this.fn(value, requirementFirstArg);\n    }\n\n    if (Array.isArray(value)) {\n      if (!this.validateMultiple)\n        throw 'Validator `' + this.name + '` does not handle multiple values';\n      return this.validateMultiple(...arguments);\n    } else {\n      let instance = arguments[arguments.length - 1];\n      if (this.validateDate && instance._isDateInput()) {\n        arguments[0] = Utils.parse.date(arguments[0]);\n        if (arguments[0] === null)\n          return false;\n        return this.validateDate(...arguments);\n      }\n      if (this.validateNumber) {\n        if (!value) // Builtin validators all accept empty strings, except `required` of course\n          return true;\n        if (isNaN(value))\n          return false;\n        arguments[0] = parseFloat(arguments[0]);\n        return this.validateNumber(...arguments);\n      }\n      if (this.validateString) {\n        return this.validateString(...arguments);\n      }\n      throw 'Validator `' + this.name + '` only handles multiple values';\n    }\n  },\n\n  // Parses `requirements` into an array of arguments,\n  // according to `this.requirementType`\n  parseRequirements: function(requirements, extraOptionReader) {\n    if ('string' !== typeof requirements) {\n      // Assume requirement already parsed\n      // but make sure we return an array\n      return Array.isArray(requirements) ? requirements : [requirements];\n    }\n    var type = this.requirementType;\n    if (Array.isArray(type)) {\n      var values = convertArrayRequirement(requirements, type.length);\n      for (var i = 0; i < values.length; i++)\n        values[i] = Utils.parseRequirement(type[i], values[i]);\n      return values;\n    } else if ($.isPlainObject(type)) {\n      return convertExtraOptionRequirement(type, requirements, extraOptionReader);\n    } else {\n      return [Utils.parseRequirement(type, requirements)];\n    }\n  },\n  // Defaults:\n  requirementType: 'string',\n\n  priority: 2\n\n};\n\nexport default Validator;\n","import $ from 'jquery';\nimport Utils from './utils';\nimport Defaults from './defaults';\nimport Validator from './validator';\n\nvar ValidatorRegistry = function (validators, catalog) {\n  this.__class__ = 'ValidatorRegistry';\n\n  // Default Parsley locale is en\n  this.locale = 'en';\n\n  this.init(validators || {}, catalog || {});\n};\n\nvar typeTesters =  {\n  email: /^((([a-zA-Z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-zA-Z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-zA-Z]|\\d|-|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-zA-Z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-zA-Z]|\\d|-|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-zA-Z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))$/,\n\n  // Follow https://www.w3.org/TR/html5/infrastructure.html#floating-point-numbers\n  number: /^-?(\\d*\\.)?\\d+(e[-+]?\\d+)?$/i,\n\n  integer: /^-?\\d+$/,\n\n  digits: /^\\d+$/,\n\n  alphanum: /^\\w+$/i,\n\n  date: {\n    test: value => Utils.parse.date(value) !== null\n  },\n\n  url: new RegExp(\n      \"^\" +\n        // protocol identifier\n        \"(?:(?:https?|ftp)://)?\" + // ** mod: make scheme optional\n        // user:pass authentication\n        \"(?:\\\\S+(?::\\\\S*)?@)?\" +\n        \"(?:\" +\n          // IP address exclusion\n          // private & local networks\n          // \"(?!(?:10|127)(?:\\\\.\\\\d{1,3}){3})\" +   // ** mod: allow local networks\n          // \"(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})\" +  // ** mod: allow local networks\n          // \"(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})\" +  // ** mod: allow local networks\n          // IP address dotted notation octets\n          // excludes loopback network 0.0.0.0\n          // excludes reserved space >= 224.0.0.0\n          // excludes network & broacast addresses\n          // (first & last IP address of each class)\n          \"(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])\" +\n          \"(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}\" +\n          \"(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))\" +\n        \"|\" +\n          // host name\n          \"(?:(?:[a-zA-Z\\\\u00a1-\\\\uffff0-9]-*)*[a-zA-Z\\\\u00a1-\\\\uffff0-9]+)\" +\n          // domain name\n          \"(?:\\\\.(?:[a-zA-Z\\\\u00a1-\\\\uffff0-9]-*)*[a-zA-Z\\\\u00a1-\\\\uffff0-9]+)*\" +\n          // TLD identifier\n          \"(?:\\\\.(?:[a-zA-Z\\\\u00a1-\\\\uffff]{2,}))\" +\n        \")\" +\n        // port number\n        \"(?::\\\\d{2,5})?\" +\n        // resource path\n        \"(?:/\\\\S*)?\" +\n      \"$\"\n    )\n};\ntypeTesters.range = typeTesters.number;\n\n// See http://stackoverflow.com/a/10454560/8279\nvar decimalPlaces = num => {\n  var match = ('' + num).match(/(?:\\.(\\d+))?(?:[eE]([+-]?\\d+))?$/);\n  if (!match) { return 0; }\n  return Math.max(\n       0,\n       // Number of digits right of decimal point.\n       (match[1] ? match[1].length : 0) -\n       // Adjust for scientific notation.\n       (match[2] ? +match[2] : 0));\n};\n\n// parseArguments('number', ['1', '2']) => [1, 2]\nlet parseArguments = (type, args) => args.map(Utils.parse[type]);\n// operatorToValidator returns a validating function for an operator function, applied to the given type\nlet operatorToValidator = (type, operator) => {\n  return (value, ...requirementsAndInput) => {\n    requirementsAndInput.pop(); // Get rid of `input` argument\n    return operator(value, ...parseArguments(type, requirementsAndInput));\n  };\n};\n\nlet comparisonOperator = operator => ({\n  validateDate: operatorToValidator('date', operator),\n  validateNumber: operatorToValidator('number', operator),\n  requirementType: operator.length <= 2 ? 'string' : ['string', 'string'], // Support operators with a 1 or 2 requirement(s)\n  priority: 30\n});\n\nValidatorRegistry.prototype = {\n  init: function (validators, catalog) {\n    this.catalog = catalog;\n    // Copy prototype's validators:\n    this.validators = Object.assign({}, this.validators);\n\n    for (var name in validators)\n      this.addValidator(name, validators[name].fn, validators[name].priority);\n\n    window.Parsley.trigger('parsley:validator:init');\n  },\n\n  // Set new messages locale if we have dictionary loaded in ParsleyConfig.i18n\n  setLocale: function (locale) {\n    if ('undefined' === typeof this.catalog[locale])\n      throw new Error(locale + ' is not available in the catalog');\n\n    this.locale = locale;\n\n    return this;\n  },\n\n  // Add a new messages catalog for a given locale. Set locale for this catalog if set === `true`\n  addCatalog: function (locale, messages, set) {\n    if ('object' === typeof messages)\n      this.catalog[locale] = messages;\n\n    if (true === set)\n      return this.setLocale(locale);\n\n    return this;\n  },\n\n  // Add a specific message for a given constraint in a given locale\n  addMessage: function (locale, name, message) {\n    if ('undefined' === typeof this.catalog[locale])\n      this.catalog[locale] = {};\n\n    this.catalog[locale][name] = message;\n\n    return this;\n  },\n\n  // Add messages for a given locale\n  addMessages: function (locale, nameMessageObject) {\n    for (var name in nameMessageObject)\n      this.addMessage(locale, name, nameMessageObject[name]);\n\n    return this;\n  },\n\n  // Add a new validator\n  //\n  //    addValidator('custom', {\n  //        requirementType: ['integer', 'integer'],\n  //        validateString: function(value, from, to) {},\n  //        priority: 22,\n  //        messages: {\n  //          en: \"Hey, that's no good\",\n  //          fr: \"Aye aye, pas bon du tout\",\n  //        }\n  //    })\n  //\n  // Old API was addValidator(name, function, priority)\n  //\n  addValidator: function (name, arg1, arg2) {\n    if (this.validators[name])\n      Utils.warn('Validator \"' + name + '\" is already defined.');\n    else if (Defaults.hasOwnProperty(name)) {\n      Utils.warn('\"' + name + '\" is a restricted keyword and is not a valid validator name.');\n      return;\n    }\n    return this._setValidator(...arguments);\n  },\n\n  hasValidator: function (name) {\n    return !!this.validators[name];\n  },\n\n  updateValidator: function (name, arg1, arg2) {\n    if (!this.validators[name]) {\n      Utils.warn('Validator \"' + name + '\" is not already defined.');\n      return this.addValidator(...arguments);\n    }\n    return this._setValidator(...arguments);\n  },\n\n  removeValidator: function (name) {\n    if (!this.validators[name])\n      Utils.warn('Validator \"' + name + '\" is not defined.');\n\n    delete this.validators[name];\n\n    return this;\n  },\n\n  _setValidator: function (name, validator, priority) {\n    if ('object' !== typeof validator) {\n      // Old style validator, with `fn` and `priority`\n      validator = {\n        fn: validator,\n        priority: priority\n      };\n    }\n    if (!validator.validate) {\n      validator = new Validator(validator);\n    }\n    this.validators[name] = validator;\n\n    for (var locale in validator.messages || {})\n      this.addMessage(locale, name, validator.messages[locale]);\n\n    return this;\n  },\n\n  getErrorMessage: function (constraint) {\n    var message;\n\n    // Type constraints are a bit different, we have to match their requirements too to find right error message\n    if ('type' === constraint.name) {\n      var typeMessages = this.catalog[this.locale][constraint.name] || {};\n      message = typeMessages[constraint.requirements];\n    } else\n      message = this.formatMessage(this.catalog[this.locale][constraint.name], constraint.requirements);\n\n    return message || this.catalog[this.locale].defaultMessage || this.catalog.en.defaultMessage;\n  },\n\n  // Kind of light `sprintf()` implementation\n  formatMessage: function (string, parameters) {\n    if ('object' === typeof parameters) {\n      for (var i in parameters)\n        string = this.formatMessage(string, parameters[i]);\n\n      return string;\n    }\n\n    return 'string' === typeof string ? string.replace(/%s/i, parameters) : '';\n  },\n\n  // Here is the Parsley default validators list.\n  // A validator is an object with the following key values:\n  //  - priority: an integer\n  //  - requirement: 'string' (default), 'integer', 'number', 'regexp' or an Array of these\n  //  - validateString, validateMultiple, validateNumber: functions returning `true`, `false` or a promise\n  // Alternatively, a validator can be a function that returns such an object\n  //\n  validators: {\n    notblank: {\n      validateString: function(value) {\n        return /\\S/.test(value);\n      },\n      priority: 2\n    },\n    required: {\n      validateMultiple: function(values) {\n        return values.length > 0;\n      },\n      validateString: function(value) {\n        return /\\S/.test(value);\n      },\n      priority: 512\n    },\n    type: {\n      validateString: function(value, type, {step = 'any', base = 0} = {}) {\n        var tester = typeTesters[type];\n        if (!tester) {\n          throw new Error('validator type `' + type + '` is not supported');\n        }\n        if (!value)\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        if (!tester.test(value))\n          return false;\n        if ('number' === type) {\n          if (!/^any$/i.test(step || '')) {\n            var nb = Number(value);\n            var decimals = Math.max(decimalPlaces(step), decimalPlaces(base));\n            if (decimalPlaces(nb) > decimals) // Value can't have too many decimals\n              return false;\n            // Be careful of rounding errors by using integers.\n            var toInt = f => Math.round(f * Math.pow(10, decimals));\n            if ((toInt(nb) - toInt(base)) % toInt(step) != 0)\n              return false;\n          }\n        }\n        return true;\n      },\n      requirementType: {\n        '': 'string',\n        step: 'string',\n        base: 'number'\n      },\n      priority: 256\n    },\n    pattern: {\n      validateString: function(value, regexp) {\n        if (!value)\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        return regexp.test(value);\n      },\n      requirementType: 'regexp',\n      priority: 64\n    },\n    minlength: {\n      validateString: function (value, requirement) {\n        if (!value)\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        return value.length >= requirement;\n      },\n      requirementType: 'integer',\n      priority: 30\n    },\n    maxlength: {\n      validateString: function (value, requirement) {\n        return value.length <= requirement;\n      },\n      requirementType: 'integer',\n      priority: 30\n    },\n    length: {\n      validateString: function (value, min, max) {\n        if (!value)\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        return value.length >= min && value.length <= max;\n      },\n      requirementType: ['integer', 'integer'],\n      priority: 30\n    },\n    mincheck: {\n      validateMultiple: function (values, requirement) {\n        return values.length >= requirement;\n      },\n      requirementType: 'integer',\n      priority: 30\n    },\n    maxcheck: {\n      validateMultiple: function (values, requirement) {\n        return values.length <= requirement;\n      },\n      requirementType: 'integer',\n      priority: 30\n    },\n    check: {\n      validateMultiple: function (values, min, max) {\n        return values.length >= min && values.length <= max;\n      },\n      requirementType: ['integer', 'integer'],\n      priority: 30\n    },\n    min: comparisonOperator((value, requirement) => value >= requirement),\n    max: comparisonOperator((value, requirement) => value <= requirement),\n    range: comparisonOperator((value, min, max) => value >= min && value <= max),\n    equalto: {\n      validateString: function (value, refOrValue) {\n        if (!value)\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        var $reference = $(refOrValue);\n        if ($reference.length)\n          return value === $reference.val();\n        else\n          return value === refOrValue;\n      },\n      priority: 256\n    },\n    euvatin: {\n      validateString: function (value, refOrValue) {\n        if (!value) {\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        }\n\n        var re = /^[A-Z][A-Z][A-Za-z0-9 -]{2,}$/;\n        return re.test(value);\n      },\n      priority: 30,\n    },\n  }\n};\n\nexport default ValidatorRegistry;\n","import $ from 'jquery';\nimport Utils from './utils';\n\nvar UI = {};\n\nvar diffResults = function (newResult, oldResult, deep) {\n  var added = [];\n  var kept = [];\n\n  for (var i = 0; i < newResult.length; i++) {\n    var found = false;\n\n    for (var j = 0; j < oldResult.length; j++)\n      if (newResult[i].assert.name === oldResult[j].assert.name) {\n        found = true;\n        break;\n      }\n\n    if (found)\n      kept.push(newResult[i]);\n    else\n      added.push(newResult[i]);\n  }\n\n  return {\n    kept: kept,\n    added: added,\n    removed: !deep ? diffResults(oldResult, newResult, true).added : []\n  };\n};\n\nUI.Form = {\n\n  _actualizeTriggers: function () {\n    this.$element.on('submit.Parsley', evt => { this.onSubmitValidate(evt); });\n    this.$element.on('click.Parsley', Utils._SubmitSelector, evt => { this.onSubmitButton(evt); });\n\n    // UI could be disabled\n    if (false === this.options.uiEnabled)\n      return;\n\n    this.element.setAttribute('novalidate', '');\n  },\n\n  focus: function () {\n    this._focusedField = null;\n\n    if (true === this.validationResult || 'none' === this.options.focus)\n      return null;\n\n    for (var i = 0; i < this.fields.length; i++) {\n      var field = this.fields[i];\n      if (true !== field.validationResult && field.validationResult.length > 0 && 'undefined' === typeof field.options.noFocus) {\n        this._focusedField = field.$element;\n        if ('first' === this.options.focus)\n          break;\n      }\n    }\n\n    if (null === this._focusedField)\n      return null;\n\n    return this._focusedField.focus();\n  },\n\n  _destroyUI: function () {\n    // Reset all event listeners\n    this.$element.off('.Parsley');\n  }\n\n};\n\nUI.Field = {\n\n  _reflowUI: function () {\n    this._buildUI();\n\n    // If this field doesn't have an active UI don't bother doing something\n    if (!this._ui)\n      return;\n\n    // Diff between two validation results\n    var diff = diffResults(this.validationResult, this._ui.lastValidationResult);\n\n    // Then store current validation result for next reflow\n    this._ui.lastValidationResult = this.validationResult;\n\n    // Handle valid / invalid / none field class\n    this._manageStatusClass();\n\n    // Add, remove, updated errors messages\n    this._manageErrorsMessages(diff);\n\n    // Triggers impl\n    this._actualizeTriggers();\n\n    // If field is not valid for the first time, bind keyup trigger to ease UX and quickly inform user\n    if ((diff.kept.length || diff.added.length) && !this._failedOnce) {\n      this._failedOnce = true;\n      this._actualizeTriggers();\n    }\n  },\n\n  // Returns an array of field's error message(s)\n  getErrorsMessages: function () {\n    // No error message, field is valid\n    if (true === this.validationResult)\n      return [];\n\n    var messages = [];\n\n    for (var i = 0; i < this.validationResult.length; i++)\n      messages.push(this.validationResult[i].errorMessage ||\n       this._getErrorMessage(this.validationResult[i].assert));\n\n    return messages;\n  },\n\n  // It's a goal of Parsley that this method is no longer required [#1073]\n  addError: function (name, {message, assert, updateClass = true} = {}) {\n    this._buildUI();\n    this._addError(name, {message, assert});\n\n    if (updateClass)\n      this._errorClass();\n  },\n\n  // It's a goal of Parsley that this method is no longer required [#1073]\n  updateError: function (name, {message, assert, updateClass = true} = {}) {\n    this._buildUI();\n    this._updateError(name, {message, assert});\n\n    if (updateClass)\n      this._errorClass();\n  },\n\n  // It's a goal of Parsley that this method is no longer required [#1073]\n  removeError: function (name, {updateClass = true} = {}) {\n    this._buildUI();\n    this._removeError(name);\n\n    // edge case possible here: remove a standard Parsley error that is still failing in this.validationResult\n    // but highly improbable cuz' manually removing a well Parsley handled error makes no sense.\n    if (updateClass)\n      this._manageStatusClass();\n  },\n\n  _manageStatusClass: function () {\n    if (this.hasConstraints() && this.needsValidation() && true === this.validationResult)\n      this._successClass();\n    else if (this.validationResult.length > 0)\n      this._errorClass();\n    else\n      this._resetClass();\n  },\n\n  _manageErrorsMessages: function (diff) {\n    if ('undefined' !== typeof this.options.errorsMessagesDisabled)\n      return;\n\n    // Case where we have errorMessage option that configure an unique field error message, regardless failing validators\n    if ('undefined' !== typeof this.options.errorMessage) {\n      if ((diff.added.length || diff.kept.length)) {\n        this._insertErrorWrapper();\n\n        if (0 === this._ui.$errorsWrapper.find('.parsley-custom-error-message').length)\n          this._ui.$errorsWrapper\n            .append(\n              $(this.options.errorTemplate)\n              .addClass('parsley-custom-error-message')\n            );\n\n        this._ui.$errorClassHandler.attr('aria-describedby', this._ui.errorsWrapperId);\n\n        return this._ui.$errorsWrapper\n          .addClass('filled')\n          .attr('aria-hidden', 'false')\n          .find('.parsley-custom-error-message')\n          .html(this.options.errorMessage);\n      }\n\n      this._ui.$errorClassHandler.removeAttr('aria-describedby');\n\n      return this._ui.$errorsWrapper\n        .removeClass('filled')\n        .attr('aria-hidden', 'true')\n        .find('.parsley-custom-error-message')\n        .remove();\n    }\n\n    // Show, hide, update failing constraints messages\n    for (var i = 0; i < diff.removed.length; i++)\n      this._removeError(diff.removed[i].assert.name);\n\n    for (i = 0; i < diff.added.length; i++)\n      this._addError(diff.added[i].assert.name, {message: diff.added[i].errorMessage, assert: diff.added[i].assert});\n\n    for (i = 0; i < diff.kept.length; i++)\n      this._updateError(diff.kept[i].assert.name, {message: diff.kept[i].errorMessage, assert: diff.kept[i].assert});\n  },\n\n\n  _addError: function (name, {message, assert}) {\n    this._insertErrorWrapper();\n    this._ui.$errorClassHandler\n      .attr('aria-describedby', this._ui.errorsWrapperId);\n    this._ui.$errorsWrapper\n      .addClass('filled')\n      .attr('aria-hidden', 'false')\n      .append(\n        $(this.options.errorTemplate)\n        .addClass('parsley-' + name)\n        .html(message || this._getErrorMessage(assert))\n      );\n  },\n\n  _updateError: function (name, {message, assert}) {\n    this._ui.$errorsWrapper\n      .addClass('filled')\n      .find('.parsley-' + name)\n      .html(message || this._getErrorMessage(assert));\n  },\n\n  _removeError: function (name) {\n    this._ui.$errorClassHandler\n      .removeAttr('aria-describedby');\n    this._ui.$errorsWrapper\n      .removeClass('filled')\n      .attr('aria-hidden', 'true')\n      .find('.parsley-' + name)\n      .remove();\n  },\n\n  _getErrorMessage: function (constraint) {\n    var customConstraintErrorMessage = constraint.name + 'Message';\n\n    if ('undefined' !== typeof this.options[customConstraintErrorMessage])\n      return window.Parsley.formatMessage(this.options[customConstraintErrorMessage], constraint.requirements);\n\n    return window.Parsley.getErrorMessage(constraint);\n  },\n\n  _buildUI: function () {\n    // UI could be already built or disabled\n    if (this._ui || false === this.options.uiEnabled)\n      return;\n\n    var _ui = {};\n\n    // Give field its Parsley id in DOM\n    this.element.setAttribute(this.options.namespace + 'id', this.__id__);\n\n    /** Generate important UI elements and store them in this **/\n    // $errorClassHandler is the $element that woul have parsley-error and parsley-success classes\n    _ui.$errorClassHandler = this._manageClassHandler();\n\n    // $errorsWrapper is a div that would contain the various field errors, it will be appended into $errorsContainer\n    _ui.errorsWrapperId = 'parsley-id-' + (this.options.multiple ? 'multiple-' + this.options.multiple : this.__id__);\n    _ui.$errorsWrapper = $(this.options.errorsWrapper).attr('id', _ui.errorsWrapperId);\n\n    // ValidationResult UI storage to detect what have changed bwt two validations, and update DOM accordingly\n    _ui.lastValidationResult = [];\n    _ui.validationInformationVisible = false;\n\n    // Store it in this for later\n    this._ui = _ui;\n  },\n\n  // Determine which element will have `parsley-error` and `parsley-success` classes\n  _manageClassHandler: function () {\n    // Class handled could also be determined by function given in Parsley options\n    if ('string' === typeof this.options.classHandler && $(this.options.classHandler).length)\n      return $(this.options.classHandler);\n\n    // Class handled could also be determined by function given in Parsley options\n    var $handlerFunction = this.options.classHandler;\n\n    // It might also be the function name of a global function\n    if ('string' === typeof this.options.classHandler && 'function' === typeof window[this.options.classHandler])\n      $handlerFunction = window[this.options.classHandler];\n\n    if ('function' === typeof $handlerFunction) {\n      var $handler = $handlerFunction.call(this, this);\n\n      // If this function returned a valid existing DOM element, go for it\n      if ('undefined' !== typeof $handler && $handler.length)\n        return $handler;\n    } else if ('object' === typeof $handlerFunction && $handlerFunction instanceof jQuery && $handlerFunction.length) {\n      return $handlerFunction;\n    } else if ($handlerFunction) {\n      Utils.warn('The class handler `' + $handlerFunction + '` does not exist in DOM nor as a global JS function');\n    }\n\n    return this._inputHolder();\n  },\n\n  _inputHolder: function() {\n    // if simple element (input, texatrea, select...) it will perfectly host the classes and precede the error container\n    if (!this.options.multiple || this.element.nodeName === 'SELECT')\n      return this.$element;\n\n    // But if multiple element (radio, checkbox), that would be their parent\n    return this.$element.parent();\n  },\n\n  _insertErrorWrapper: function () {\n    var $errorsContainer = this.options.errorsContainer;\n\n    // Nothing to do if already inserted\n    if (0 !== this._ui.$errorsWrapper.parent().length)\n      return this._ui.$errorsWrapper.parent();\n\n    if ('string' === typeof $errorsContainer) {\n      if ($($errorsContainer).length)\n        return $($errorsContainer).append(this._ui.$errorsWrapper);\n      else if ('function' === typeof window[$errorsContainer])\n        $errorsContainer = window[$errorsContainer];\n      else\n        Utils.warn('The errors container `' + $errorsContainer + '` does not exist in DOM nor as a global JS function');\n    }\n\n    if ('function' === typeof $errorsContainer)\n      $errorsContainer = $errorsContainer.call(this, this);\n\n    if ('object' === typeof $errorsContainer && $errorsContainer.length)\n      return $errorsContainer.append(this._ui.$errorsWrapper);\n\n    return this._inputHolder().after(this._ui.$errorsWrapper);\n  },\n\n  _actualizeTriggers: function () {\n    var $toBind = this._findRelated();\n    var trigger;\n\n    // Remove Parsley events already bound on this field\n    $toBind.off('.Parsley');\n    if (this._failedOnce)\n      $toBind.on(Utils.namespaceEvents(this.options.triggerAfterFailure, 'Parsley'), () => {\n        this._validateIfNeeded();\n      });\n    else if (trigger = Utils.namespaceEvents(this.options.trigger, 'Parsley')) {\n      $toBind.on(trigger, event => {\n        this._validateIfNeeded(event);\n      });\n    }\n  },\n\n  _validateIfNeeded: function (event) {\n    // For keyup, keypress, keydown, input... events that could be a little bit obstrusive\n    // do not validate if val length < min threshold on first validation. Once field have been validated once and info\n    // about success or failure have been displayed, always validate with this trigger to reflect every yalidation change.\n    if (event && /key|input/.test(event.type))\n      if (!(this._ui && this._ui.validationInformationVisible) && this.getValue().length <= this.options.validationThreshold)\n        return;\n\n    if (this.options.debounce) {\n      window.clearTimeout(this._debounced);\n      this._debounced = window.setTimeout(() => this.validate(), this.options.debounce);\n    } else\n      this.validate();\n  },\n\n  _resetUI: function () {\n    // Reset all event listeners\n    this._failedOnce = false;\n    this._actualizeTriggers();\n\n    // Nothing to do if UI never initialized for this field\n    if ('undefined' === typeof this._ui)\n      return;\n\n    // Reset all errors' li\n    this._ui.$errorsWrapper\n      .removeClass('filled')\n      .children()\n      .remove();\n\n    // Reset validation class\n    this._resetClass();\n\n    // Reset validation flags and last validation result\n    this._ui.lastValidationResult = [];\n    this._ui.validationInformationVisible = false;\n  },\n\n  _destroyUI: function () {\n    this._resetUI();\n\n    if ('undefined' !== typeof this._ui)\n      this._ui.$errorsWrapper.remove();\n\n    delete this._ui;\n  },\n\n  _successClass: function () {\n    this._ui.validationInformationVisible = true;\n    this._ui.$errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass);\n  },\n  _errorClass: function () {\n    this._ui.validationInformationVisible = true;\n    this._ui.$errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass);\n  },\n  _resetClass: function () {\n    this._ui.$errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass);\n  }\n};\n\nexport default UI;\n","import $ from 'jquery';\nimport Base from './base';\nimport Utils from './utils';\n\nvar Form = function (element, domOptions, options) {\n  this.__class__ = 'Form';\n\n  this.element = element;\n  this.$element = $(element);\n  this.domOptions = domOptions;\n  this.options = options;\n  this.parent = window.Parsley;\n\n  this.fields = [];\n  this.validationResult = null;\n};\n\nvar statusMapping = {pending: null, resolved: true, rejected: false};\n\nForm.prototype = {\n  onSubmitValidate: function (event) {\n    // This is a Parsley generated submit event, do not validate, do not prevent, simply exit and keep normal behavior\n    if (true === event.parsley)\n      return;\n\n    // If we didn't come here through a submit button, use the first one in the form\n    var submitSource = this._submitSource || this.$element.find(Utils._SubmitSelector)[0];\n    this._submitSource = null;\n    this.$element.find('.parsley-synthetic-submit-button').prop('disabled', true);\n    if (submitSource && null !== submitSource.getAttribute('formnovalidate'))\n      return;\n\n    window.Parsley._remoteCache = {};\n\n    var promise = this.whenValidate({event});\n\n    if ('resolved' === promise.state() && false !== this._trigger('submit')) {\n      // All good, let event go through. We make this distinction because browsers\n      // differ in their handling of `submit` being called from inside a submit event [#1047]\n    } else {\n      // Rejected or pending: cancel this submit\n      event.stopImmediatePropagation();\n      event.preventDefault();\n      if ('pending' === promise.state())\n        promise.done(() => { this._submit(submitSource); });\n    }\n  },\n\n  onSubmitButton: function(event) {\n    this._submitSource = event.currentTarget;\n  },\n  // internal\n  // _submit submits the form, this time without going through the validations.\n  // Care must be taken to \"fake\" the actual submit button being clicked.\n  _submit: function (submitSource) {\n    if (false === this._trigger('submit'))\n      return;\n    // Add submit button's data\n    if (submitSource) {\n      var $synthetic = this.$element.find('.parsley-synthetic-submit-button').prop('disabled', false);\n      if (0 === $synthetic.length)\n        $synthetic = $('<input class=\"parsley-synthetic-submit-button\" type=\"hidden\">').appendTo(this.$element);\n      $synthetic.attr({\n        name: submitSource.getAttribute('name'),\n        value: submitSource.getAttribute('value')\n      });\n    }\n\n    this.$element.trigger(Object.assign($.Event('submit'), {parsley: true}));\n  },\n\n  // Performs validation on fields while triggering events.\n  // @returns `true` if all validations succeeds, `false`\n  // if a failure is immediately detected, or `null`\n  // if dependant on a promise.\n  // Consider using `whenValidate` instead.\n  validate: function (options) {\n    if (arguments.length >= 1 && !$.isPlainObject(options)) {\n      Utils.warnOnce('Calling validate on a parsley form without passing arguments as an object is deprecated.');\n      var [group, force, event] = arguments;\n      options = {group, force, event};\n    }\n    return statusMapping[ this.whenValidate(options).state() ];\n  },\n\n  whenValidate: function ({group, force, event} = {}) {\n    this.submitEvent = event;\n    if (event) {\n      this.submitEvent = Object.assign({}, event, {preventDefault: () => {\n        Utils.warnOnce(\"Using `this.submitEvent.preventDefault()` is deprecated; instead, call `this.validationResult = false`\");\n        this.validationResult = false;\n      }});\n    }\n    this.validationResult = true;\n\n    // fire validate event to eventually modify things before every validation\n    this._trigger('validate');\n\n    // Refresh form DOM options and form's fields that could have changed\n    this._refreshFields();\n\n    var promises = this._withoutReactualizingFormOptions(() => {\n      return $.map(this.fields, field => field.whenValidate({force, group}));\n    });\n\n    return Utils.all(promises)\n      .done(  () => { this._trigger('success'); })\n      .fail(  () => {\n        this.validationResult = false;\n        this.focus();\n        this._trigger('error');\n      })\n      .always(() => { this._trigger('validated'); })\n      .pipe(...this._pipeAccordingToValidationResult());\n  },\n\n  // Iterate over refreshed fields, and stop on first failure.\n  // Returns `true` if all fields are valid, `false` if a failure is detected\n  // or `null` if the result depends on an unresolved promise.\n  // Prefer using `whenValid` instead.\n  isValid: function (options) {\n    if (arguments.length >= 1 && !$.isPlainObject(options)) {\n      Utils.warnOnce('Calling isValid on a parsley form without passing arguments as an object is deprecated.');\n      var [group, force] = arguments;\n      options = {group, force};\n    }\n    return statusMapping[ this.whenValid(options).state() ];\n  },\n\n  // Iterate over refreshed fields and validate them.\n  // Returns a promise.\n  // A validation that immediately fails will interrupt the validations.\n  whenValid: function ({group, force} = {}) {\n    this._refreshFields();\n\n    var promises = this._withoutReactualizingFormOptions(() => {\n      return $.map(this.fields, field => field.whenValid({group, force}));\n    });\n    return Utils.all(promises);\n  },\n\n  refresh: function() {\n    this._refreshFields();\n    return this;\n  },\n\n  // Reset UI\n  reset: function () {\n    // Form case: emit a reset event for each field\n    for (var i = 0; i < this.fields.length; i++)\n      this.fields[i].reset();\n\n    this._trigger('reset');\n  },\n\n  // Destroy Parsley instance (+ UI)\n  destroy: function () {\n    // Field case: emit destroy event to clean UI and then destroy stored instance\n    this._destroyUI();\n\n    // Form case: destroy all its fields and then destroy stored instance\n    for (var i = 0; i < this.fields.length; i++)\n      this.fields[i].destroy();\n\n    this.$element.removeData('Parsley');\n    this._trigger('destroy');\n  },\n\n  _refreshFields: function () {\n    return this.actualizeOptions()._bindFields();\n  },\n\n  _bindFields: function () {\n    var oldFields = this.fields;\n\n    this.fields = [];\n    this.fieldsMappedById = {};\n\n    this._withoutReactualizingFormOptions(() => {\n      this.$element\n      .find(this.options.inputs)\n      .not(this.options.excluded)\n      .not(`[${this.options.namespace}excluded=true]`)\n      .each((_, element) => {\n        var fieldInstance = new window.Parsley.Factory(element, {}, this);\n\n        // Only add valid and not excluded `Field` and `FieldMultiple` children\n        if ('Field' === fieldInstance.__class__ || 'FieldMultiple' === fieldInstance.__class__) {\n          let uniqueId = fieldInstance.__class__ + '-' + fieldInstance.__id__;\n          if ('undefined' === typeof this.fieldsMappedById[uniqueId]) {\n            this.fieldsMappedById[uniqueId] = fieldInstance;\n            this.fields.push(fieldInstance);\n          }\n        }\n      });\n\n      $.each(Utils.difference(oldFields, this.fields), (_, field) => {\n        field.reset();\n      });\n    });\n    return this;\n  },\n\n  // Internal only.\n  // Looping on a form's fields to do validation or similar\n  // will trigger reactualizing options on all of them, which\n  // in turn will reactualize the form's options.\n  // To avoid calling actualizeOptions so many times on the form\n  // for nothing, _withoutReactualizingFormOptions temporarily disables\n  // the method actualizeOptions on this form while `fn` is called.\n  _withoutReactualizingFormOptions: function (fn) {\n    var oldActualizeOptions = this.actualizeOptions;\n    this.actualizeOptions = function () { return this; };\n    var result = fn();\n    this.actualizeOptions = oldActualizeOptions;\n    return result;\n  },\n\n  // Internal only.\n  // Shortcut to trigger an event\n  // Returns true iff event is not interrupted and default not prevented.\n  _trigger: function (eventName) {\n    return this.trigger('form:' + eventName);\n  }\n\n};\n\nexport default Form;\n","import Utils from './utils';\nimport Validator from './validator';\n\nconst Constraint = function(parsleyField, name, requirements, priority, isDomConstraint) {\n  const validatorSpec = window.Parsley._validatorRegistry.validators[name];\n  const validator = new Validator(validatorSpec);\n  priority = priority || parsleyField.options[name + 'Priority'] || validator.priority;\n  isDomConstraint = (true === isDomConstraint);\n\n  Object.assign(this, {\n    validator,\n    name,\n    requirements,\n    priority,\n    isDomConstraint\n  });\n  this._parseRequirements(parsleyField.options);\n};\n\nconst capitalize = function(str) {\n  const cap = str[0].toUpperCase();\n  return cap + str.slice(1);\n};\n\nConstraint.prototype = {\n  validate: function(value, instance) {\n    return this.validator.validate(value, ...this.requirementList, instance);\n  },\n\n  _parseRequirements: function(options) {\n    this.requirementList = this.validator.parseRequirements(this.requirements,\n      key => options[this.name + capitalize(key)]\n    );\n  }\n};\n\nexport default Constraint;\n","import $ from 'jquery';\nimport Constraint from './constraint';\nimport UI from './ui';\nimport Utils from './utils';\n\nvar Field = function (field, domOptions, options, parsleyFormInstance) {\n  this.__class__ = 'Field';\n\n  this.element = field;\n  this.$element = $(field);\n\n  // Set parent if we have one\n  if ('undefined' !== typeof parsleyFormInstance) {\n    this.parent = parsleyFormInstance;\n  }\n\n  this.options = options;\n  this.domOptions = domOptions;\n\n  // Initialize some properties\n  this.constraints = [];\n  this.constraintsByName = {};\n  this.validationResult = true;\n\n  // Bind constraints\n  this._bindConstraints();\n};\n\nvar statusMapping = {pending: null, resolved: true, rejected: false};\n\nField.prototype = {\n  // # Public API\n  // Validate field and trigger some events for mainly `UI`\n  // @returns `true`, an array of the validators that failed, or\n  // `null` if validation is not finished. Prefer using whenValidate\n  validate: function (options) {\n    if (arguments.length >= 1 && !$.isPlainObject(options)) {\n      Utils.warnOnce('Calling validate on a parsley field without passing arguments as an object is deprecated.');\n      options = {options};\n    }\n    var promise = this.whenValidate(options);\n    if (!promise)  // If excluded with `group` option\n      return true;\n    switch (promise.state()) {\n      case 'pending': return null;\n      case 'resolved': return true;\n      case 'rejected': return this.validationResult;\n    }\n  },\n\n  // Validate field and trigger some events for mainly `UI`\n  // @returns a promise that succeeds only when all validations do\n  // or `undefined` if field is not in the given `group`.\n  whenValidate: function ({force, group} =  {}) {\n    // do not validate a field if not the same as given validation group\n    this.refresh();\n    if (group && !this._isInGroup(group))\n      return;\n\n    this.value = this.getValue();\n\n    // Field Validate event. `this.value` could be altered for custom needs\n    this._trigger('validate');\n\n    return this.whenValid({force, value: this.value, _refreshed: true})\n      .always(() => { this._reflowUI(); })\n      .done(() =>   { this._trigger('success'); })\n      .fail(() =>   { this._trigger('error'); })\n      .always(() => { this._trigger('validated'); })\n      .pipe(...this._pipeAccordingToValidationResult());\n  },\n\n  hasConstraints: function () {\n    return 0 !== this.constraints.length;\n  },\n\n  // An empty optional field does not need validation\n  needsValidation: function (value) {\n    if ('undefined' === typeof value)\n      value = this.getValue();\n\n    // If a field is empty and not required, it is valid\n    // Except if `data-parsley-validate-if-empty` explicitely added, useful for some custom validators\n    if (!value.length && !this._isRequired() && 'undefined' === typeof this.options.validateIfEmpty)\n      return false;\n\n    return true;\n  },\n\n  _isInGroup: function (group) {\n    if (Array.isArray(this.options.group))\n      return -1 !== $.inArray(group, this.options.group);\n    return this.options.group === group;\n  },\n\n  // Just validate field. Do not trigger any event.\n  // Returns `true` iff all constraints pass, `false` if there are failures,\n  // or `null` if the result can not be determined yet (depends on a promise)\n  // See also `whenValid`.\n  isValid: function (options) {\n    if (arguments.length >= 1 && !$.isPlainObject(options)) {\n      Utils.warnOnce('Calling isValid on a parsley field without passing arguments as an object is deprecated.');\n      var [force, value] = arguments;\n      options = {force, value};\n    }\n    var promise = this.whenValid(options);\n    if (!promise) // Excluded via `group`\n      return true;\n    return statusMapping[promise.state()];\n  },\n\n  // Just validate field. Do not trigger any event.\n  // @returns a promise that succeeds only when all validations do\n  // or `undefined` if the field is not in the given `group`.\n  // The argument `force` will force validation of empty fields.\n  // If a `value` is given, it will be validated instead of the value of the input.\n  whenValid: function ({force = false, value, group, _refreshed} = {}) {\n    // Recompute options and rebind constraints to have latest changes\n    if (!_refreshed)\n      this.refresh();\n    // do not validate a field if not the same as given validation group\n    if (group && !this._isInGroup(group))\n      return;\n\n    this.validationResult = true;\n\n    // A field without constraint is valid\n    if (!this.hasConstraints())\n      return $.when();\n\n    // Value could be passed as argument, needed to add more power to 'field:validate'\n    if ('undefined' === typeof value || null === value)\n      value = this.getValue();\n\n    if (!this.needsValidation(value) && true !== force)\n      return $.when();\n\n    var groupedConstraints = this._getGroupedConstraints();\n    var promises = [];\n    $.each(groupedConstraints, (_, constraints) => {\n      // Process one group of constraints at a time, we validate the constraints\n      // and combine the promises together.\n      var promise = Utils.all(\n        $.map(constraints, constraint => this._validateConstraint(value, constraint))\n      );\n      promises.push(promise);\n      if (promise.state() === 'rejected')\n        return false; // Interrupt processing if a group has already failed\n    });\n    return Utils.all(promises);\n  },\n\n  // @returns a promise\n  _validateConstraint: function(value, constraint) {\n    var result = constraint.validate(value, this);\n    // Map false to a failed promise\n    if (false === result)\n      result = $.Deferred().reject();\n    // Make sure we return a promise and that we record failures\n    return Utils.all([result]).fail(errorMessage => {\n      if (!(this.validationResult instanceof Array))\n        this.validationResult = [];\n      this.validationResult.push({\n        assert: constraint,\n        errorMessage: 'string' === typeof errorMessage && errorMessage\n      });\n    });\n  },\n\n  // @returns Parsley field computed value that could be overrided or configured in DOM\n  getValue: function () {\n    var value;\n\n    // Value could be overriden in DOM or with explicit options\n    if ('function' === typeof this.options.value)\n      value = this.options.value(this);\n    else if ('undefined' !== typeof this.options.value)\n      value = this.options.value;\n    else\n      value = this.$element.val();\n\n    // Handle wrong DOM or configurations\n    if ('undefined' === typeof value || null === value)\n      return '';\n\n    return this._handleWhitespace(value);\n  },\n\n  // Reset UI\n  reset: function () {\n    this._resetUI();\n    return this._trigger('reset');\n  },\n\n  // Destroy Parsley instance (+ UI)\n  destroy: function () {\n    // Field case: emit destroy event to clean UI and then destroy stored instance\n    this._destroyUI();\n    this.$element.removeData('Parsley');\n    this.$element.removeData('FieldMultiple');\n    this._trigger('destroy');\n  },\n\n  // Actualize options and rebind constraints\n  refresh: function () {\n    this._refreshConstraints();\n    return this;\n  },\n\n  _refreshConstraints: function () {\n    return this.actualizeOptions()._bindConstraints();\n  },\n\n  refreshConstraints: function() {\n    Utils.warnOnce(\"Parsley's refreshConstraints is deprecated. Please use refresh\");\n    return this.refresh();\n  },\n\n  /**\n  * Add a new constraint to a field\n  *\n  * @param {String}   name\n  * @param {Mixed}    requirements      optional\n  * @param {Number}   priority          optional\n  * @param {Boolean}  isDomConstraint   optional\n  */\n  addConstraint: function (name, requirements, priority, isDomConstraint) {\n\n    if (window.Parsley._validatorRegistry.validators[name]) {\n      var constraint = new Constraint(this, name, requirements, priority, isDomConstraint);\n\n      // if constraint already exist, delete it and push new version\n      if ('undefined' !== this.constraintsByName[constraint.name])\n        this.removeConstraint(constraint.name);\n\n      this.constraints.push(constraint);\n      this.constraintsByName[constraint.name] = constraint;\n    }\n\n    return this;\n  },\n\n  // Remove a constraint\n  removeConstraint: function (name) {\n    for (var i = 0; i < this.constraints.length; i++)\n      if (name === this.constraints[i].name) {\n        this.constraints.splice(i, 1);\n        break;\n      }\n    delete this.constraintsByName[name];\n    return this;\n  },\n\n  // Update a constraint (Remove + re-add)\n  updateConstraint: function (name, parameters, priority) {\n    return this.removeConstraint(name)\n      .addConstraint(name, parameters, priority);\n  },\n\n  // # Internals\n\n  // Internal only.\n  // Bind constraints from config + options + DOM\n  _bindConstraints: function () {\n    var constraints = [];\n    var constraintsByName = {};\n\n    // clean all existing DOM constraints to only keep javascript user constraints\n    for (var i = 0; i < this.constraints.length; i++)\n      if (false === this.constraints[i].isDomConstraint) {\n        constraints.push(this.constraints[i]);\n        constraintsByName[this.constraints[i].name] = this.constraints[i];\n      }\n\n    this.constraints = constraints;\n    this.constraintsByName = constraintsByName;\n\n    // then re-add Parsley DOM-API constraints\n    for (var name in this.options)\n      this.addConstraint(name, this.options[name], undefined, true);\n\n    // finally, bind special HTML5 constraints\n    return this._bindHtml5Constraints();\n  },\n\n  // Internal only.\n  // Bind specific HTML5 constraints to be HTML5 compliant\n  _bindHtml5Constraints: function () {\n    // html5 required\n    if (null !== this.element.getAttribute('required'))\n      this.addConstraint('required', true, undefined, true);\n\n    // html5 pattern\n    if (null !== this.element.getAttribute('pattern'))\n      this.addConstraint('pattern', this.element.getAttribute('pattern'), undefined, true);\n\n    // range\n    let min = this.element.getAttribute('min');\n    let max = this.element.getAttribute('max');\n    if (null !== min && null !== max)\n      this.addConstraint('range', [min, max], undefined, true);\n\n    // HTML5 min\n    else if (null !== min)\n      this.addConstraint('min', min, undefined, true);\n\n    // HTML5 max\n    else if (null !== max)\n      this.addConstraint('max', max, undefined, true);\n\n\n    // length\n    if (null !== this.element.getAttribute('minlength') && null !== this.element.getAttribute('maxlength'))\n      this.addConstraint('length', [this.element.getAttribute('minlength'), this.element.getAttribute('maxlength')], undefined, true);\n\n    // HTML5 minlength\n    else if (null !== this.element.getAttribute('minlength'))\n      this.addConstraint('minlength', this.element.getAttribute('minlength'), undefined, true);\n\n    // HTML5 maxlength\n    else if (null !== this.element.getAttribute('maxlength'))\n      this.addConstraint('maxlength', this.element.getAttribute('maxlength'), undefined, true);\n\n\n    // html5 types\n    var type = Utils.getType(this.element);\n\n    // Small special case here for HTML5 number: integer validator if step attribute is undefined or an integer value, number otherwise\n    if ('number' === type) {\n      return this.addConstraint('type', ['number', {\n        step: this.element.getAttribute('step') || '1',\n        base: min || this.element.getAttribute('value')\n      }], undefined, true);\n    // Regular other HTML5 supported types\n    } else if (/^(email|url|range|date)$/i.test(type)) {\n      return this.addConstraint('type', type, undefined, true);\n    }\n    return this;\n  },\n\n  // Internal only.\n  // Field is required if have required constraint without `false` value\n  _isRequired: function () {\n    if ('undefined' === typeof this.constraintsByName.required)\n      return false;\n\n    return false !== this.constraintsByName.required.requirements;\n  },\n\n  // Internal only.\n  // Shortcut to trigger an event\n  _trigger: function (eventName) {\n    return this.trigger('field:' + eventName);\n  },\n\n  // Internal only\n  // Handles whitespace in a value\n  // Use `data-parsley-whitespace=\"squish\"` to auto squish input value\n  // Use `data-parsley-whitespace=\"trim\"` to auto trim input value\n  _handleWhitespace: function (value) {\n    if (true === this.options.trimValue)\n      Utils.warnOnce('data-parsley-trim-value=\"true\" is deprecated, please use data-parsley-whitespace=\"trim\"');\n\n    if ('squish' === this.options.whitespace)\n      value = value.replace(/\\s{2,}/g, ' ');\n\n    if (('trim' === this.options.whitespace) || ('squish' === this.options.whitespace) || (true === this.options.trimValue))\n      value = Utils.trimString(value);\n\n    return value;\n  },\n\n  _isDateInput: function() {\n    var c = this.constraintsByName.type;\n    return c && c.requirements === 'date';\n  },\n\n  // Internal only.\n  // Returns the constraints, grouped by descending priority.\n  // The result is thus an array of arrays of constraints.\n  _getGroupedConstraints: function () {\n    if (false === this.options.priorityEnabled)\n      return [this.constraints];\n\n    var groupedConstraints = [];\n    var index = {};\n\n    // Create array unique of priorities\n    for (var i = 0; i < this.constraints.length; i++) {\n      var p = this.constraints[i].priority;\n      if (!index[p])\n        groupedConstraints.push(index[p] = []);\n      index[p].push(this.constraints[i]);\n    }\n    // Sort them by priority DESC\n    groupedConstraints.sort(function (a, b) { return b[0].priority - a[0].priority; });\n\n    return groupedConstraints;\n  }\n\n};\n\nexport default Field;\n","import $ from 'jquery';\nimport Utils from './utils';\n\nvar Multiple = function () {\n  this.__class__ = 'FieldMultiple';\n};\n\nMultiple.prototype = {\n  // Add new `$element` sibling for multiple field\n  addElement: function ($element) {\n    this.$elements.push($element);\n\n    return this;\n  },\n\n  // See `Field._refreshConstraints()`\n  _refreshConstraints: function () {\n    var fieldConstraints;\n\n    this.constraints = [];\n\n    // Select multiple special treatment\n    if (this.element.nodeName === 'SELECT') {\n      this.actualizeOptions()._bindConstraints();\n\n      return this;\n    }\n\n    // Gather all constraints for each input in the multiple group\n    for (var i = 0; i < this.$elements.length; i++) {\n\n      // Check if element have not been dynamically removed since last binding\n      if (!$('html').has(this.$elements[i]).length) {\n        this.$elements.splice(i, 1);\n        continue;\n      }\n\n      fieldConstraints = this.$elements[i].data('FieldMultiple')._refreshConstraints().constraints;\n\n      for (var j = 0; j < fieldConstraints.length; j++)\n        this.addConstraint(fieldConstraints[j].name, fieldConstraints[j].requirements, fieldConstraints[j].priority, fieldConstraints[j].isDomConstraint);\n    }\n\n    return this;\n  },\n\n  // See `Field.getValue()`\n  getValue: function () {\n    // Value could be overriden in DOM\n    if ('function' === typeof this.options.value)\n      return this.options.value(this);\n    else if ('undefined' !== typeof this.options.value)\n      return this.options.value;\n\n    // Radio input case\n    if (this.element.nodeName === 'INPUT') {\n      var type = Utils.getType(this.element);\n      if (type === 'radio')\n        return this._findRelated().filter(':checked').val() || '';\n\n      // checkbox input case\n      if (type === 'checkbox') {\n        var values = [];\n\n        this._findRelated().filter(':checked').each(function () {\n          values.push($(this).val());\n        });\n\n        return values;\n      }\n    }\n\n    // Select multiple case\n    if (this.element.nodeName === 'SELECT' && null === this.$element.val())\n      return [];\n\n    // Default case that should never happen\n    return this.$element.val();\n  },\n\n  _init: function () {\n    this.$elements = [this.$element];\n\n    return this;\n  }\n};\n\nexport default Multiple;\n","import $ from 'jquery';\nimport Utils from './utils';\nimport Base from './base';\nimport Form from './form';\nimport Field from './field';\nimport Multiple from './multiple';\n\nvar Factory = function (element, options, parsleyFormInstance) {\n  this.element = element;\n  this.$element = $(element);\n\n  // If the element has already been bound, returns its saved Parsley instance\n  var savedparsleyFormInstance = this.$element.data('Parsley');\n  if (savedparsleyFormInstance) {\n\n    // If the saved instance has been bound without a Form parent and there is one given in this call, add it\n    if ('undefined' !== typeof parsleyFormInstance && savedparsleyFormInstance.parent === window.Parsley) {\n      savedparsleyFormInstance.parent = parsleyFormInstance;\n      savedparsleyFormInstance._resetOptions(savedparsleyFormInstance.options);\n    }\n\n    if ('object' === typeof options) {\n      Object.assign(savedparsleyFormInstance.options, options);\n    }\n\n    return savedparsleyFormInstance;\n  }\n\n  // Parsley must be instantiated with a DOM element or jQuery $element\n  if (!this.$element.length)\n    throw new Error('You must bind Parsley on an existing element.');\n\n  if ('undefined' !== typeof parsleyFormInstance && 'Form' !== parsleyFormInstance.__class__)\n    throw new Error('Parent instance must be a Form instance');\n\n  this.parent = parsleyFormInstance || window.Parsley;\n  return this.init(options);\n};\n\nFactory.prototype = {\n  init: function (options) {\n    this.__class__ = 'Parsley';\n    this.__version__ = 'VERSION';\n    this.__id__ = Utils.generateID();\n\n    // Pre-compute options\n    this._resetOptions(options);\n\n    // A Form instance is obviously a `<form>` element but also every node that is not an input and has the `data-parsley-validate` attribute\n    if (this.element.nodeName === 'FORM' || (Utils.checkAttr(this.element, this.options.namespace, 'validate') && !this.$element.is(this.options.inputs)))\n      return this.bind('parsleyForm');\n\n    // Every other element is bound as a `Field` or `FieldMultiple`\n    return this.isMultiple() ? this.handleMultiple() : this.bind('parsleyField');\n  },\n\n  isMultiple: function () {\n    var type = Utils.getType(this.element);\n    return ((type === 'radio' || type === 'checkbox') ||\n      (this.element.nodeName === 'SELECT' && null !== this.element.getAttribute('multiple')));\n  },\n\n  // Multiples fields are a real nightmare :(\n  // Maybe some refactoring would be appreciated here...\n  handleMultiple: function () {\n    var name;\n    var multiple;\n    var parsleyMultipleInstance;\n\n    // Handle multiple name\n    this.options.multiple = this.options.multiple ||\n      (name = this.element.getAttribute('name')) ||\n      this.element.getAttribute('id');\n\n    // Special select multiple input\n    if (this.element.nodeName === 'SELECT' && null !== this.element.getAttribute('multiple')) {\n      this.options.multiple = this.options.multiple || this.__id__;\n      return this.bind('parsleyFieldMultiple');\n\n    // Else for radio / checkboxes, we need a `name` or `data-parsley-multiple` to properly bind it\n    } else if (!this.options.multiple) {\n      Utils.warn('To be bound by Parsley, a radio, a checkbox and a multiple select input must have either a name or a multiple option.', this.$element);\n      return this;\n    }\n\n    // Remove special chars\n    this.options.multiple = this.options.multiple.replace(/(:|\\.|\\[|\\]|\\{|\\}|\\$)/g, '');\n\n    // Add proper `data-parsley-multiple` to siblings if we have a valid multiple name\n    if (name) {\n      $('input[name=\"' + name + '\"]').each((i, input) => {\n        var type = Utils.getType(input);\n        if ((type === 'radio' || type === 'checkbox'))\n          input.setAttribute(this.options.namespace + 'multiple', this.options.multiple);\n      });\n    }\n\n    // Check here if we don't already have a related multiple instance saved\n    var $previouslyRelated = this._findRelated();\n    for (var i = 0; i < $previouslyRelated.length; i++) {\n      parsleyMultipleInstance = $($previouslyRelated.get(i)).data('Parsley');\n      if ('undefined' !== typeof parsleyMultipleInstance) {\n\n        if (!this.$element.data('FieldMultiple')) {\n          parsleyMultipleInstance.addElement(this.$element);\n        }\n\n        break;\n      }\n    }\n\n    // Create a secret Field instance for every multiple field. It will be stored in `data('FieldMultiple')`\n    // And will be useful later to access classic `Field` stuff while being in a `FieldMultiple` instance\n    this.bind('parsleyField', true);\n\n    return parsleyMultipleInstance || this.bind('parsleyFieldMultiple');\n  },\n\n  // Return proper `Form`, `Field` or `FieldMultiple`\n  bind: function (type, doNotStore) {\n    var parsleyInstance;\n\n    switch (type) {\n      case 'parsleyForm':\n        parsleyInstance = $.extend(\n          new Form(this.element, this.domOptions, this.options),\n          new Base(),\n          window.ParsleyExtend\n        )._bindFields();\n        break;\n      case 'parsleyField':\n        parsleyInstance = $.extend(\n          new Field(this.element, this.domOptions, this.options, this.parent),\n          new Base(),\n          window.ParsleyExtend\n        );\n        break;\n      case 'parsleyFieldMultiple':\n        parsleyInstance = $.extend(\n          new Field(this.element, this.domOptions, this.options, this.parent),\n          new Multiple(),\n          new Base(),\n          window.ParsleyExtend\n        )._init();\n        break;\n      default:\n        throw new Error(type + 'is not a supported Parsley type');\n    }\n\n    if (this.options.multiple)\n      Utils.setAttr(this.element, this.options.namespace, 'multiple', this.options.multiple);\n\n    if ('undefined' !== typeof doNotStore) {\n      this.$element.data('FieldMultiple', parsleyInstance);\n\n      return parsleyInstance;\n    }\n\n    // Store the freshly bound instance in a DOM element for later access using jQuery `data()`\n    this.$element.data('Parsley', parsleyInstance);\n\n    // Tell the world we have a new Form or Field instance!\n    parsleyInstance._actualizeTriggers();\n    parsleyInstance._trigger('init');\n\n    return parsleyInstance;\n  }\n};\n\nexport default Factory;\n","import $ from 'jquery';\nimport Utils from './utils';\nimport Defaults from './defaults';\nimport Base from './base';\nimport ValidatorRegistry from './validator_registry';\nimport UI from './ui';\nimport Form from './form';\nimport Field from './field';\nimport Multiple from './multiple';\nimport Factory from './factory';\n\nvar vernums = $.fn.jquery.split('.');\nif (parseInt(vernums[0]) <= 1 && parseInt(vernums[1]) < 8) {\n  throw \"The loaded version of jQuery is too old. Please upgrade to 1.8.x or better.\";\n}\nif (!vernums.forEach) {\n  Utils.warn('Parsley requires ES5 to run properly. Please include https://github.com/es-shims/es5-shim');\n}\n// Inherit `on`, `off` & `trigger` to Parsley:\nvar Parsley = Object.assign(new Base(), {\n    element: document,\n    $element: $(document),\n    actualizeOptions: null,\n    _resetOptions: null,\n    Factory: Factory,\n    version: 'VERSION'\n  });\n\n// Supplement Field and Form with Base\n// This way, the constructors will have access to those methods\nObject.assign(Field.prototype, UI.Field, Base.prototype);\nObject.assign(Form.prototype, UI.Form, Base.prototype);\n// Inherit actualizeOptions and _resetOptions:\nObject.assign(Factory.prototype, Base.prototype);\n\n// ### jQuery API\n// `$('.elem').parsley(options)` or `$('.elem').psly(options)`\n$.fn.parsley = $.fn.psly = function (options) {\n  if (this.length > 1) {\n    var instances = [];\n\n    this.each(function () {\n      instances.push($(this).parsley(options));\n    });\n\n    return instances;\n  }\n\n  // Return undefined if applied to non existing DOM element\n  if (this.length == 0) {\n    return;\n  }\n\n  return new Factory(this[0], options);\n};\n\n// ### Field and Form extension\n// Ensure the extension is now defined if it wasn't previously\nif ('undefined' === typeof window.ParsleyExtend)\n  window.ParsleyExtend = {};\n\n// ### Parsley config\n// Inherit from ParsleyDefault, and copy over any existing values\nParsley.options = Object.assign(Utils.objectCreate(Defaults), window.ParsleyConfig);\nwindow.ParsleyConfig = Parsley.options; // Old way of accessing global options\n\n// ### Globals\nwindow.Parsley = window.psly = Parsley;\nParsley.Utils = Utils;\nwindow.ParsleyUtils = {};\n$.each(Utils, (key, value) => {\n  if ('function' === typeof value) {\n    window.ParsleyUtils[key] = (...args) => {\n      Utils.warnOnce('Accessing `window.ParsleyUtils` is deprecated. Use `window.Parsley.Utils` instead.');\n      return Utils[key](...args);\n    };\n  }\n});\n\n// ### Define methods that forward to the registry, and deprecate all access except through window.Parsley\nvar registry = window.Parsley._validatorRegistry = new ValidatorRegistry(window.ParsleyConfig.validators, window.ParsleyConfig.i18n);\nwindow.ParsleyValidator = {};\n$.each('setLocale addCatalog addMessage addMessages getErrorMessage formatMessage addValidator updateValidator removeValidator hasValidator'.split(' '), function (i, method) {\n  window.Parsley[method] = (...args) => registry[method](...args);\n  window.ParsleyValidator[method] = function () {\n    Utils.warnOnce(`Accessing the method '${method}' through Validator is deprecated. Simply call 'window.Parsley.${method}(...)'`);\n    return window.Parsley[method](...arguments);\n  };\n});\n\n// ### UI\n// Deprecated global object\nwindow.Parsley.UI = UI;\nwindow.ParsleyUI = {\n  removeError: function (instance, name, doNotUpdateClass) {\n    var updateClass = true !== doNotUpdateClass;\n    Utils.warnOnce(`Accessing UI is deprecated. Call 'removeError' on the instance directly. Please comment in issue 1073 as to your need to call this method.`);\n    return instance.removeError(name, {updateClass});\n  },\n  getErrorsMessages: function (instance) {\n    Utils.warnOnce(`Accessing UI is deprecated. Call 'getErrorsMessages' on the instance directly.`);\n    return instance.getErrorsMessages();\n  }\n};\n$.each('addError updateError'.split(' '), function (i, method) {\n  window.ParsleyUI[method] = function (instance, name, message, assert, doNotUpdateClass) {\n    var updateClass = true !== doNotUpdateClass;\n    Utils.warnOnce(`Accessing UI is deprecated. Call '${method}' on the instance directly. Please comment in issue 1073 as to your need to call this method.`);\n    return instance[method](name, {message, assert, updateClass});\n  };\n});\n\n// ### PARSLEY auto-binding\n// Prevent it by setting `ParsleyConfig.autoBind` to `false`\nif (false !== window.ParsleyConfig.autoBind) {\n  $(function () {\n    // Works only on `data-parsley-validate`.\n    if ($('[data-parsley-validate]').length)\n      $('[data-parsley-validate]').parsley();\n  });\n}\n\nexport default Parsley;\n","import $ from 'jquery';\nimport Field from './field';\nimport Form from './form';\nimport Utils from './utils';\n\nvar o = $({});\nvar deprecated = function () {\n  Utils.warnOnce(\"Parsley's pubsub module is deprecated; use the 'on' and 'off' methods on parsley instances or window.Parsley\");\n};\n\n// Returns an event handler that calls `fn` with the arguments it expects\nfunction adapt(fn, context) {\n  // Store to allow unbinding\n  if (!fn.parsleyAdaptedCallback) {\n    fn.parsleyAdaptedCallback = function () {\n      var args = Array.prototype.slice.call(arguments, 0);\n      args.unshift(this);\n      fn.apply(context || o, args);\n    };\n  }\n  return fn.parsleyAdaptedCallback;\n}\n\nvar eventPrefix = 'parsley:';\n// Converts 'parsley:form:validate' into 'form:validate'\nfunction eventName(name) {\n  if (name.lastIndexOf(eventPrefix, 0) === 0)\n    return name.substr(eventPrefix.length);\n  return name;\n}\n\n// $.listen is deprecated. Use Parsley.on instead.\n$.listen = function (name, callback) {\n  var context;\n  deprecated();\n  if ('object' === typeof arguments[1] && 'function' === typeof arguments[2]) {\n    context = arguments[1];\n    callback = arguments[2];\n  }\n\n  if ('function' !== typeof callback)\n    throw new Error('Wrong parameters');\n\n  window.Parsley.on(eventName(name), adapt(callback, context));\n};\n\n$.listenTo = function (instance, name, fn) {\n  deprecated();\n  if (!(instance instanceof Field) && !(instance instanceof Form))\n    throw new Error('Must give Parsley instance');\n\n  if ('string' !== typeof name || 'function' !== typeof fn)\n    throw new Error('Wrong parameters');\n\n  instance.on(eventName(name), adapt(fn));\n};\n\n$.unsubscribe = function (name, fn) {\n  deprecated();\n  if ('string' !== typeof name || 'function' !== typeof fn)\n    throw new Error('Wrong arguments');\n  window.Parsley.off(eventName(name), fn.parsleyAdaptedCallback);\n};\n\n$.unsubscribeTo = function (instance, name) {\n  deprecated();\n  if (!(instance instanceof Field) && !(instance instanceof Form))\n    throw new Error('Must give Parsley instance');\n  instance.off(eventName(name));\n};\n\n$.unsubscribeAll = function (name) {\n  deprecated();\n  window.Parsley.off(eventName(name));\n  $('form,input,textarea,select').each(function () {\n    var instance = $(this).data('Parsley');\n    if (instance) {\n      instance.off(eventName(name));\n    }\n  });\n};\n\n// $.emit is deprecated. Use jQuery events instead.\n$.emit = function (name, instance) {\n  deprecated();\n  var instanceGiven = (instance instanceof Field) || (instance instanceof Form);\n  var args = Array.prototype.slice.call(arguments, instanceGiven ? 2 : 1);\n  args.unshift(eventName(name));\n  if (!instanceGiven) {\n    instance = window.Parsley;\n  }\n  instance.trigger(...args);\n};\n\nexport default {};\n","import $ from 'jquery';\nimport Utils from './utils';\nimport Base from './base';\n\nimport Parsley from './main';\n\n$.extend(true, Parsley, {\n  asyncValidators: {\n    'default': {\n      fn: function (xhr) {\n        // By default, only status 2xx are deemed successful.\n        // Note: we use status instead of state() because responses with status 200\n        // but invalid messages (e.g. an empty body for content type set to JSON) will\n        // result in state() === 'rejected'.\n        return xhr.status >= 200 && xhr.status < 300;\n      },\n      url: false\n    },\n    reverse: {\n      fn: function (xhr) {\n        // If reverse option is set, a failing ajax request is considered successful\n        return xhr.status < 200 || xhr.status >= 300;\n      },\n      url: false\n    }\n  },\n\n  addAsyncValidator: function (name, fn, url, options) {\n    Parsley.asyncValidators[name] = {\n      fn: fn,\n      url: url || false,\n      options: options || {}\n    };\n\n    return this;\n  }\n\n});\n\nParsley.addValidator('remote', {\n  requirementType: {\n    '': 'string',\n    'validator': 'string',\n    'reverse': 'boolean',\n    'options': 'object'\n  },\n\n  validateString: function (value, url, options, instance) {\n    var data = {};\n    var ajaxOptions;\n    var csr;\n    var validator = options.validator || (true === options.reverse ? 'reverse' : 'default');\n\n    if ('undefined' === typeof Parsley.asyncValidators[validator])\n      throw new Error('Calling an undefined async validator: `' + validator + '`');\n\n    url = Parsley.asyncValidators[validator].url || url;\n\n    // Fill current value\n    if (url.indexOf('{value}') > -1) {\n      url = url.replace('{value}', encodeURIComponent(value));\n    } else {\n      data[instance.element.getAttribute('name') || instance.element.getAttribute('id')] = value;\n    }\n\n    // Merge options passed in from the function with the ones in the attribute\n    var remoteOptions = $.extend(true, options.options || {} , Parsley.asyncValidators[validator].options);\n\n    // All `$.ajax(options)` could be overridden or extended directly from DOM in `data-parsley-remote-options`\n    ajaxOptions = $.extend(true, {}, {\n      url: url,\n      data: data,\n      type: 'GET'\n    }, remoteOptions);\n\n    // Generate store key based on ajax options\n    instance.trigger('field:ajaxoptions', instance, ajaxOptions);\n\n    csr = $.param(ajaxOptions);\n\n    // Initialise querry cache\n    if ('undefined' === typeof Parsley._remoteCache)\n      Parsley._remoteCache = {};\n\n    // Try to retrieve stored xhr\n    var xhr = Parsley._remoteCache[csr] = Parsley._remoteCache[csr] || $.ajax(ajaxOptions);\n\n    var handleXhr = function () {\n      var result = Parsley.asyncValidators[validator].fn.call(instance, xhr, url, options);\n      if (!result) // Map falsy results to rejected promise\n        result = $.Deferred().reject();\n      return $.when(result);\n    };\n\n    return xhr.then(handleXhr, handleXhr);\n  },\n\n  priority: -1\n});\n\nParsley.on('form:submit', function () {\n  Parsley._remoteCache = {};\n});\n\nBase.prototype.addAsyncValidator = function () {\n  Utils.warnOnce('Accessing the method `addAsyncValidator` through an instance is deprecated. Simply call `Parsley.addAsyncValidator(...)`');\n  return Parsley.addAsyncValidator(...arguments);\n};\n","// This is included with the Parsley library itself,\n// thus there is no use in adding it to your project.\nimport Parsley from '../parsley/main';\n\nParsley.addMessages('en', {\n  defaultMessage: \"This value seems to be invalid.\",\n  type: {\n    email:        \"This value should be a valid email.\",\n    url:          \"This value should be a valid url.\",\n    number:       \"This value should be a valid number.\",\n    integer:      \"This value should be a valid integer.\",\n    digits:       \"This value should be digits.\",\n    alphanum:     \"This value should be alphanumeric.\"\n  },\n  notblank:       \"This value should not be blank.\",\n  required:       \"This value is required.\",\n  pattern:        \"This value seems to be invalid.\",\n  min:            \"This value should be greater than or equal to %s.\",\n  max:            \"This value should be lower than or equal to %s.\",\n  range:          \"This value should be between %s and %s.\",\n  minlength:      \"This value is too short. It should have %s characters or more.\",\n  maxlength:      \"This value is too long. It should have %s characters or fewer.\",\n  length:         \"This value length is invalid. It should be between %s and %s characters long.\",\n  mincheck:       \"You must select at least %s choices.\",\n  maxcheck:       \"You must select %s choices or fewer.\",\n  check:          \"You must select between %s and %s choices.\",\n  equalto:        \"This value should be the same.\",\n  euvatin:        \"It's not a valid VAT Identification Number.\",\n});\n\nParsley.setLocale('en');\n","/**\n * inputevent - Alleviate browser bugs for input events\n * https://github.com/marcandre/inputevent\n * @version v0.0.3 - (built Thu, Apr 14th 2016, 5:58 pm)\n * @author Marc-Andre Lafortune <github@marc-andre.ca>\n * @license MIT\n */\n\nimport $ from 'jquery';\n\nfunction InputEvent() {\n  let globals = window || global;\n\n  // Slightly odd way construct our object. This way methods are force bound.\n  // Used to test for duplicate library.\n  Object.assign(this, {\n\n    // For browsers that do not support isTrusted, assumes event is native.\n    isNativeEvent: evt => {\n      return evt.originalEvent && evt.originalEvent.isTrusted !== false;\n    },\n\n    fakeInputEvent: evt => {\n      if (this.isNativeEvent(evt)) {\n        $(evt.target).trigger('input');\n      }\n    },\n\n    misbehaves: evt => {\n      if (this.isNativeEvent(evt)) {\n        this.behavesOk(evt);\n        $(document)\n          .on('change.inputevent', evt.data.selector, this.fakeInputEvent);\n        this.fakeInputEvent(evt);\n      }\n    },\n\n    behavesOk: evt => {\n      if (this.isNativeEvent(evt)) {\n        $(document) // Simply unbinds the testing handler\n          .off('input.inputevent', evt.data.selector, this.behavesOk)\n          .off('change.inputevent', evt.data.selector, this.misbehaves);\n      }\n    },\n\n    // Bind the testing handlers\n    install: () => {\n      if (globals.inputEventPatched) {\n        return;\n      }\n      globals.inputEventPatched = '0.0.3';\n      for (let selector of ['select', 'input[type=\"checkbox\"]', 'input[type=\"radio\"]', 'input[type=\"file\"]']) {\n        $(document)\n          .on('input.inputevent', selector, {selector}, this.behavesOk)\n          .on('change.inputevent', selector, {selector}, this.misbehaves);\n      }\n    },\n\n    uninstall: () => {\n      delete globals.inputEventPatched;\n      $(document).off('.inputevent');\n    }\n\n  });\n};\n\nexport default new InputEvent();\n","import $ from 'jquery';\nimport Parsley from './parsley/main';\nimport './parsley/pubsub';\nimport './parsley/remote';\nimport './i18n/en';\nimport inputevent from './vendor/inputevent';\n\ninputevent.install();\n\nexport default Parsley;\n"],"names":["globalID","pastWarnings","Utils","attr","element","namespace","obj","i","attribute","attributes","regex","RegExp","hasOwnProperty","length","specified","test","name","camelize","slice","deserializeValue","value","checkAttr","hasAttribute","setAttr","setAttribute","dasherize","String","getType","getAttribute","generateID","num","isNaN","Number","JSON","parse","e","str","replace","match","chr","toUpperCase","toLowerCase","warn","window","console","arguments","warnOnce","msg","_resetWarnings","trimString","string","date","parsed","map","x","parseInt","_","year","month","day","Date","getFullYear","getMonth","getDate","integer","number","parseFloat","_boolean","object","regexp","flags","parseRequirement","requirementType","converter","converted","namespaceEvents","events","split","$","evt","join","difference","array","remove","result","each","elem","indexOf","push","all","promises","when","objectCreate","Object","create","prototype","Error","TypeError","_SubmitSelector","Defaults","inputs","excluded","priorityEnabled","multiple","group","uiEnabled","validationThreshold","focus","trigger","triggerAfterFailure","errorClass","successClass","classHandler","Field","errorsContainer","errorsWrapper","errorTemplate","Base","__id__","asyncSupport","_pipeAccordingToValidationResult","pipe","r","Deferred","validationResult","reject","resolve","promise","actualizeOptions","options","domOptions","parent","_resetOptions","initOptions","_listeners","on","fn","queue","subscribe","listenTo","off","splice","unsubscribe","unsubscribeTo","target","extraArg","call","asyncIsValid","force","whenValid","_findRelated","querySelectorAll","$element","convertArrayRequirement","m","values","convertExtraOptionRequirement","requirementSpec","extraOptionReader","main","extra","key","Validator","spec","extend","validate","requirementFirstArg","Array","isArray","validateMultiple","instance","validateDate","_isDateInput","validateNumber","validateString","parseRequirements","requirements","type","isPlainObject","priority","ValidatorRegistry","validators","catalog","__class__","locale","init","typeTesters","email","digits","alphanum","url","range","decimalPlaces","Math","max","parseArguments","args","operatorToValidator","operator","requirementsAndInput","pop","comparisonOperator","addValidator","Parsley","setLocale","addCatalog","messages","set","addMessage","message","addMessages","nameMessageObject","arg1","arg2","_setValidator","hasValidator","updateValidator","removeValidator","validator","getErrorMessage","constraint","typeMessages","formatMessage","defaultMessage","en","parameters","notblank","required","step","base","tester","nb","decimals","toInt","f","round","pow","pattern","minlength","requirement","maxlength","min","mincheck","maxcheck","check","equalto","refOrValue","$reference","val","euvatin","re","UI","diffResults","newResult","oldResult","deep","added","kept","found","j","assert","removed","Form","_actualizeTriggers","onSubmitValidate","onSubmitButton","_focusedField","fields","field","noFocus","_destroyUI","_reflowUI","_buildUI","_ui","diff","lastValidationResult","_manageStatusClass","_manageErrorsMessages","_failedOnce","getErrorsMessages","errorMessage","_getErrorMessage","addError","updateClass","_addError","_errorClass","updateError","_updateError","removeError","_removeError","hasConstraints","needsValidation","_successClass","_resetClass","errorsMessagesDisabled","_insertErrorWrapper","$errorsWrapper","find","append","addClass","$errorClassHandler","errorsWrapperId","html","removeAttr","removeClass","customConstraintErrorMessage","_manageClassHandler","validationInformationVisible","$handlerFunction","$handler","jQuery","_inputHolder","nodeName","$errorsContainer","after","$toBind","_validateIfNeeded","event","getValue","debounce","clearTimeout","_debounced","setTimeout","_resetUI","children","statusMapping","pending","resolved","rejected","parsley","submitSource","_submitSource","prop","_remoteCache","whenValidate","state","_trigger","stopImmediatePropagation","preventDefault","done","_submit","currentTarget","$synthetic","appendTo","Event","submitEvent","_refreshFields","_withoutReactualizingFormOptions","fail","always","isValid","refresh","reset","destroy","removeData","_bindFields","oldFields","fieldsMappedById","not","fieldInstance","Factory","uniqueId","oldActualizeOptions","eventName","Constraint","parsleyField","isDomConstraint","validatorSpec","_validatorRegistry","_parseRequirements","capitalize","cap","requirementList","parsleyFormInstance","constraints","constraintsByName","_bindConstraints","_isInGroup","_refreshed","_isRequired","validateIfEmpty","inArray","groupedConstraints","_getGroupedConstraints","_validateConstraint","_handleWhitespace","_refreshConstraints","refreshConstraints","addConstraint","removeConstraint","updateConstraint","undefined","_bindHtml5Constraints","trimValue","whitespace","c","index","p","sort","a","b","Multiple","addElement","$elements","fieldConstraints","has","data","filter","_init","savedparsleyFormInstance","__version__","is","bind","isMultiple","handleMultiple","parsleyMultipleInstance","input","$previouslyRelated","get","doNotStore","parsleyInstance","ParsleyExtend","vernums","jquery","forEach","document","version","psly","instances","ParsleyConfig","ParsleyUtils","registry","i18n","ParsleyValidator","method","ParsleyUI","doNotUpdateClass","autoBind","o","deprecated","adapt","context","parsleyAdaptedCallback","unshift","apply","eventPrefix","lastIndexOf","substr","listen","callback","unsubscribeAll","emit","instanceGiven","asyncValidators","xhr","status","reverse","addAsyncValidator","ajaxOptions","csr","encodeURIComponent","remoteOptions","param","ajax","handleXhr","then","InputEvent","globals","global","isNativeEvent","originalEvent","isTrusted","fakeInputEvent","misbehaves","behavesOk","selector","install","inputEventPatched","uninstall","inputevent"],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"parsley.js","sources":["../src/parsley/utils.js","../src/parsley/defaults.js","../src/parsley/base.js","../src/parsley/validator.js","../src/parsley/validator_registry.js","../src/parsley/ui.js","../src/parsley/form.js","../src/parsley/constraint.js","../src/parsley/field.js","../src/parsley/multiple.js","../src/parsley/factory.js","../src/parsley/main.js","../src/parsley/pubsub.js","../src/parsley/remote.js","../src/i18n/en.js","../src/vendor/inputevent.js","../src/parsley.js"],"sourcesContent":["import $ from 'jquery';\n\nvar globalID = 1;\nvar pastWarnings = {};\n\nvar Utils = {\n  // Parsley DOM-API\n  // returns object from dom attributes and values\n  attr: function (element, namespace, obj) {\n    var i;\n    var attribute;\n    var attributes;\n    var regex = new RegExp('^' + namespace, 'i');\n\n    if ('undefined' === typeof obj)\n      obj = {};\n    else {\n      // Clear all own properties. This won't affect prototype's values\n      for (i in obj) {\n        if (obj.hasOwnProperty(i))\n          delete obj[i];\n      }\n    }\n\n    if (!element)\n      return obj;\n\n    attributes = element.attributes;\n    for (i = attributes.length; i--; ) {\n      attribute = attributes[i];\n\n      if (attribute && attribute.specified && regex.test(attribute.name)) {\n        obj[this.camelize(attribute.name.slice(namespace.length))] = this.deserializeValue(attribute.value);\n      }\n    }\n\n    return obj;\n  },\n\n  checkAttr: function (element, namespace, checkAttr) {\n    return element.hasAttribute(namespace + checkAttr);\n  },\n\n  setAttr: function (element, namespace, attr, value) {\n    element.setAttribute(this.dasherize(namespace + attr), String(value));\n  },\n\n  getType: function(element) {\n    return element.getAttribute('type') || 'text';\n  },\n\n  generateID: function () {\n    return '' + globalID++;\n  },\n\n  /** Third party functions **/\n  deserializeValue: function (value) {\n    var num;\n\n    try {\n      return value ?\n        value == \"true\" ||\n        (value == \"false\" ? false :\n        value == \"null\" ? null :\n        !isNaN(num = Number(value)) ? num :\n        /^[\\[\\{]/.test(value) ? JSON.parse(value) :\n        value)\n        : value;\n    } catch (e) { return value; }\n  },\n\n  // Zepto camelize function\n  camelize: function (str) {\n    return str.replace(/-+(.)?/g, function (match, chr) {\n      return chr ? chr.toUpperCase() : '';\n    });\n  },\n\n  // Zepto dasherize function\n  dasherize: function (str) {\n    return str.replace(/::/g, '/')\n      .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')\n      .replace(/([a-z\\d])([A-Z])/g, '$1_$2')\n      .replace(/_/g, '-')\n      .toLowerCase();\n  },\n\n  warn: function () {\n    if (window.console && 'function' === typeof window.console.warn)\n      window.console.warn(...arguments);\n  },\n\n  warnOnce: function(msg) {\n    if (!pastWarnings[msg]) {\n      pastWarnings[msg] = true;\n      this.warn(...arguments);\n    }\n  },\n\n  _resetWarnings: function () {\n    pastWarnings = {};\n  },\n\n  trimString: function(string) {\n    return string.replace(/^\\s+|\\s+$/g, '');\n  },\n\n  parse: {\n    date: function(string) {\n      let parsed = string.match(/^(\\d{4,})-(\\d\\d)-(\\d\\d)$/);\n      if (!parsed)\n        return null;\n      let [_, year, month, day] = parsed.map(x => parseInt(x, 10));\n      let date = new Date(year, month - 1, day);\n      if (date.getFullYear() !== year || date.getMonth() + 1 !== month || date.getDate() !== day)\n        return null;\n      return date;\n    },\n    string: function(string) {\n      return string;\n    },\n    integer: function(string) {\n      if (isNaN(string))\n        return null;\n      return parseInt(string, 10);\n    },\n    number: function(string) {\n      if (isNaN(string))\n        throw null;\n      return parseFloat(string);\n    },\n    'boolean': function _boolean(string) {\n      return !(/^\\s*false\\s*$/i.test(string));\n    },\n    object: function(string) {\n      return Utils.deserializeValue(string);\n    },\n    regexp: function(regexp) {\n      var flags = '';\n\n      // Test if RegExp is literal, if not, nothing to be done, otherwise, we need to isolate flags and pattern\n      if (/^\\/.*\\/(?:[gimy]*)$/.test(regexp)) {\n        // Replace the regexp literal string with the first match group: ([gimy]*)\n        // If no flag is present, this will be a blank string\n        flags = regexp.replace(/.*\\/([gimy]*)$/, '$1');\n        // Again, replace the regexp literal string with the first match group:\n        // everything excluding the opening and closing slashes and the flags\n        regexp = regexp.replace(new RegExp('^/(.*?)/' + flags + '$'), '$1');\n      } else {\n        // Anchor regexp:\n        regexp = '^' + regexp + '$';\n      }\n      return new RegExp(regexp, flags);\n    }\n  },\n\n  parseRequirement: function(requirementType, string) {\n    var converter = this.parse[requirementType || 'string'];\n    if (!converter)\n      throw 'Unknown requirement specification: \"' + requirementType + '\"';\n    let converted = converter(string);\n    if (converted === null)\n      throw `Requirement is not a ${requirementType}: \"${string}\"`;\n    return converted;\n  },\n\n  namespaceEvents: function(events, namespace) {\n    events = this.trimString(events || '').split(/\\s+/);\n    if (!events[0])\n      return '';\n    return $.map(events, evt => `${evt}.${namespace}`).join(' ');\n  },\n\n  difference: function(array, remove) {\n    // This is O(N^2), should be optimized\n    let result = [];\n    $.each(array, (_, elem) => {\n      if (remove.indexOf(elem) == -1)\n        result.push(elem);\n    });\n    return result;\n  },\n\n  // Alter-ego to native Promise.all, but for jQuery\n  all: function(promises) {\n    // jQuery treats $.when() and $.when(singlePromise) differently; let's avoid that and add spurious elements\n    return $.when(...promises, 42, 42);\n  },\n\n  // Object.create polyfill, see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create#Polyfill\n  objectCreate: Object.create || (function () {\n    var Object = function () {};\n    return function (prototype) {\n      if (arguments.length > 1) {\n        throw Error('Second argument not supported');\n      }\n      if (typeof prototype != 'object') {\n        throw TypeError('Argument must be an object');\n      }\n      Object.prototype = prototype;\n      var result = new Object();\n      Object.prototype = null;\n      return result;\n    };\n  })(),\n\n  _SubmitSelector: 'input[type=\"submit\"], button:submit'\n};\n\nexport default Utils;\n","// All these options could be overriden and specified directly in DOM using\n// `data-parsley-` default DOM-API\n// eg: `inputs` can be set in DOM using `data-parsley-inputs=\"input, textarea\"`\n// eg: `data-parsley-stop-on-first-failing-constraint=\"false\"`\n\nvar Defaults = {\n  // ### General\n\n  // Default data-namespace for DOM API\n  namespace: 'data-parsley-',\n\n  // Supported inputs by default\n  inputs: 'input, textarea, select',\n\n  // Excluded inputs by default\n  excluded: 'input[type=button], input[type=submit], input[type=reset], input[type=hidden]',\n\n  // Stop validating field on highest priority failing constraint\n  priorityEnabled: true,\n\n  // ### Field only\n\n  // identifier used to group together inputs (e.g. radio buttons...)\n  multiple: null,\n\n  // identifier (or array of identifiers) used to validate only a select group of inputs\n  group: null,\n\n  // ### UI\n  // Enable\\Disable error messages\n  uiEnabled: true,\n\n  // Key events threshold before validation\n  validationThreshold: 3,\n\n  // Focused field on form validation error. 'first'|'last'|'none'\n  focus: 'first',\n\n  // event(s) that will trigger validation before first failure. eg: `input`...\n  trigger: false,\n\n  // event(s) that will trigger validation after first failure.\n  triggerAfterFailure: 'input',\n\n  // Class that would be added on every failing validation Parsley field\n  errorClass: 'parsley-error',\n\n  // Same for success validation\n  successClass: 'parsley-success',\n\n  // Return the `$element` that will receive these above success or error classes\n  // Could also be (and given directly from DOM) a valid selector like `'#div'`\n  classHandler: function (Field) {},\n\n  // Return the `$element` where errors will be appended\n  // Could also be (and given directly from DOM) a valid selector like `'#div'`\n  errorsContainer: function (Field) {},\n\n  // ul elem that would receive errors' list\n  errorsWrapper: '<ul class=\"parsley-errors-list\"></ul>',\n\n  // li elem that would receive error message\n  errorTemplate: '<li></li>'\n};\n\nexport default Defaults;\n","import $ from 'jquery';\nimport Utils from './utils';\n\nvar Base = function () {\n  this.__id__ = Utils.generateID();\n};\n\nBase.prototype = {\n  asyncSupport: true, // Deprecated\n\n  _pipeAccordingToValidationResult: function () {\n    var pipe = () => {\n      var r = $.Deferred();\n      if (true !== this.validationResult)\n        r.reject();\n      return r.resolve().promise();\n    };\n    return [pipe, pipe];\n  },\n\n  actualizeOptions: function () {\n    Utils.attr(this.element, this.options.namespace, this.domOptions);\n    if (this.parent && this.parent.actualizeOptions)\n      this.parent.actualizeOptions();\n    return this;\n  },\n\n  _resetOptions: function (initOptions) {\n    this.domOptions = Utils.objectCreate(this.parent.options);\n    this.options = Utils.objectCreate(this.domOptions);\n    // Shallow copy of ownProperties of initOptions:\n    for (var i in initOptions) {\n      if (initOptions.hasOwnProperty(i))\n        this.options[i] = initOptions[i];\n    }\n    this.actualizeOptions();\n  },\n\n  _listeners: null,\n\n  // Register a callback for the given event name\n  // Callback is called with context as the first argument and the `this`\n  // The context is the current parsley instance, or window.Parsley if global\n  // A return value of `false` will interrupt the calls\n  on: function (name, fn) {\n    this._listeners = this._listeners || {};\n    var queue = this._listeners[name] = this._listeners[name] || [];\n    queue.push(fn);\n\n    return this;\n  },\n\n  // Deprecated. Use `on` instead\n  subscribe: function(name, fn) {\n    $.listenTo(this, name.toLowerCase(), fn);\n  },\n\n  // Unregister a callback (or all if none is given) for the given event name\n  off: function (name, fn) {\n    var queue = this._listeners && this._listeners[name];\n    if (queue) {\n      if (!fn) {\n        delete this._listeners[name];\n      } else {\n        for (var i = queue.length; i--; )\n          if (queue[i] === fn)\n            queue.splice(i, 1);\n      }\n    }\n    return this;\n  },\n\n  // Deprecated. Use `off`\n  unsubscribe: function(name, fn) {\n    $.unsubscribeTo(this, name.toLowerCase());\n  },\n\n  // Trigger an event of the given name\n  // A return value of `false` interrupts the callback chain\n  // Returns false if execution was interrupted\n  trigger: function (name, target, extraArg) {\n    target = target || this;\n    var queue = this._listeners && this._listeners[name];\n    var result;\n    var parentResult;\n    if (queue) {\n      for (var i = queue.length; i--; ) {\n        result = queue[i].call(target, target, extraArg);\n        if (result === false) return result;\n      }\n    }\n    if (this.parent) {\n      return this.parent.trigger(name, target, extraArg);\n    }\n    return true;\n  },\n\n  asyncIsValid: function (group, force) {\n    Utils.warnOnce(\"asyncIsValid is deprecated; please use whenValid instead\");\n    return this.whenValid({group, force});\n  },\n\n  _findRelated: function () {\n    return this.options.multiple ?\n      $(this.parent.element.querySelectorAll(`[${this.options.namespace}multiple=\"${this.options.multiple}\"]`))\n    : this.$element;\n  }\n};\n\nexport default Base;\n","import $ from 'jquery';\nimport Utils from './utils';\n\nvar convertArrayRequirement = function(string, length) {\n  var m = string.match(/^\\s*\\[(.*)\\]\\s*$/);\n  if (!m)\n    throw 'Requirement is not an array: \"' + string + '\"';\n  var values = m[1].split(',').map(Utils.trimString);\n  if (values.length !== length)\n    throw 'Requirement has ' + values.length + ' values when ' + length + ' are needed';\n  return values;\n};\n\nvar convertExtraOptionRequirement = function(requirementSpec, string, extraOptionReader) {\n  var main = null;\n  var extra = {};\n  for (var key in requirementSpec) {\n    if (key) {\n      var value = extraOptionReader(key);\n      if ('string' === typeof value)\n        value = Utils.parseRequirement(requirementSpec[key], value);\n      extra[key] = value;\n    } else {\n      main = Utils.parseRequirement(requirementSpec[key], string);\n    }\n  }\n  return [main, extra];\n};\n\n// A Validator needs to implement the methods `validate` and `parseRequirements`\n\nvar Validator = function(spec) {\n  $.extend(true, this, spec);\n};\n\nValidator.prototype = {\n  // Returns `true` iff the given `value` is valid according the given requirements.\n  validate: function(value, requirementFirstArg) {\n    if (this.fn) { // Legacy style validator\n\n      if (arguments.length > 3)  // If more args then value, requirement, instance...\n        requirementFirstArg = [].slice.call(arguments, 1, -1);  // Skip first arg (value) and last (instance), combining the rest\n      return this.fn(value, requirementFirstArg);\n    }\n\n    if (Array.isArray(value)) {\n      if (!this.validateMultiple)\n        throw 'Validator `' + this.name + '` does not handle multiple values';\n      return this.validateMultiple(...arguments);\n    } else {\n      let instance = arguments[arguments.length - 1];\n      if (this.validateDate && instance._isDateInput()) {\n        arguments[0] = Utils.parse.date(arguments[0]);\n        if (arguments[0] === null)\n          return false;\n        return this.validateDate(...arguments);\n      }\n      if (this.validateNumber) {\n        if (!value) // Builtin validators all accept empty strings, except `required` of course\n          return true;\n        if (isNaN(value))\n          return false;\n        arguments[0] = parseFloat(arguments[0]);\n        return this.validateNumber(...arguments);\n      }\n      if (this.validateString) {\n        return this.validateString(...arguments);\n      }\n      throw 'Validator `' + this.name + '` only handles multiple values';\n    }\n  },\n\n  // Parses `requirements` into an array of arguments,\n  // according to `this.requirementType`\n  parseRequirements: function(requirements, extraOptionReader) {\n    if ('string' !== typeof requirements) {\n      // Assume requirement already parsed\n      // but make sure we return an array\n      return Array.isArray(requirements) ? requirements : [requirements];\n    }\n    var type = this.requirementType;\n    if (Array.isArray(type)) {\n      var values = convertArrayRequirement(requirements, type.length);\n      for (var i = 0; i < values.length; i++)\n        values[i] = Utils.parseRequirement(type[i], values[i]);\n      return values;\n    } else if ($.isPlainObject(type)) {\n      return convertExtraOptionRequirement(type, requirements, extraOptionReader);\n    } else {\n      return [Utils.parseRequirement(type, requirements)];\n    }\n  },\n  // Defaults:\n  requirementType: 'string',\n\n  priority: 2\n\n};\n\nexport default Validator;\n","import $ from 'jquery';\nimport Utils from './utils';\nimport Defaults from './defaults';\nimport Validator from './validator';\n\nvar ValidatorRegistry = function (validators, catalog) {\n  this.__class__ = 'ValidatorRegistry';\n\n  // Default Parsley locale is en\n  this.locale = 'en';\n\n  this.init(validators || {}, catalog || {});\n};\n\nvar typeTesters =  {\n  email: /^((([a-zA-Z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-zA-Z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-zA-Z]|\\d|-|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-zA-Z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-zA-Z]|\\d|-|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-zA-Z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))$/,\n\n  // Follow https://www.w3.org/TR/html5/infrastructure.html#floating-point-numbers\n  number: /^-?(\\d*\\.)?\\d+(e[-+]?\\d+)?$/i,\n\n  integer: /^-?\\d+$/,\n\n  digits: /^\\d+$/,\n\n  alphanum: /^\\w+$/i,\n\n  date: {\n    test: value => Utils.parse.date(value) !== null\n  },\n\n  url: new RegExp(\n      \"^\" +\n        // protocol identifier\n        \"(?:(?:https?|ftp)://)?\" + // ** mod: make scheme optional\n        // user:pass authentication\n        \"(?:\\\\S+(?::\\\\S*)?@)?\" +\n        \"(?:\" +\n          // IP address exclusion\n          // private & local networks\n          // \"(?!(?:10|127)(?:\\\\.\\\\d{1,3}){3})\" +   // ** mod: allow local networks\n          // \"(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})\" +  // ** mod: allow local networks\n          // \"(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})\" +  // ** mod: allow local networks\n          // IP address dotted notation octets\n          // excludes loopback network 0.0.0.0\n          // excludes reserved space >= 224.0.0.0\n          // excludes network & broacast addresses\n          // (first & last IP address of each class)\n          \"(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])\" +\n          \"(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}\" +\n          \"(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))\" +\n        \"|\" +\n          // host name\n          \"(?:(?:[a-zA-Z\\\\u00a1-\\\\uffff0-9]-*)*[a-zA-Z\\\\u00a1-\\\\uffff0-9]+)\" +\n          // domain name\n          \"(?:\\\\.(?:[a-zA-Z\\\\u00a1-\\\\uffff0-9]-*)*[a-zA-Z\\\\u00a1-\\\\uffff0-9]+)*\" +\n          // TLD identifier\n          \"(?:\\\\.(?:[a-zA-Z\\\\u00a1-\\\\uffff]{2,}))\" +\n        \")\" +\n        // port number\n        \"(?::\\\\d{2,5})?\" +\n        // resource path\n        \"(?:/\\\\S*)?\" +\n      \"$\"\n    )\n};\ntypeTesters.range = typeTesters.number;\n\n// See http://stackoverflow.com/a/10454560/8279\nvar decimalPlaces = num => {\n  var match = ('' + num).match(/(?:\\.(\\d+))?(?:[eE]([+-]?\\d+))?$/);\n  if (!match) { return 0; }\n  return Math.max(\n       0,\n       // Number of digits right of decimal point.\n       (match[1] ? match[1].length : 0) -\n       // Adjust for scientific notation.\n       (match[2] ? +match[2] : 0));\n};\n\n// parseArguments('number', ['1', '2']) => [1, 2]\nlet parseArguments = (type, args) => args.map(Utils.parse[type]);\n// operatorToValidator returns a validating function for an operator function, applied to the given type\nlet operatorToValidator = (type, operator) => {\n  return (value, ...requirementsAndInput) => {\n    requirementsAndInput.pop(); // Get rid of `input` argument\n    return operator(value, ...parseArguments(type, requirementsAndInput));\n  };\n};\n\nlet comparisonOperator = operator => ({\n  validateDate: operatorToValidator('date', operator),\n  validateNumber: operatorToValidator('number', operator),\n  requirementType: operator.length <= 2 ? 'string' : ['string', 'string'], // Support operators with a 1 or 2 requirement(s)\n  priority: 30\n});\n\nValidatorRegistry.prototype = {\n  init: function (validators, catalog) {\n    this.catalog = catalog;\n    // Copy prototype's validators:\n    this.validators = Object.assign({}, this.validators);\n\n    for (var name in validators)\n      this.addValidator(name, validators[name].fn, validators[name].priority);\n\n    window.Parsley.trigger('parsley:validator:init');\n  },\n\n  // Set new messages locale if we have dictionary loaded in ParsleyConfig.i18n\n  setLocale: function (locale) {\n    if ('undefined' === typeof this.catalog[locale])\n      throw new Error(locale + ' is not available in the catalog');\n\n    this.locale = locale;\n\n    return this;\n  },\n\n  // Add a new messages catalog for a given locale. Set locale for this catalog if set === `true`\n  addCatalog: function (locale, messages, set) {\n    if ('object' === typeof messages)\n      this.catalog[locale] = messages;\n\n    if (true === set)\n      return this.setLocale(locale);\n\n    return this;\n  },\n\n  // Add a specific message for a given constraint in a given locale\n  addMessage: function (locale, name, message) {\n    if ('undefined' === typeof this.catalog[locale])\n      this.catalog[locale] = {};\n\n    this.catalog[locale][name] = message;\n\n    return this;\n  },\n\n  // Add messages for a given locale\n  addMessages: function (locale, nameMessageObject) {\n    for (var name in nameMessageObject)\n      this.addMessage(locale, name, nameMessageObject[name]);\n\n    return this;\n  },\n\n  // Add a new validator\n  //\n  //    addValidator('custom', {\n  //        requirementType: ['integer', 'integer'],\n  //        validateString: function(value, from, to) {},\n  //        priority: 22,\n  //        messages: {\n  //          en: \"Hey, that's no good\",\n  //          fr: \"Aye aye, pas bon du tout\",\n  //        }\n  //    })\n  //\n  // Old API was addValidator(name, function, priority)\n  //\n  addValidator: function (name, arg1, arg2) {\n    if (this.validators[name])\n      Utils.warn('Validator \"' + name + '\" is already defined.');\n    else if (Defaults.hasOwnProperty(name)) {\n      Utils.warn('\"' + name + '\" is a restricted keyword and is not a valid validator name.');\n      return;\n    }\n    return this._setValidator(...arguments);\n  },\n\n  hasValidator: function (name) {\n    return !!this.validators[name];\n  },\n\n  updateValidator: function (name, arg1, arg2) {\n    if (!this.validators[name]) {\n      Utils.warn('Validator \"' + name + '\" is not already defined.');\n      return this.addValidator(...arguments);\n    }\n    return this._setValidator(...arguments);\n  },\n\n  removeValidator: function (name) {\n    if (!this.validators[name])\n      Utils.warn('Validator \"' + name + '\" is not defined.');\n\n    delete this.validators[name];\n\n    return this;\n  },\n\n  _setValidator: function (name, validator, priority) {\n    if ('object' !== typeof validator) {\n      // Old style validator, with `fn` and `priority`\n      validator = {\n        fn: validator,\n        priority: priority\n      };\n    }\n    if (!validator.validate) {\n      validator = new Validator(validator);\n    }\n    this.validators[name] = validator;\n\n    for (var locale in validator.messages || {})\n      this.addMessage(locale, name, validator.messages[locale]);\n\n    return this;\n  },\n\n  getErrorMessage: function (constraint) {\n    var message;\n\n    // Type constraints are a bit different, we have to match their requirements too to find right error message\n    if ('type' === constraint.name) {\n      var typeMessages = this.catalog[this.locale][constraint.name] || {};\n      message = typeMessages[constraint.requirements];\n    } else\n      message = this.formatMessage(this.catalog[this.locale][constraint.name], constraint.requirements);\n\n    return message || this.catalog[this.locale].defaultMessage || this.catalog.en.defaultMessage;\n  },\n\n  // Kind of light `sprintf()` implementation\n  formatMessage: function (string, parameters) {\n    if ('object' === typeof parameters) {\n      for (var i in parameters)\n        string = this.formatMessage(string, parameters[i]);\n\n      return string;\n    }\n\n    return 'string' === typeof string ? string.replace(/%s/i, parameters) : '';\n  },\n\n  // Here is the Parsley default validators list.\n  // A validator is an object with the following key values:\n  //  - priority: an integer\n  //  - requirement: 'string' (default), 'integer', 'number', 'regexp' or an Array of these\n  //  - validateString, validateMultiple, validateNumber: functions returning `true`, `false` or a promise\n  // Alternatively, a validator can be a function that returns such an object\n  //\n  validators: {\n    notblank: {\n      validateString: function(value) {\n        return /\\S/.test(value);\n      },\n      priority: 2\n    },\n    required: {\n      validateMultiple: function(values) {\n        return values.length > 0;\n      },\n      validateString: function(value) {\n        return /\\S/.test(value);\n      },\n      priority: 512\n    },\n    type: {\n      validateString: function(value, type, {step = 'any', base = 0} = {}) {\n        var tester = typeTesters[type];\n        if (!tester) {\n          throw new Error('validator type `' + type + '` is not supported');\n        }\n        if (!value)\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        if (!tester.test(value))\n          return false;\n        if ('number' === type) {\n          if (!/^any$/i.test(step || '')) {\n            var nb = Number(value);\n            var decimals = Math.max(decimalPlaces(step), decimalPlaces(base));\n            if (decimalPlaces(nb) > decimals) // Value can't have too many decimals\n              return false;\n            // Be careful of rounding errors by using integers.\n            var toInt = f => Math.round(f * Math.pow(10, decimals));\n            if ((toInt(nb) - toInt(base)) % toInt(step) != 0)\n              return false;\n          }\n        }\n        return true;\n      },\n      requirementType: {\n        '': 'string',\n        step: 'string',\n        base: 'number'\n      },\n      priority: 256\n    },\n    pattern: {\n      validateString: function(value, regexp) {\n        if (!value)\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        return regexp.test(value);\n      },\n      requirementType: 'regexp',\n      priority: 64\n    },\n    minlength: {\n      validateString: function (value, requirement) {\n        if (!value)\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        return value.length >= requirement;\n      },\n      requirementType: 'integer',\n      priority: 30\n    },\n    maxlength: {\n      validateString: function (value, requirement) {\n        return value.length <= requirement;\n      },\n      requirementType: 'integer',\n      priority: 30\n    },\n    length: {\n      validateString: function (value, min, max) {\n        if (!value)\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        return value.length >= min && value.length <= max;\n      },\n      requirementType: ['integer', 'integer'],\n      priority: 30\n    },\n    mincheck: {\n      validateMultiple: function (values, requirement) {\n        return values.length >= requirement;\n      },\n      requirementType: 'integer',\n      priority: 30\n    },\n    maxcheck: {\n      validateMultiple: function (values, requirement) {\n        return values.length <= requirement;\n      },\n      requirementType: 'integer',\n      priority: 30\n    },\n    check: {\n      validateMultiple: function (values, min, max) {\n        return values.length >= min && values.length <= max;\n      },\n      requirementType: ['integer', 'integer'],\n      priority: 30\n    },\n    min: comparisonOperator((value, requirement) => value >= requirement),\n    max: comparisonOperator((value, requirement) => value <= requirement),\n    range: comparisonOperator((value, min, max) => value >= min && value <= max),\n    equalto: {\n      validateString: function (value, refOrValue) {\n        if (!value)\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        var $reference = $(refOrValue);\n        if ($reference.length)\n          return value === $reference.val();\n        else\n          return value === refOrValue;\n      },\n      priority: 256\n    },\n    euvatin: {\n      validateString: function (value, refOrValue) {\n        if (!value) {\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        }\n\n        var re = /^[A-Z][A-Z][A-Za-z0-9 -]{2,}$/;\n        return re.test(value);\n      },\n      priority: 30,\n    },\n  }\n};\n\nexport default ValidatorRegistry;\n","import $ from 'jquery';\nimport Utils from './utils';\n\nvar UI = {};\n\nvar diffResults = function (newResult, oldResult, deep) {\n  var added = [];\n  var kept = [];\n\n  for (var i = 0; i < newResult.length; i++) {\n    var found = false;\n\n    for (var j = 0; j < oldResult.length; j++)\n      if (newResult[i].assert.name === oldResult[j].assert.name) {\n        found = true;\n        break;\n      }\n\n    if (found)\n      kept.push(newResult[i]);\n    else\n      added.push(newResult[i]);\n  }\n\n  return {\n    kept: kept,\n    added: added,\n    removed: !deep ? diffResults(oldResult, newResult, true).added : []\n  };\n};\n\nUI.Form = {\n\n  _actualizeTriggers: function () {\n    this.$element.on('submit.Parsley', evt => { this.onSubmitValidate(evt); });\n    this.$element.on('click.Parsley', Utils._SubmitSelector, evt => { this.onSubmitButton(evt); });\n\n    // UI could be disabled\n    if (false === this.options.uiEnabled)\n      return;\n\n    this.element.setAttribute('novalidate', '');\n  },\n\n  focus: function () {\n    this._focusedField = null;\n\n    if (true === this.validationResult || 'none' === this.options.focus)\n      return null;\n\n    for (var i = 0; i < this.fields.length; i++) {\n      var field = this.fields[i];\n      if (true !== field.validationResult && field.validationResult.length > 0 && 'undefined' === typeof field.options.noFocus) {\n        this._focusedField = field.$element;\n        if ('first' === this.options.focus)\n          break;\n      }\n    }\n\n    if (null === this._focusedField)\n      return null;\n\n    return this._focusedField.trigger('focus');\n  },\n\n  _destroyUI: function () {\n    // Reset all event listeners\n    this.$element.off('.Parsley');\n  }\n\n};\n\nUI.Field = {\n\n  _reflowUI: function () {\n    this._buildUI();\n\n    // If this field doesn't have an active UI don't bother doing something\n    if (!this._ui)\n      return;\n\n    // Diff between two validation results\n    var diff = diffResults(this.validationResult, this._ui.lastValidationResult);\n\n    // Then store current validation result for next reflow\n    this._ui.lastValidationResult = this.validationResult;\n\n    // Handle valid / invalid / none field class\n    this._manageStatusClass();\n\n    // Add, remove, updated errors messages\n    this._manageErrorsMessages(diff);\n\n    // Triggers impl\n    this._actualizeTriggers();\n\n    // If field is not valid for the first time, bind keyup trigger to ease UX and quickly inform user\n    if ((diff.kept.length || diff.added.length) && !this._failedOnce) {\n      this._failedOnce = true;\n      this._actualizeTriggers();\n    }\n  },\n\n  // Returns an array of field's error message(s)\n  getErrorsMessages: function () {\n    // No error message, field is valid\n    if (true === this.validationResult)\n      return [];\n\n    var messages = [];\n\n    for (var i = 0; i < this.validationResult.length; i++)\n      messages.push(this.validationResult[i].errorMessage ||\n       this._getErrorMessage(this.validationResult[i].assert));\n\n    return messages;\n  },\n\n  // It's a goal of Parsley that this method is no longer required [#1073]\n  addError: function (name, {message, assert, updateClass = true} = {}) {\n    this._buildUI();\n    this._addError(name, {message, assert});\n\n    if (updateClass)\n      this._errorClass();\n  },\n\n  // It's a goal of Parsley that this method is no longer required [#1073]\n  updateError: function (name, {message, assert, updateClass = true} = {}) {\n    this._buildUI();\n    this._updateError(name, {message, assert});\n\n    if (updateClass)\n      this._errorClass();\n  },\n\n  // It's a goal of Parsley that this method is no longer required [#1073]\n  removeError: function (name, {updateClass = true} = {}) {\n    this._buildUI();\n    this._removeError(name);\n\n    // edge case possible here: remove a standard Parsley error that is still failing in this.validationResult\n    // but highly improbable cuz' manually removing a well Parsley handled error makes no sense.\n    if (updateClass)\n      this._manageStatusClass();\n  },\n\n  _manageStatusClass: function () {\n    if (this.hasConstraints() && this.needsValidation() && true === this.validationResult)\n      this._successClass();\n    else if (this.validationResult.length > 0)\n      this._errorClass();\n    else\n      this._resetClass();\n  },\n\n  _manageErrorsMessages: function (diff) {\n    if ('undefined' !== typeof this.options.errorsMessagesDisabled)\n      return;\n\n    // Case where we have errorMessage option that configure an unique field error message, regardless failing validators\n    if ('undefined' !== typeof this.options.errorMessage) {\n      if ((diff.added.length || diff.kept.length)) {\n        this._insertErrorWrapper();\n\n        if (0 === this._ui.$errorsWrapper.find('.parsley-custom-error-message').length)\n          this._ui.$errorsWrapper\n            .append(\n              $(this.options.errorTemplate)\n              .addClass('parsley-custom-error-message')\n            );\n\n        this._ui.$errorClassHandler.attr('aria-describedby', this._ui.errorsWrapperId);\n\n        return this._ui.$errorsWrapper\n          .addClass('filled')\n          .attr('aria-hidden', 'false')\n          .find('.parsley-custom-error-message')\n          .html(this.options.errorMessage);\n      }\n\n      this._ui.$errorClassHandler.removeAttr('aria-describedby');\n\n      return this._ui.$errorsWrapper\n        .removeClass('filled')\n        .attr('aria-hidden', 'true')\n        .find('.parsley-custom-error-message')\n        .remove();\n    }\n\n    // Show, hide, update failing constraints messages\n    for (var i = 0; i < diff.removed.length; i++)\n      this._removeError(diff.removed[i].assert.name);\n\n    for (i = 0; i < diff.added.length; i++)\n      this._addError(diff.added[i].assert.name, {message: diff.added[i].errorMessage, assert: diff.added[i].assert});\n\n    for (i = 0; i < diff.kept.length; i++)\n      this._updateError(diff.kept[i].assert.name, {message: diff.kept[i].errorMessage, assert: diff.kept[i].assert});\n  },\n\n\n  _addError: function (name, {message, assert}) {\n    this._insertErrorWrapper();\n    this._ui.$errorClassHandler\n      .attr('aria-describedby', this._ui.errorsWrapperId);\n    this._ui.$errorsWrapper\n      .addClass('filled')\n      .attr('aria-hidden', 'false')\n      .append(\n        $(this.options.errorTemplate)\n        .addClass('parsley-' + name)\n        .html(message || this._getErrorMessage(assert))\n      );\n  },\n\n  _updateError: function (name, {message, assert}) {\n    this._ui.$errorsWrapper\n      .addClass('filled')\n      .find('.parsley-' + name)\n      .html(message || this._getErrorMessage(assert));\n  },\n\n  _removeError: function (name) {\n    this._ui.$errorClassHandler\n      .removeAttr('aria-describedby');\n    this._ui.$errorsWrapper\n      .removeClass('filled')\n      .attr('aria-hidden', 'true')\n      .find('.parsley-' + name)\n      .remove();\n  },\n\n  _getErrorMessage: function (constraint) {\n    var customConstraintErrorMessage = constraint.name + 'Message';\n\n    if ('undefined' !== typeof this.options[customConstraintErrorMessage])\n      return window.Parsley.formatMessage(this.options[customConstraintErrorMessage], constraint.requirements);\n\n    return window.Parsley.getErrorMessage(constraint);\n  },\n\n  _buildUI: function () {\n    // UI could be already built or disabled\n    if (this._ui || false === this.options.uiEnabled)\n      return;\n\n    var _ui = {};\n\n    // Give field its Parsley id in DOM\n    this.element.setAttribute(this.options.namespace + 'id', this.__id__);\n\n    /** Generate important UI elements and store them in this **/\n    // $errorClassHandler is the $element that woul have parsley-error and parsley-success classes\n    _ui.$errorClassHandler = this._manageClassHandler();\n\n    // $errorsWrapper is a div that would contain the various field errors, it will be appended into $errorsContainer\n    _ui.errorsWrapperId = 'parsley-id-' + (this.options.multiple ? 'multiple-' + this.options.multiple : this.__id__);\n    _ui.$errorsWrapper = $(this.options.errorsWrapper).attr('id', _ui.errorsWrapperId);\n\n    // ValidationResult UI storage to detect what have changed bwt two validations, and update DOM accordingly\n    _ui.lastValidationResult = [];\n    _ui.validationInformationVisible = false;\n\n    // Store it in this for later\n    this._ui = _ui;\n  },\n\n  // Determine which element will have `parsley-error` and `parsley-success` classes\n  _manageClassHandler: function () {\n    // Class handled could also be determined by function given in Parsley options\n    if ('string' === typeof this.options.classHandler && $(this.options.classHandler).length)\n      return $(this.options.classHandler);\n\n    // Class handled could also be determined by function given in Parsley options\n    var $handlerFunction = this.options.classHandler;\n\n    // It might also be the function name of a global function\n    if ('string' === typeof this.options.classHandler && 'function' === typeof window[this.options.classHandler])\n      $handlerFunction = window[this.options.classHandler];\n\n    if ('function' === typeof $handlerFunction) {\n      var $handler = $handlerFunction.call(this, this);\n\n      // If this function returned a valid existing DOM element, go for it\n      if ('undefined' !== typeof $handler && $handler.length)\n        return $handler;\n    } else if ('object' === typeof $handlerFunction && $handlerFunction instanceof jQuery && $handlerFunction.length) {\n      return $handlerFunction;\n    } else if ($handlerFunction) {\n      Utils.warn('The class handler `' + $handlerFunction + '` does not exist in DOM nor as a global JS function');\n    }\n\n    return this._inputHolder();\n  },\n\n  _inputHolder: function() {\n    // if simple element (input, texatrea, select...) it will perfectly host the classes and precede the error container\n    if (!this.options.multiple || this.element.nodeName === 'SELECT')\n      return this.$element;\n\n    // But if multiple element (radio, checkbox), that would be their parent\n    return this.$element.parent();\n  },\n\n  _insertErrorWrapper: function () {\n    var $errorsContainer = this.options.errorsContainer;\n\n    // Nothing to do if already inserted\n    if (0 !== this._ui.$errorsWrapper.parent().length)\n      return this._ui.$errorsWrapper.parent();\n\n    if ('string' === typeof $errorsContainer) {\n      if ($($errorsContainer).length)\n        return $($errorsContainer).append(this._ui.$errorsWrapper);\n      else if ('function' === typeof window[$errorsContainer])\n        $errorsContainer = window[$errorsContainer];\n      else\n        Utils.warn('The errors container `' + $errorsContainer + '` does not exist in DOM nor as a global JS function');\n    }\n\n    if ('function' === typeof $errorsContainer)\n      $errorsContainer = $errorsContainer.call(this, this);\n\n    if ('object' === typeof $errorsContainer && $errorsContainer.length)\n      return $errorsContainer.append(this._ui.$errorsWrapper);\n\n    return this._inputHolder().after(this._ui.$errorsWrapper);\n  },\n\n  _actualizeTriggers: function () {\n    var $toBind = this._findRelated();\n    var trigger;\n\n    // Remove Parsley events already bound on this field\n    $toBind.off('.Parsley');\n    if (this._failedOnce)\n      $toBind.on(Utils.namespaceEvents(this.options.triggerAfterFailure, 'Parsley'), () => {\n        this._validateIfNeeded();\n      });\n    else if (trigger = Utils.namespaceEvents(this.options.trigger, 'Parsley')) {\n      $toBind.on(trigger, event => {\n        this._validateIfNeeded(event);\n      });\n    }\n  },\n\n  _validateIfNeeded: function (event) {\n    // For keyup, keypress, keydown, input... events that could be a little bit obstrusive\n    // do not validate if val length < min threshold on first validation. Once field have been validated once and info\n    // about success or failure have been displayed, always validate with this trigger to reflect every yalidation change.\n    if (event && /key|input/.test(event.type))\n      if (!(this._ui && this._ui.validationInformationVisible) && this.getValue().length <= this.options.validationThreshold)\n        return;\n\n    if (this.options.debounce) {\n      window.clearTimeout(this._debounced);\n      this._debounced = window.setTimeout(() => this.validate(), this.options.debounce);\n    } else\n      this.validate();\n  },\n\n  _resetUI: function () {\n    // Reset all event listeners\n    this._failedOnce = false;\n    this._actualizeTriggers();\n\n    // Nothing to do if UI never initialized for this field\n    if ('undefined' === typeof this._ui)\n      return;\n\n    // Reset all errors' li\n    this._ui.$errorsWrapper\n      .removeClass('filled')\n      .children()\n      .remove();\n\n    // Reset validation class\n    this._resetClass();\n\n    // Reset validation flags and last validation result\n    this._ui.lastValidationResult = [];\n    this._ui.validationInformationVisible = false;\n  },\n\n  _destroyUI: function () {\n    this._resetUI();\n\n    if ('undefined' !== typeof this._ui)\n      this._ui.$errorsWrapper.remove();\n\n    delete this._ui;\n  },\n\n  _successClass: function () {\n    this._ui.validationInformationVisible = true;\n    this._ui.$errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass);\n  },\n  _errorClass: function () {\n    this._ui.validationInformationVisible = true;\n    this._ui.$errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass);\n  },\n  _resetClass: function () {\n    this._ui.$errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass);\n  }\n};\n\nexport default UI;\n","import $ from 'jquery';\nimport Base from './base';\nimport Utils from './utils';\n\nvar Form = function (element, domOptions, options) {\n  this.__class__ = 'Form';\n\n  this.element = element;\n  this.$element = $(element);\n  this.domOptions = domOptions;\n  this.options = options;\n  this.parent = window.Parsley;\n\n  this.fields = [];\n  this.validationResult = null;\n};\n\nvar statusMapping = {pending: null, resolved: true, rejected: false};\n\nForm.prototype = {\n  onSubmitValidate: function (event) {\n    // This is a Parsley generated submit event, do not validate, do not prevent, simply exit and keep normal behavior\n    if (true === event.parsley)\n      return;\n\n    // If we didn't come here through a submit button, use the first one in the form\n    var submitSource = this._submitSource || this.$element.find(Utils._SubmitSelector)[0];\n    this._submitSource = null;\n    this.$element.find('.parsley-synthetic-submit-button').prop('disabled', true);\n    if (submitSource && null !== submitSource.getAttribute('formnovalidate'))\n      return;\n\n    window.Parsley._remoteCache = {};\n\n    var promise = this.whenValidate({event});\n\n    if ('resolved' === promise.state() && false !== this._trigger('submit')) {\n      // All good, let event go through. We make this distinction because browsers\n      // differ in their handling of `submit` being called from inside a submit event [#1047]\n    } else {\n      // Rejected or pending: cancel this submit\n      event.stopImmediatePropagation();\n      event.preventDefault();\n      if ('pending' === promise.state())\n        promise.done(() => { this._submit(submitSource); });\n    }\n  },\n\n  onSubmitButton: function(event) {\n    this._submitSource = event.currentTarget;\n  },\n  // internal\n  // _submit submits the form, this time without going through the validations.\n  // Care must be taken to \"fake\" the actual submit button being clicked.\n  _submit: function (submitSource) {\n    if (false === this._trigger('submit'))\n      return;\n    // Add submit button's data\n    if (submitSource) {\n      var $synthetic = this.$element.find('.parsley-synthetic-submit-button').prop('disabled', false);\n      if (0 === $synthetic.length)\n        $synthetic = $('<input class=\"parsley-synthetic-submit-button\" type=\"hidden\">').appendTo(this.$element);\n      $synthetic.attr({\n        name: submitSource.getAttribute('name'),\n        value: submitSource.getAttribute('value')\n      });\n    }\n\n    this.$element.trigger(Object.assign($.Event('submit'), {parsley: true}));\n  },\n\n  // Performs validation on fields while triggering events.\n  // @returns `true` if all validations succeeds, `false`\n  // if a failure is immediately detected, or `null`\n  // if dependant on a promise.\n  // Consider using `whenValidate` instead.\n  validate: function (options) {\n    if (arguments.length >= 1 && !$.isPlainObject(options)) {\n      Utils.warnOnce('Calling validate on a parsley form without passing arguments as an object is deprecated.');\n      var [group, force, event] = arguments;\n      options = {group, force, event};\n    }\n    return statusMapping[ this.whenValidate(options).state() ];\n  },\n\n  whenValidate: function ({group, force, event} = {}) {\n    this.submitEvent = event;\n    if (event) {\n      this.submitEvent = Object.assign({}, event, {preventDefault: () => {\n        Utils.warnOnce(\"Using `this.submitEvent.preventDefault()` is deprecated; instead, call `this.validationResult = false`\");\n        this.validationResult = false;\n      }});\n    }\n    this.validationResult = true;\n\n    // fire validate event to eventually modify things before every validation\n    this._trigger('validate');\n\n    // Refresh form DOM options and form's fields that could have changed\n    this._refreshFields();\n\n    var promises = this._withoutReactualizingFormOptions(() => {\n      return $.map(this.fields, field => field.whenValidate({force, group}));\n    });\n\n    return Utils.all(promises)\n      .done(  () => { this._trigger('success'); })\n      .fail(  () => {\n        this.validationResult = false;\n        this.focus();\n        this._trigger('error');\n      })\n      .always(() => { this._trigger('validated'); })\n      .pipe(...this._pipeAccordingToValidationResult());\n  },\n\n  // Iterate over refreshed fields, and stop on first failure.\n  // Returns `true` if all fields are valid, `false` if a failure is detected\n  // or `null` if the result depends on an unresolved promise.\n  // Prefer using `whenValid` instead.\n  isValid: function (options) {\n    if (arguments.length >= 1 && !$.isPlainObject(options)) {\n      Utils.warnOnce('Calling isValid on a parsley form without passing arguments as an object is deprecated.');\n      var [group, force] = arguments;\n      options = {group, force};\n    }\n    return statusMapping[ this.whenValid(options).state() ];\n  },\n\n  // Iterate over refreshed fields and validate them.\n  // Returns a promise.\n  // A validation that immediately fails will interrupt the validations.\n  whenValid: function ({group, force} = {}) {\n    this._refreshFields();\n\n    var promises = this._withoutReactualizingFormOptions(() => {\n      return $.map(this.fields, field => field.whenValid({group, force}));\n    });\n    return Utils.all(promises);\n  },\n\n  refresh: function() {\n    this._refreshFields();\n    return this;\n  },\n\n  // Reset UI\n  reset: function () {\n    // Form case: emit a reset event for each field\n    for (var i = 0; i < this.fields.length; i++)\n      this.fields[i].reset();\n\n    this._trigger('reset');\n  },\n\n  // Destroy Parsley instance (+ UI)\n  destroy: function () {\n    // Field case: emit destroy event to clean UI and then destroy stored instance\n    this._destroyUI();\n\n    // Form case: destroy all its fields and then destroy stored instance\n    for (var i = 0; i < this.fields.length; i++)\n      this.fields[i].destroy();\n\n    this.$element.removeData('Parsley');\n    this._trigger('destroy');\n  },\n\n  _refreshFields: function () {\n    return this.actualizeOptions()._bindFields();\n  },\n\n  _bindFields: function () {\n    var oldFields = this.fields;\n\n    this.fields = [];\n    this.fieldsMappedById = {};\n\n    this._withoutReactualizingFormOptions(() => {\n      this.$element\n      .find(this.options.inputs)\n      .not(this.options.excluded)\n      .not(`[${this.options.namespace}excluded=true]`)\n      .each((_, element) => {\n        var fieldInstance = new window.Parsley.Factory(element, {}, this);\n\n        // Only add valid and not excluded `Field` and `FieldMultiple` children\n        if ('Field' === fieldInstance.__class__ || 'FieldMultiple' === fieldInstance.__class__) {\n          let uniqueId = fieldInstance.__class__ + '-' + fieldInstance.__id__;\n          if ('undefined' === typeof this.fieldsMappedById[uniqueId]) {\n            this.fieldsMappedById[uniqueId] = fieldInstance;\n            this.fields.push(fieldInstance);\n          }\n        }\n      });\n\n      $.each(Utils.difference(oldFields, this.fields), (_, field) => {\n        field.reset();\n      });\n    });\n    return this;\n  },\n\n  // Internal only.\n  // Looping on a form's fields to do validation or similar\n  // will trigger reactualizing options on all of them, which\n  // in turn will reactualize the form's options.\n  // To avoid calling actualizeOptions so many times on the form\n  // for nothing, _withoutReactualizingFormOptions temporarily disables\n  // the method actualizeOptions on this form while `fn` is called.\n  _withoutReactualizingFormOptions: function (fn) {\n    var oldActualizeOptions = this.actualizeOptions;\n    this.actualizeOptions = function () { return this; };\n    var result = fn();\n    this.actualizeOptions = oldActualizeOptions;\n    return result;\n  },\n\n  // Internal only.\n  // Shortcut to trigger an event\n  // Returns true iff event is not interrupted and default not prevented.\n  _trigger: function (eventName) {\n    return this.trigger('form:' + eventName);\n  }\n\n};\n\nexport default Form;\n","import Utils from './utils';\nimport Validator from './validator';\n\nconst Constraint = function(parsleyField, name, requirements, priority, isDomConstraint) {\n  const validatorSpec = window.Parsley._validatorRegistry.validators[name];\n  const validator = new Validator(validatorSpec);\n  priority = priority || parsleyField.options[name + 'Priority'] || validator.priority;\n  isDomConstraint = (true === isDomConstraint);\n\n  Object.assign(this, {\n    validator,\n    name,\n    requirements,\n    priority,\n    isDomConstraint\n  });\n  this._parseRequirements(parsleyField.options);\n};\n\nconst capitalize = function(str) {\n  const cap = str[0].toUpperCase();\n  return cap + str.slice(1);\n};\n\nConstraint.prototype = {\n  validate: function(value, instance) {\n    return this.validator.validate(value, ...this.requirementList, instance);\n  },\n\n  _parseRequirements: function(options) {\n    this.requirementList = this.validator.parseRequirements(this.requirements,\n      key => options[this.name + capitalize(key)]\n    );\n  }\n};\n\nexport default Constraint;\n","import $ from 'jquery';\nimport Constraint from './constraint';\nimport UI from './ui';\nimport Utils from './utils';\n\nvar Field = function (field, domOptions, options, parsleyFormInstance) {\n  this.__class__ = 'Field';\n\n  this.element = field;\n  this.$element = $(field);\n\n  // Set parent if we have one\n  if ('undefined' !== typeof parsleyFormInstance) {\n    this.parent = parsleyFormInstance;\n  }\n\n  this.options = options;\n  this.domOptions = domOptions;\n\n  // Initialize some properties\n  this.constraints = [];\n  this.constraintsByName = {};\n  this.validationResult = true;\n\n  // Bind constraints\n  this._bindConstraints();\n};\n\nvar statusMapping = {pending: null, resolved: true, rejected: false};\n\nField.prototype = {\n  // # Public API\n  // Validate field and trigger some events for mainly `UI`\n  // @returns `true`, an array of the validators that failed, or\n  // `null` if validation is not finished. Prefer using whenValidate\n  validate: function (options) {\n    if (arguments.length >= 1 && !$.isPlainObject(options)) {\n      Utils.warnOnce('Calling validate on a parsley field without passing arguments as an object is deprecated.');\n      options = {options};\n    }\n    var promise = this.whenValidate(options);\n    if (!promise)  // If excluded with `group` option\n      return true;\n    switch (promise.state()) {\n      case 'pending': return null;\n      case 'resolved': return true;\n      case 'rejected': return this.validationResult;\n    }\n  },\n\n  // Validate field and trigger some events for mainly `UI`\n  // @returns a promise that succeeds only when all validations do\n  // or `undefined` if field is not in the given `group`.\n  whenValidate: function ({force, group} =  {}) {\n    // do not validate a field if not the same as given validation group\n    this.refresh();\n    if (group && !this._isInGroup(group))\n      return;\n\n    this.value = this.getValue();\n\n    // Field Validate event. `this.value` could be altered for custom needs\n    this._trigger('validate');\n\n    return this.whenValid({force, value: this.value, _refreshed: true})\n      .always(() => { this._reflowUI(); })\n      .done(() =>   { this._trigger('success'); })\n      .fail(() =>   { this._trigger('error'); })\n      .always(() => { this._trigger('validated'); })\n      .pipe(...this._pipeAccordingToValidationResult());\n  },\n\n  hasConstraints: function () {\n    return 0 !== this.constraints.length;\n  },\n\n  // An empty optional field does not need validation\n  needsValidation: function (value) {\n    if ('undefined' === typeof value)\n      value = this.getValue();\n\n    // If a field is empty and not required, it is valid\n    // Except if `data-parsley-validate-if-empty` explicitely added, useful for some custom validators\n    if (!value.length && !this._isRequired() && 'undefined' === typeof this.options.validateIfEmpty)\n      return false;\n\n    return true;\n  },\n\n  _isInGroup: function (group) {\n    if (Array.isArray(this.options.group))\n      return -1 !== $.inArray(group, this.options.group);\n    return this.options.group === group;\n  },\n\n  // Just validate field. Do not trigger any event.\n  // Returns `true` iff all constraints pass, `false` if there are failures,\n  // or `null` if the result can not be determined yet (depends on a promise)\n  // See also `whenValid`.\n  isValid: function (options) {\n    if (arguments.length >= 1 && !$.isPlainObject(options)) {\n      Utils.warnOnce('Calling isValid on a parsley field without passing arguments as an object is deprecated.');\n      var [force, value] = arguments;\n      options = {force, value};\n    }\n    var promise = this.whenValid(options);\n    if (!promise) // Excluded via `group`\n      return true;\n    return statusMapping[promise.state()];\n  },\n\n  // Just validate field. Do not trigger any event.\n  // @returns a promise that succeeds only when all validations do\n  // or `undefined` if the field is not in the given `group`.\n  // The argument `force` will force validation of empty fields.\n  // If a `value` is given, it will be validated instead of the value of the input.\n  whenValid: function ({force = false, value, group, _refreshed} = {}) {\n    // Recompute options and rebind constraints to have latest changes\n    if (!_refreshed)\n      this.refresh();\n    // do not validate a field if not the same as given validation group\n    if (group && !this._isInGroup(group))\n      return;\n\n    this.validationResult = true;\n\n    // A field without constraint is valid\n    if (!this.hasConstraints())\n      return $.when();\n\n    // Value could be passed as argument, needed to add more power to 'field:validate'\n    if ('undefined' === typeof value || null === value)\n      value = this.getValue();\n\n    if (!this.needsValidation(value) && true !== force)\n      return $.when();\n\n    var groupedConstraints = this._getGroupedConstraints();\n    var promises = [];\n    $.each(groupedConstraints, (_, constraints) => {\n      // Process one group of constraints at a time, we validate the constraints\n      // and combine the promises together.\n      var promise = Utils.all(\n        $.map(constraints, constraint => this._validateConstraint(value, constraint))\n      );\n      promises.push(promise);\n      if (promise.state() === 'rejected')\n        return false; // Interrupt processing if a group has already failed\n    });\n    return Utils.all(promises);\n  },\n\n  // @returns a promise\n  _validateConstraint: function(value, constraint) {\n    var result = constraint.validate(value, this);\n    // Map false to a failed promise\n    if (false === result)\n      result = $.Deferred().reject();\n    // Make sure we return a promise and that we record failures\n    return Utils.all([result]).fail(errorMessage => {\n      if (!(this.validationResult instanceof Array))\n        this.validationResult = [];\n      this.validationResult.push({\n        assert: constraint,\n        errorMessage: 'string' === typeof errorMessage && errorMessage\n      });\n    });\n  },\n\n  // @returns Parsley field computed value that could be overrided or configured in DOM\n  getValue: function () {\n    var value;\n\n    // Value could be overriden in DOM or with explicit options\n    if ('function' === typeof this.options.value)\n      value = this.options.value(this);\n    else if ('undefined' !== typeof this.options.value)\n      value = this.options.value;\n    else\n      value = this.$element.val();\n\n    // Handle wrong DOM or configurations\n    if ('undefined' === typeof value || null === value)\n      return '';\n\n    return this._handleWhitespace(value);\n  },\n\n  // Reset UI\n  reset: function () {\n    this._resetUI();\n    return this._trigger('reset');\n  },\n\n  // Destroy Parsley instance (+ UI)\n  destroy: function () {\n    // Field case: emit destroy event to clean UI and then destroy stored instance\n    this._destroyUI();\n    this.$element.removeData('Parsley');\n    this.$element.removeData('FieldMultiple');\n    this._trigger('destroy');\n  },\n\n  // Actualize options and rebind constraints\n  refresh: function () {\n    this._refreshConstraints();\n    return this;\n  },\n\n  _refreshConstraints: function () {\n    return this.actualizeOptions()._bindConstraints();\n  },\n\n  refreshConstraints: function() {\n    Utils.warnOnce(\"Parsley's refreshConstraints is deprecated. Please use refresh\");\n    return this.refresh();\n  },\n\n  /**\n  * Add a new constraint to a field\n  *\n  * @param {String}   name\n  * @param {Mixed}    requirements      optional\n  * @param {Number}   priority          optional\n  * @param {Boolean}  isDomConstraint   optional\n  */\n  addConstraint: function (name, requirements, priority, isDomConstraint) {\n\n    if (window.Parsley._validatorRegistry.validators[name]) {\n      var constraint = new Constraint(this, name, requirements, priority, isDomConstraint);\n\n      // if constraint already exist, delete it and push new version\n      if ('undefined' !== this.constraintsByName[constraint.name])\n        this.removeConstraint(constraint.name);\n\n      this.constraints.push(constraint);\n      this.constraintsByName[constraint.name] = constraint;\n    }\n\n    return this;\n  },\n\n  // Remove a constraint\n  removeConstraint: function (name) {\n    for (var i = 0; i < this.constraints.length; i++)\n      if (name === this.constraints[i].name) {\n        this.constraints.splice(i, 1);\n        break;\n      }\n    delete this.constraintsByName[name];\n    return this;\n  },\n\n  // Update a constraint (Remove + re-add)\n  updateConstraint: function (name, parameters, priority) {\n    return this.removeConstraint(name)\n      .addConstraint(name, parameters, priority);\n  },\n\n  // # Internals\n\n  // Internal only.\n  // Bind constraints from config + options + DOM\n  _bindConstraints: function () {\n    var constraints = [];\n    var constraintsByName = {};\n\n    // clean all existing DOM constraints to only keep javascript user constraints\n    for (var i = 0; i < this.constraints.length; i++)\n      if (false === this.constraints[i].isDomConstraint) {\n        constraints.push(this.constraints[i]);\n        constraintsByName[this.constraints[i].name] = this.constraints[i];\n      }\n\n    this.constraints = constraints;\n    this.constraintsByName = constraintsByName;\n\n    // then re-add Parsley DOM-API constraints\n    for (var name in this.options)\n      this.addConstraint(name, this.options[name], undefined, true);\n\n    // finally, bind special HTML5 constraints\n    return this._bindHtml5Constraints();\n  },\n\n  // Internal only.\n  // Bind specific HTML5 constraints to be HTML5 compliant\n  _bindHtml5Constraints: function () {\n    // html5 required\n    if (null !== this.element.getAttribute('required'))\n      this.addConstraint('required', true, undefined, true);\n\n    // html5 pattern\n    if (null !== this.element.getAttribute('pattern'))\n      this.addConstraint('pattern', this.element.getAttribute('pattern'), undefined, true);\n\n    // range\n    let min = this.element.getAttribute('min');\n    let max = this.element.getAttribute('max');\n    if (null !== min && null !== max)\n      this.addConstraint('range', [min, max], undefined, true);\n\n    // HTML5 min\n    else if (null !== min)\n      this.addConstraint('min', min, undefined, true);\n\n    // HTML5 max\n    else if (null !== max)\n      this.addConstraint('max', max, undefined, true);\n\n\n    // length\n    if (null !== this.element.getAttribute('minlength') && null !== this.element.getAttribute('maxlength'))\n      this.addConstraint('length', [this.element.getAttribute('minlength'), this.element.getAttribute('maxlength')], undefined, true);\n\n    // HTML5 minlength\n    else if (null !== this.element.getAttribute('minlength'))\n      this.addConstraint('minlength', this.element.getAttribute('minlength'), undefined, true);\n\n    // HTML5 maxlength\n    else if (null !== this.element.getAttribute('maxlength'))\n      this.addConstraint('maxlength', this.element.getAttribute('maxlength'), undefined, true);\n\n\n    // html5 types\n    var type = Utils.getType(this.element);\n\n    // Small special case here for HTML5 number: integer validator if step attribute is undefined or an integer value, number otherwise\n    if ('number' === type) {\n      return this.addConstraint('type', ['number', {\n        step: this.element.getAttribute('step') || '1',\n        base: min || this.element.getAttribute('value')\n      }], undefined, true);\n    // Regular other HTML5 supported types\n    } else if (/^(email|url|range|date)$/i.test(type)) {\n      return this.addConstraint('type', type, undefined, true);\n    }\n    return this;\n  },\n\n  // Internal only.\n  // Field is required if have required constraint without `false` value\n  _isRequired: function () {\n    if ('undefined' === typeof this.constraintsByName.required)\n      return false;\n\n    return false !== this.constraintsByName.required.requirements;\n  },\n\n  // Internal only.\n  // Shortcut to trigger an event\n  _trigger: function (eventName) {\n    return this.trigger('field:' + eventName);\n  },\n\n  // Internal only\n  // Handles whitespace in a value\n  // Use `data-parsley-whitespace=\"squish\"` to auto squish input value\n  // Use `data-parsley-whitespace=\"trim\"` to auto trim input value\n  _handleWhitespace: function (value) {\n    if (true === this.options.trimValue)\n      Utils.warnOnce('data-parsley-trim-value=\"true\" is deprecated, please use data-parsley-whitespace=\"trim\"');\n\n    if ('squish' === this.options.whitespace)\n      value = value.replace(/\\s{2,}/g, ' ');\n\n    if (('trim' === this.options.whitespace) || ('squish' === this.options.whitespace) || (true === this.options.trimValue))\n      value = Utils.trimString(value);\n\n    return value;\n  },\n\n  _isDateInput: function() {\n    var c = this.constraintsByName.type;\n    return c && c.requirements === 'date';\n  },\n\n  // Internal only.\n  // Returns the constraints, grouped by descending priority.\n  // The result is thus an array of arrays of constraints.\n  _getGroupedConstraints: function () {\n    if (false === this.options.priorityEnabled)\n      return [this.constraints];\n\n    var groupedConstraints = [];\n    var index = {};\n\n    // Create array unique of priorities\n    for (var i = 0; i < this.constraints.length; i++) {\n      var p = this.constraints[i].priority;\n      if (!index[p])\n        groupedConstraints.push(index[p] = []);\n      index[p].push(this.constraints[i]);\n    }\n    // Sort them by priority DESC\n    groupedConstraints.sort(function (a, b) { return b[0].priority - a[0].priority; });\n\n    return groupedConstraints;\n  }\n\n};\n\nexport default Field;\n","import $ from 'jquery';\nimport Utils from './utils';\n\nvar Multiple = function () {\n  this.__class__ = 'FieldMultiple';\n};\n\nMultiple.prototype = {\n  // Add new `$element` sibling for multiple field\n  addElement: function ($element) {\n    this.$elements.push($element);\n\n    return this;\n  },\n\n  // See `Field._refreshConstraints()`\n  _refreshConstraints: function () {\n    var fieldConstraints;\n\n    this.constraints = [];\n\n    // Select multiple special treatment\n    if (this.element.nodeName === 'SELECT') {\n      this.actualizeOptions()._bindConstraints();\n\n      return this;\n    }\n\n    // Gather all constraints for each input in the multiple group\n    for (var i = 0; i < this.$elements.length; i++) {\n\n      // Check if element have not been dynamically removed since last binding\n      if (!$('html').has(this.$elements[i]).length) {\n        this.$elements.splice(i, 1);\n        continue;\n      }\n\n      fieldConstraints = this.$elements[i].data('FieldMultiple')._refreshConstraints().constraints;\n\n      for (var j = 0; j < fieldConstraints.length; j++)\n        this.addConstraint(fieldConstraints[j].name, fieldConstraints[j].requirements, fieldConstraints[j].priority, fieldConstraints[j].isDomConstraint);\n    }\n\n    return this;\n  },\n\n  // See `Field.getValue()`\n  getValue: function () {\n    // Value could be overriden in DOM\n    if ('function' === typeof this.options.value)\n      return this.options.value(this);\n    else if ('undefined' !== typeof this.options.value)\n      return this.options.value;\n\n    // Radio input case\n    if (this.element.nodeName === 'INPUT') {\n      var type = Utils.getType(this.element);\n      if (type === 'radio')\n        return this._findRelated().filter(':checked').val() || '';\n\n      // checkbox input case\n      if (type === 'checkbox') {\n        var values = [];\n\n        this._findRelated().filter(':checked').each(function () {\n          values.push($(this).val());\n        });\n\n        return values;\n      }\n    }\n\n    // Select multiple case\n    if (this.element.nodeName === 'SELECT' && null === this.$element.val())\n      return [];\n\n    // Default case that should never happen\n    return this.$element.val();\n  },\n\n  _init: function () {\n    this.$elements = [this.$element];\n\n    return this;\n  }\n};\n\nexport default Multiple;\n","import $ from 'jquery';\nimport Utils from './utils';\nimport Base from './base';\nimport Form from './form';\nimport Field from './field';\nimport Multiple from './multiple';\n\nvar Factory = function (element, options, parsleyFormInstance) {\n  this.element = element;\n  this.$element = $(element);\n\n  // If the element has already been bound, returns its saved Parsley instance\n  var savedparsleyFormInstance = this.$element.data('Parsley');\n  if (savedparsleyFormInstance) {\n\n    // If the saved instance has been bound without a Form parent and there is one given in this call, add it\n    if ('undefined' !== typeof parsleyFormInstance && savedparsleyFormInstance.parent === window.Parsley) {\n      savedparsleyFormInstance.parent = parsleyFormInstance;\n      savedparsleyFormInstance._resetOptions(savedparsleyFormInstance.options);\n    }\n\n    if ('object' === typeof options) {\n      Object.assign(savedparsleyFormInstance.options, options);\n    }\n\n    return savedparsleyFormInstance;\n  }\n\n  // Parsley must be instantiated with a DOM element or jQuery $element\n  if (!this.$element.length)\n    throw new Error('You must bind Parsley on an existing element.');\n\n  if ('undefined' !== typeof parsleyFormInstance && 'Form' !== parsleyFormInstance.__class__)\n    throw new Error('Parent instance must be a Form instance');\n\n  this.parent = parsleyFormInstance || window.Parsley;\n  return this.init(options);\n};\n\nFactory.prototype = {\n  init: function (options) {\n    this.__class__ = 'Parsley';\n    this.__version__ = 'VERSION';\n    this.__id__ = Utils.generateID();\n\n    // Pre-compute options\n    this._resetOptions(options);\n\n    // A Form instance is obviously a `<form>` element but also every node that is not an input and has the `data-parsley-validate` attribute\n    if (this.element.nodeName === 'FORM' || (Utils.checkAttr(this.element, this.options.namespace, 'validate') && !this.$element.is(this.options.inputs)))\n      return this.bind('parsleyForm');\n\n    // Every other element is bound as a `Field` or `FieldMultiple`\n    return this.isMultiple() ? this.handleMultiple() : this.bind('parsleyField');\n  },\n\n  isMultiple: function () {\n    var type = Utils.getType(this.element);\n    return ((type === 'radio' || type === 'checkbox') ||\n      (this.element.nodeName === 'SELECT' && null !== this.element.getAttribute('multiple')));\n  },\n\n  // Multiples fields are a real nightmare :(\n  // Maybe some refactoring would be appreciated here...\n  handleMultiple: function () {\n    var name;\n    var multiple;\n    var parsleyMultipleInstance;\n\n    // Handle multiple name\n    this.options.multiple = this.options.multiple ||\n      (name = this.element.getAttribute('name')) ||\n      this.element.getAttribute('id');\n\n    // Special select multiple input\n    if (this.element.nodeName === 'SELECT' && null !== this.element.getAttribute('multiple')) {\n      this.options.multiple = this.options.multiple || this.__id__;\n      return this.bind('parsleyFieldMultiple');\n\n    // Else for radio / checkboxes, we need a `name` or `data-parsley-multiple` to properly bind it\n    } else if (!this.options.multiple) {\n      Utils.warn('To be bound by Parsley, a radio, a checkbox and a multiple select input must have either a name or a multiple option.', this.$element);\n      return this;\n    }\n\n    // Remove special chars\n    this.options.multiple = this.options.multiple.replace(/(:|\\.|\\[|\\]|\\{|\\}|\\$)/g, '');\n\n    // Add proper `data-parsley-multiple` to siblings if we have a valid multiple name\n    if (name) {\n      $('input[name=\"' + name + '\"]').each((i, input) => {\n        var type = Utils.getType(input);\n        if ((type === 'radio' || type === 'checkbox'))\n          input.setAttribute(this.options.namespace + 'multiple', this.options.multiple);\n      });\n    }\n\n    // Check here if we don't already have a related multiple instance saved\n    var $previouslyRelated = this._findRelated();\n    for (var i = 0; i < $previouslyRelated.length; i++) {\n      parsleyMultipleInstance = $($previouslyRelated.get(i)).data('Parsley');\n      if ('undefined' !== typeof parsleyMultipleInstance) {\n\n        if (!this.$element.data('FieldMultiple')) {\n          parsleyMultipleInstance.addElement(this.$element);\n        }\n\n        break;\n      }\n    }\n\n    // Create a secret Field instance for every multiple field. It will be stored in `data('FieldMultiple')`\n    // And will be useful later to access classic `Field` stuff while being in a `FieldMultiple` instance\n    this.bind('parsleyField', true);\n\n    return parsleyMultipleInstance || this.bind('parsleyFieldMultiple');\n  },\n\n  // Return proper `Form`, `Field` or `FieldMultiple`\n  bind: function (type, doNotStore) {\n    var parsleyInstance;\n\n    switch (type) {\n      case 'parsleyForm':\n        parsleyInstance = $.extend(\n          new Form(this.element, this.domOptions, this.options),\n          new Base(),\n          window.ParsleyExtend\n        )._bindFields();\n        break;\n      case 'parsleyField':\n        parsleyInstance = $.extend(\n          new Field(this.element, this.domOptions, this.options, this.parent),\n          new Base(),\n          window.ParsleyExtend\n        );\n        break;\n      case 'parsleyFieldMultiple':\n        parsleyInstance = $.extend(\n          new Field(this.element, this.domOptions, this.options, this.parent),\n          new Multiple(),\n          new Base(),\n          window.ParsleyExtend\n        )._init();\n        break;\n      default:\n        throw new Error(type + 'is not a supported Parsley type');\n    }\n\n    if (this.options.multiple)\n      Utils.setAttr(this.element, this.options.namespace, 'multiple', this.options.multiple);\n\n    if ('undefined' !== typeof doNotStore) {\n      this.$element.data('FieldMultiple', parsleyInstance);\n\n      return parsleyInstance;\n    }\n\n    // Store the freshly bound instance in a DOM element for later access using jQuery `data()`\n    this.$element.data('Parsley', parsleyInstance);\n\n    // Tell the world we have a new Form or Field instance!\n    parsleyInstance._actualizeTriggers();\n    parsleyInstance._trigger('init');\n\n    return parsleyInstance;\n  }\n};\n\nexport default Factory;\n","import $ from 'jquery';\nimport Utils from './utils';\nimport Defaults from './defaults';\nimport Base from './base';\nimport ValidatorRegistry from './validator_registry';\nimport UI from './ui';\nimport Form from './form';\nimport Field from './field';\nimport Multiple from './multiple';\nimport Factory from './factory';\n\nvar vernums = $.fn.jquery.split('.');\nif (parseInt(vernums[0]) <= 1 && parseInt(vernums[1]) < 8) {\n  throw \"The loaded version of jQuery is too old. Please upgrade to 1.8.x or better.\";\n}\nif (!vernums.forEach) {\n  Utils.warn('Parsley requires ES5 to run properly. Please include https://github.com/es-shims/es5-shim');\n}\n// Inherit `on`, `off` & `trigger` to Parsley:\nvar Parsley = Object.assign(new Base(), {\n    element: document,\n    $element: $(document),\n    actualizeOptions: null,\n    _resetOptions: null,\n    Factory: Factory,\n    version: 'VERSION'\n  });\n\n// Supplement Field and Form with Base\n// This way, the constructors will have access to those methods\nObject.assign(Field.prototype, UI.Field, Base.prototype);\nObject.assign(Form.prototype, UI.Form, Base.prototype);\n// Inherit actualizeOptions and _resetOptions:\nObject.assign(Factory.prototype, Base.prototype);\n\n// ### jQuery API\n// `$('.elem').parsley(options)` or `$('.elem').psly(options)`\n$.fn.parsley = $.fn.psly = function (options) {\n  if (this.length > 1) {\n    var instances = [];\n\n    this.each(function () {\n      instances.push($(this).parsley(options));\n    });\n\n    return instances;\n  }\n\n  // Return undefined if applied to non existing DOM element\n  if (this.length == 0) {\n    return;\n  }\n\n  return new Factory(this[0], options);\n};\n\n// ### Field and Form extension\n// Ensure the extension is now defined if it wasn't previously\nif ('undefined' === typeof window.ParsleyExtend)\n  window.ParsleyExtend = {};\n\n// ### Parsley config\n// Inherit from ParsleyDefault, and copy over any existing values\nParsley.options = Object.assign(Utils.objectCreate(Defaults), window.ParsleyConfig);\nwindow.ParsleyConfig = Parsley.options; // Old way of accessing global options\n\n// ### Globals\nwindow.Parsley = window.psly = Parsley;\nParsley.Utils = Utils;\nwindow.ParsleyUtils = {};\n$.each(Utils, (key, value) => {\n  if ('function' === typeof value) {\n    window.ParsleyUtils[key] = (...args) => {\n      Utils.warnOnce('Accessing `window.ParsleyUtils` is deprecated. Use `window.Parsley.Utils` instead.');\n      return Utils[key](...args);\n    };\n  }\n});\n\n// ### Define methods that forward to the registry, and deprecate all access except through window.Parsley\nvar registry = window.Parsley._validatorRegistry = new ValidatorRegistry(window.ParsleyConfig.validators, window.ParsleyConfig.i18n);\nwindow.ParsleyValidator = {};\n$.each('setLocale addCatalog addMessage addMessages getErrorMessage formatMessage addValidator updateValidator removeValidator hasValidator'.split(' '), function (i, method) {\n  window.Parsley[method] = (...args) => registry[method](...args);\n  window.ParsleyValidator[method] = function () {\n    Utils.warnOnce(`Accessing the method '${method}' through Validator is deprecated. Simply call 'window.Parsley.${method}(...)'`);\n    return window.Parsley[method](...arguments);\n  };\n});\n\n// ### UI\n// Deprecated global object\nwindow.Parsley.UI = UI;\nwindow.ParsleyUI = {\n  removeError: function (instance, name, doNotUpdateClass) {\n    var updateClass = true !== doNotUpdateClass;\n    Utils.warnOnce(`Accessing UI is deprecated. Call 'removeError' on the instance directly. Please comment in issue 1073 as to your need to call this method.`);\n    return instance.removeError(name, {updateClass});\n  },\n  getErrorsMessages: function (instance) {\n    Utils.warnOnce(`Accessing UI is deprecated. Call 'getErrorsMessages' on the instance directly.`);\n    return instance.getErrorsMessages();\n  }\n};\n$.each('addError updateError'.split(' '), function (i, method) {\n  window.ParsleyUI[method] = function (instance, name, message, assert, doNotUpdateClass) {\n    var updateClass = true !== doNotUpdateClass;\n    Utils.warnOnce(`Accessing UI is deprecated. Call '${method}' on the instance directly. Please comment in issue 1073 as to your need to call this method.`);\n    return instance[method](name, {message, assert, updateClass});\n  };\n});\n\n// ### PARSLEY auto-binding\n// Prevent it by setting `ParsleyConfig.autoBind` to `false`\nif (false !== window.ParsleyConfig.autoBind) {\n  $(function () {\n    // Works only on `data-parsley-validate`.\n    if ($('[data-parsley-validate]').length)\n      $('[data-parsley-validate]').parsley();\n  });\n}\n\nexport default Parsley;\n","import $ from 'jquery';\nimport Field from './field';\nimport Form from './form';\nimport Utils from './utils';\n\nvar o = $({});\nvar deprecated = function () {\n  Utils.warnOnce(\"Parsley's pubsub module is deprecated; use the 'on' and 'off' methods on parsley instances or window.Parsley\");\n};\n\n// Returns an event handler that calls `fn` with the arguments it expects\nfunction adapt(fn, context) {\n  // Store to allow unbinding\n  if (!fn.parsleyAdaptedCallback) {\n    fn.parsleyAdaptedCallback = function () {\n      var args = Array.prototype.slice.call(arguments, 0);\n      args.unshift(this);\n      fn.apply(context || o, args);\n    };\n  }\n  return fn.parsleyAdaptedCallback;\n}\n\nvar eventPrefix = 'parsley:';\n// Converts 'parsley:form:validate' into 'form:validate'\nfunction eventName(name) {\n  if (name.lastIndexOf(eventPrefix, 0) === 0)\n    return name.substr(eventPrefix.length);\n  return name;\n}\n\n// $.listen is deprecated. Use Parsley.on instead.\n$.listen = function (name, callback) {\n  var context;\n  deprecated();\n  if ('object' === typeof arguments[1] && 'function' === typeof arguments[2]) {\n    context = arguments[1];\n    callback = arguments[2];\n  }\n\n  if ('function' !== typeof callback)\n    throw new Error('Wrong parameters');\n\n  window.Parsley.on(eventName(name), adapt(callback, context));\n};\n\n$.listenTo = function (instance, name, fn) {\n  deprecated();\n  if (!(instance instanceof Field) && !(instance instanceof Form))\n    throw new Error('Must give Parsley instance');\n\n  if ('string' !== typeof name || 'function' !== typeof fn)\n    throw new Error('Wrong parameters');\n\n  instance.on(eventName(name), adapt(fn));\n};\n\n$.unsubscribe = function (name, fn) {\n  deprecated();\n  if ('string' !== typeof name || 'function' !== typeof fn)\n    throw new Error('Wrong arguments');\n  window.Parsley.off(eventName(name), fn.parsleyAdaptedCallback);\n};\n\n$.unsubscribeTo = function (instance, name) {\n  deprecated();\n  if (!(instance instanceof Field) && !(instance instanceof Form))\n    throw new Error('Must give Parsley instance');\n  instance.off(eventName(name));\n};\n\n$.unsubscribeAll = function (name) {\n  deprecated();\n  window.Parsley.off(eventName(name));\n  $('form,input,textarea,select').each(function () {\n    var instance = $(this).data('Parsley');\n    if (instance) {\n      instance.off(eventName(name));\n    }\n  });\n};\n\n// $.emit is deprecated. Use jQuery events instead.\n$.emit = function (name, instance) {\n  deprecated();\n  var instanceGiven = (instance instanceof Field) || (instance instanceof Form);\n  var args = Array.prototype.slice.call(arguments, instanceGiven ? 2 : 1);\n  args.unshift(eventName(name));\n  if (!instanceGiven) {\n    instance = window.Parsley;\n  }\n  instance.trigger(...args);\n};\n\nexport default {};\n","import $ from 'jquery';\nimport Utils from './utils';\nimport Base from './base';\n\nimport Parsley from './main';\n\n$.extend(true, Parsley, {\n  asyncValidators: {\n    'default': {\n      fn: function (xhr) {\n        // By default, only status 2xx are deemed successful.\n        // Note: we use status instead of state() because responses with status 200\n        // but invalid messages (e.g. an empty body for content type set to JSON) will\n        // result in state() === 'rejected'.\n        return xhr.status >= 200 && xhr.status < 300;\n      },\n      url: false\n    },\n    reverse: {\n      fn: function (xhr) {\n        // If reverse option is set, a failing ajax request is considered successful\n        return xhr.status < 200 || xhr.status >= 300;\n      },\n      url: false\n    }\n  },\n\n  addAsyncValidator: function (name, fn, url, options) {\n    Parsley.asyncValidators[name] = {\n      fn: fn,\n      url: url || false,\n      options: options || {}\n    };\n\n    return this;\n  }\n\n});\n\nParsley.addValidator('remote', {\n  requirementType: {\n    '': 'string',\n    'validator': 'string',\n    'reverse': 'boolean',\n    'options': 'object'\n  },\n\n  validateString: function (value, url, options, instance) {\n    var data = {};\n    var ajaxOptions;\n    var csr;\n    var validator = options.validator || (true === options.reverse ? 'reverse' : 'default');\n\n    if ('undefined' === typeof Parsley.asyncValidators[validator])\n      throw new Error('Calling an undefined async validator: `' + validator + '`');\n\n    url = Parsley.asyncValidators[validator].url || url;\n\n    // Fill current value\n    if (url.indexOf('{value}') > -1) {\n      url = url.replace('{value}', encodeURIComponent(value));\n    } else {\n      data[instance.element.getAttribute('name') || instance.element.getAttribute('id')] = value;\n    }\n\n    // Merge options passed in from the function with the ones in the attribute\n    var remoteOptions = $.extend(true, options.options || {} , Parsley.asyncValidators[validator].options);\n\n    // All `$.ajax(options)` could be overridden or extended directly from DOM in `data-parsley-remote-options`\n    ajaxOptions = $.extend(true, {}, {\n      url: url,\n      data: data,\n      type: 'GET'\n    }, remoteOptions);\n\n    // Generate store key based on ajax options\n    instance.trigger('field:ajaxoptions', instance, ajaxOptions);\n\n    csr = $.param(ajaxOptions);\n\n    // Initialise querry cache\n    if ('undefined' === typeof Parsley._remoteCache)\n      Parsley._remoteCache = {};\n\n    // Try to retrieve stored xhr\n    var xhr = Parsley._remoteCache[csr] = Parsley._remoteCache[csr] || $.ajax(ajaxOptions);\n\n    var handleXhr = function () {\n      var result = Parsley.asyncValidators[validator].fn.call(instance, xhr, url, options);\n      if (!result) // Map falsy results to rejected promise\n        result = $.Deferred().reject();\n      return $.when(result);\n    };\n\n    return xhr.then(handleXhr, handleXhr);\n  },\n\n  priority: -1\n});\n\nParsley.on('form:submit', function () {\n  Parsley._remoteCache = {};\n});\n\nBase.prototype.addAsyncValidator = function () {\n  Utils.warnOnce('Accessing the method `addAsyncValidator` through an instance is deprecated. Simply call `Parsley.addAsyncValidator(...)`');\n  return Parsley.addAsyncValidator(...arguments);\n};\n","// This is included with the Parsley library itself,\n// thus there is no use in adding it to your project.\nimport Parsley from '../parsley/main';\n\nParsley.addMessages('en', {\n  defaultMessage: \"This value seems to be invalid.\",\n  type: {\n    email:        \"This value should be a valid email.\",\n    url:          \"This value should be a valid url.\",\n    number:       \"This value should be a valid number.\",\n    integer:      \"This value should be a valid integer.\",\n    digits:       \"This value should be digits.\",\n    alphanum:     \"This value should be alphanumeric.\"\n  },\n  notblank:       \"This value should not be blank.\",\n  required:       \"This value is required.\",\n  pattern:        \"This value seems to be invalid.\",\n  min:            \"This value should be greater than or equal to %s.\",\n  max:            \"This value should be lower than or equal to %s.\",\n  range:          \"This value should be between %s and %s.\",\n  minlength:      \"This value is too short. It should have %s characters or more.\",\n  maxlength:      \"This value is too long. It should have %s characters or fewer.\",\n  length:         \"This value length is invalid. It should be between %s and %s characters long.\",\n  mincheck:       \"You must select at least %s choices.\",\n  maxcheck:       \"You must select %s choices or fewer.\",\n  check:          \"You must select between %s and %s choices.\",\n  equalto:        \"This value should be the same.\",\n  euvatin:        \"It's not a valid VAT Identification Number.\",\n});\n\nParsley.setLocale('en');\n","/**\n * inputevent - Alleviate browser bugs for input events\n * https://github.com/marcandre/inputevent\n * @version v0.0.3 - (built Thu, Apr 14th 2016, 5:58 pm)\n * @author Marc-Andre Lafortune <github@marc-andre.ca>\n * @license MIT\n */\n\nimport $ from 'jquery';\n\nfunction InputEvent() {\n  let globals = window || global;\n\n  // Slightly odd way construct our object. This way methods are force bound.\n  // Used to test for duplicate library.\n  Object.assign(this, {\n\n    // For browsers that do not support isTrusted, assumes event is native.\n    isNativeEvent: evt => {\n      return evt.originalEvent && evt.originalEvent.isTrusted !== false;\n    },\n\n    fakeInputEvent: evt => {\n      if (this.isNativeEvent(evt)) {\n        $(evt.target).trigger('input');\n      }\n    },\n\n    misbehaves: evt => {\n      if (this.isNativeEvent(evt)) {\n        this.behavesOk(evt);\n        $(document)\n          .on('change.inputevent', evt.data.selector, this.fakeInputEvent);\n        this.fakeInputEvent(evt);\n      }\n    },\n\n    behavesOk: evt => {\n      if (this.isNativeEvent(evt)) {\n        $(document) // Simply unbinds the testing handler\n          .off('input.inputevent', evt.data.selector, this.behavesOk)\n          .off('change.inputevent', evt.data.selector, this.misbehaves);\n      }\n    },\n\n    // Bind the testing handlers\n    install: () => {\n      if (globals.inputEventPatched) {\n        return;\n      }\n      globals.inputEventPatched = '0.0.3';\n      for (let selector of ['select', 'input[type=\"checkbox\"]', 'input[type=\"radio\"]', 'input[type=\"file\"]']) {\n        $(document)\n          .on('input.inputevent', selector, {selector}, this.behavesOk)\n          .on('change.inputevent', selector, {selector}, this.misbehaves);\n      }\n    },\n\n    uninstall: () => {\n      delete globals.inputEventPatched;\n      $(document).off('.inputevent');\n    }\n\n  });\n};\n\nexport default new InputEvent();\n","import $ from 'jquery';\nimport Parsley from './parsley/main';\nimport './parsley/pubsub';\nimport './parsley/remote';\nimport './i18n/en';\nimport inputevent from './vendor/inputevent';\n\ninputevent.install();\n\nexport default Parsley;\n"],"names":["globalID","pastWarnings","Utils","attr","element","namespace","obj","i","attribute","attributes","regex","RegExp","hasOwnProperty","length","specified","test","name","camelize","slice","deserializeValue","value","checkAttr","hasAttribute","setAttr","setAttribute","dasherize","String","getType","getAttribute","generateID","num","isNaN","Number","JSON","parse","e","str","replace","match","chr","toUpperCase","toLowerCase","warn","window","console","arguments","warnOnce","msg","_resetWarnings","trimString","string","date","parsed","map","x","parseInt","_","year","month","day","Date","getFullYear","getMonth","getDate","integer","number","parseFloat","_boolean","object","regexp","flags","parseRequirement","requirementType","converter","converted","namespaceEvents","events","split","$","evt","join","difference","array","remove","result","each","elem","indexOf","push","all","promises","when","objectCreate","Object","create","prototype","Error","TypeError","_SubmitSelector","Defaults","inputs","excluded","priorityEnabled","multiple","group","uiEnabled","validationThreshold","focus","trigger","triggerAfterFailure","errorClass","successClass","classHandler","Field","errorsContainer","errorsWrapper","errorTemplate","Base","__id__","asyncSupport","_pipeAccordingToValidationResult","pipe","r","Deferred","validationResult","reject","resolve","promise","actualizeOptions","options","domOptions","parent","_resetOptions","initOptions","_listeners","on","fn","queue","subscribe","listenTo","off","splice","unsubscribe","unsubscribeTo","target","extraArg","call","asyncIsValid","force","whenValid","_findRelated","querySelectorAll","$element","convertArrayRequirement","m","values","convertExtraOptionRequirement","requirementSpec","extraOptionReader","main","extra","key","Validator","spec","extend","validate","requirementFirstArg","Array","isArray","validateMultiple","instance","validateDate","_isDateInput","validateNumber","validateString","parseRequirements","requirements","type","isPlainObject","priority","ValidatorRegistry","validators","catalog","__class__","locale","init","typeTesters","email","digits","alphanum","url","range","decimalPlaces","Math","max","parseArguments","args","operatorToValidator","operator","requirementsAndInput","pop","comparisonOperator","addValidator","Parsley","setLocale","addCatalog","messages","set","addMessage","message","addMessages","nameMessageObject","arg1","arg2","_setValidator","hasValidator","updateValidator","removeValidator","validator","getErrorMessage","constraint","typeMessages","formatMessage","defaultMessage","en","parameters","notblank","required","step","base","tester","nb","decimals","toInt","f","round","pow","pattern","minlength","requirement","maxlength","min","mincheck","maxcheck","check","equalto","refOrValue","$reference","val","euvatin","re","UI","diffResults","newResult","oldResult","deep","added","kept","found","j","assert","removed","Form","_actualizeTriggers","onSubmitValidate","onSubmitButton","_focusedField","fields","field","noFocus","_destroyUI","_reflowUI","_buildUI","_ui","diff","lastValidationResult","_manageStatusClass","_manageErrorsMessages","_failedOnce","getErrorsMessages","errorMessage","_getErrorMessage","addError","updateClass","_addError","_errorClass","updateError","_updateError","removeError","_removeError","hasConstraints","needsValidation","_successClass","_resetClass","errorsMessagesDisabled","_insertErrorWrapper","$errorsWrapper","find","append","addClass","$errorClassHandler","errorsWrapperId","html","removeAttr","removeClass","customConstraintErrorMessage","_manageClassHandler","validationInformationVisible","$handlerFunction","$handler","jQuery","_inputHolder","nodeName","$errorsContainer","after","$toBind","_validateIfNeeded","event","getValue","debounce","clearTimeout","_debounced","setTimeout","_resetUI","children","statusMapping","pending","resolved","rejected","parsley","submitSource","_submitSource","prop","_remoteCache","whenValidate","state","_trigger","stopImmediatePropagation","preventDefault","done","_submit","currentTarget","$synthetic","appendTo","Event","submitEvent","_refreshFields","_withoutReactualizingFormOptions","fail","always","isValid","refresh","reset","destroy","removeData","_bindFields","oldFields","fieldsMappedById","not","fieldInstance","Factory","uniqueId","oldActualizeOptions","eventName","Constraint","parsleyField","isDomConstraint","validatorSpec","_validatorRegistry","_parseRequirements","capitalize","cap","requirementList","parsleyFormInstance","constraints","constraintsByName","_bindConstraints","_isInGroup","_refreshed","_isRequired","validateIfEmpty","inArray","groupedConstraints","_getGroupedConstraints","_validateConstraint","_handleWhitespace","_refreshConstraints","refreshConstraints","addConstraint","removeConstraint","updateConstraint","undefined","_bindHtml5Constraints","trimValue","whitespace","c","index","p","sort","a","b","Multiple","addElement","$elements","fieldConstraints","has","data","filter","_init","savedparsleyFormInstance","__version__","is","bind","isMultiple","handleMultiple","parsleyMultipleInstance","input","$previouslyRelated","get","doNotStore","parsleyInstance","ParsleyExtend","vernums","jquery","forEach","document","version","psly","instances","ParsleyConfig","ParsleyUtils","registry","i18n","ParsleyValidator","method","ParsleyUI","doNotUpdateClass","autoBind","o","deprecated","adapt","context","parsleyAdaptedCallback","unshift","apply","eventPrefix","lastIndexOf","substr","listen","callback","unsubscribeAll","emit","instanceGiven","asyncValidators","xhr","status","reverse","addAsyncValidator","ajaxOptions","csr","encodeURIComponent","remoteOptions","param","ajax","handleXhr","then","InputEvent","globals","global","isNativeEvent","originalEvent","isTrusted","fakeInputEvent","misbehaves","behavesOk","selector","install","inputEventPatched","uninstall","inputevent"],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/parsley.min.js b/dist/parsley.min.js
index 09a24b3014fbfeddadf273fc6a568f82b492f0f5..5cab2bc81bb7a4e8cf24acc3629bad33e41c0655 100644
--- a/dist/parsley.min.js
+++ b/dist/parsley.min.js
@@ -1,2 +1,2 @@
-!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):(t=t||self).parsley=e(t.jQuery)}(this,function(h){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}).apply(this,arguments)}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var i=[],r=!0,n=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(t){n=!0,s=t}finally{try{r||null==o.return||o.return()}finally{if(n)throw s}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var t=1,e={},d={attr:function(t,e,i){var r,n,s,a=new RegExp("^"+e,"i");if(void 0===i)i={};else for(r in i)i.hasOwnProperty(r)&&delete i[r];if(!t)return i;for(r=(s=t.attributes).length;r--;)(n=s[r])&&n.specified&&a.test(n.name)&&(i[this.camelize(n.name.slice(e.length))]=this.deserializeValue(n.value));return i},checkAttr:function(t,e,i){return t.hasAttribute(e+i)},setAttr:function(t,e,i,r){t.setAttribute(this.dasherize(e+i),String(r))},getType:function(t){return t.getAttribute("type")||"text"},generateID:function(){return""+t++},deserializeValue:function(e){var t;try{return e?"true"==e||"false"!=e&&("null"==e?null:isNaN(t=Number(e))?/^[\[\{]/.test(e)?JSON.parse(e):e:t):e}catch(t){return e}},camelize:function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},dasherize:function(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},warn:function(){var t;window.console&&"function"==typeof window.console.warn&&(t=window.console).warn.apply(t,arguments)},warnOnce:function(t){e[t]||(e[t]=!0,this.warn.apply(this,arguments))},_resetWarnings:function(){e={}},trimString:function(t){return t.replace(/^\s+|\s+$/g,"")},parse:{date:function(t){var e=t.match(/^(\d{4,})-(\d\d)-(\d\d)$/);if(!e)return null;var i=o(e.map(function(t){return parseInt(t,10)}),4),r=(i[0],i[1]),n=i[2],s=i[3],a=new Date(r,n-1,s);return a.getFullYear()!==r||a.getMonth()+1!==n||a.getDate()!==s?null:a},string:function(t){return t},integer:function(t){return isNaN(t)?null:parseInt(t,10)},number:function(t){if(isNaN(t))throw null;return parseFloat(t)},boolean:function(t){return!/^\s*false\s*$/i.test(t)},object:function(t){return d.deserializeValue(t)},regexp:function(t){var e="";return t=/^\/.*\/(?:[gimy]*)$/.test(t)?(e=t.replace(/.*\/([gimy]*)$/,"$1"),t.replace(new RegExp("^/(.*?)/"+e+"$"),"$1")):"^"+t+"$",new RegExp(t,e)}},parseRequirement:function(t,e){var i=this.parse[t||"string"];if(!i)throw'Unknown requirement specification: "'+t+'"';var r=i(e);if(null===r)throw"Requirement is not a ".concat(t,': "').concat(e,'"');return r},namespaceEvents:function(t,e){return(t=this.trimString(t||"").split(/\s+/))[0]?h.map(t,function(t){return"".concat(t,".").concat(e)}).join(" "):""},difference:function(t,i){var r=[];return h.each(t,function(t,e){-1==i.indexOf(e)&&r.push(e)}),r},all:function(t){return h.when.apply(h,u(t).concat([42,42]))},objectCreate:Object.create||function(t){if(1<arguments.length)throw Error("Second argument not supported");if("object"!=n(t))throw TypeError("Argument must be an object");i.prototype=t;var e=new i;return i.prototype=null,e},_SubmitSelector:'input[type="submit"], button:submit'};function i(){}function r(){this.__id__=d.generateID()}var s={namespace:"data-parsley-",inputs:"input, textarea, select",excluded:"input[type=button], input[type=submit], input[type=reset], input[type=hidden]",priorityEnabled:!0,multiple:null,group:null,uiEnabled:!0,validationThreshold:3,focus:"first",trigger:!1,triggerAfterFailure:"input",errorClass:"parsley-error",successClass:"parsley-success",classHandler:function(){},errorsContainer:function(){},errorsWrapper:'<ul class="parsley-errors-list"></ul>',errorTemplate:"<li></li>"};r.prototype={asyncSupport:!0,_pipeAccordingToValidationResult:function(){function t(){var t=h.Deferred();return!0!==e.validationResult&&t.reject(),t.resolve().promise()}var e=this;return[t,t]},actualizeOptions:function(){return d.attr(this.element,this.options.namespace,this.domOptions),this.parent&&this.parent.actualizeOptions&&this.parent.actualizeOptions(),this},_resetOptions:function(t){for(var e in this.domOptions=d.objectCreate(this.parent.options),this.options=d.objectCreate(this.domOptions),t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);this.actualizeOptions()},_listeners:null,on:function(t,e){return this._listeners=this._listeners||{},(this._listeners[t]=this._listeners[t]||[]).push(e),this},subscribe:function(t,e){h.listenTo(this,t.toLowerCase(),e)},off:function(t,e){var i=this._listeners&&this._listeners[t];if(i)if(e)for(var r=i.length;r--;)i[r]===e&&i.splice(r,1);else delete this._listeners[t];return this},unsubscribe:function(t){h.unsubscribeTo(this,t.toLowerCase())},trigger:function(t,e,i){e=e||this;var r,n=this._listeners&&this._listeners[t];if(n)for(var s=n.length;s--;)if(!1===(r=n[s].call(e,e,i)))return r;return!this.parent||this.parent.trigger(t,e,i)},asyncIsValid:function(t,e){return d.warnOnce("asyncIsValid is deprecated; please use whenValid instead"),this.whenValid({group:t,force:e})},_findRelated:function(){return this.options.multiple?h(this.parent.element.querySelectorAll("[".concat(this.options.namespace,'multiple="').concat(this.options.multiple,'"]'))):this.$element}};function c(t){h.extend(!0,this,t)}c.prototype={validate:function(t,e){if(this.fn)return 3<arguments.length&&(e=[].slice.call(arguments,1,-1)),this.fn(t,e);if(Array.isArray(t)){if(!this.validateMultiple)throw"Validator `"+this.name+"` does not handle multiple values";return this.validateMultiple.apply(this,arguments)}var i=arguments[arguments.length-1];if(this.validateDate&&i._isDateInput())return arguments[0]=d.parse.date(arguments[0]),null!==arguments[0]&&this.validateDate.apply(this,arguments);if(this.validateNumber)return!t||!isNaN(t)&&(arguments[0]=parseFloat(arguments[0]),this.validateNumber.apply(this,arguments));if(this.validateString)return this.validateString.apply(this,arguments);throw"Validator `"+this.name+"` only handles multiple values"},parseRequirements:function(t,e){if("string"!=typeof t)return Array.isArray(t)?t:[t];var i=this.requirementType;if(Array.isArray(i)){for(var r=function(t,e){var i=t.match(/^\s*\[(.*)\]\s*$/);if(!i)throw'Requirement is not an array: "'+t+'"';var r=i[1].split(",").map(d.trimString);if(r.length!==e)throw"Requirement has "+r.length+" values when "+e+" are needed";return r}(t,i.length),n=0;n<r.length;n++)r[n]=d.parseRequirement(i[n],r[n]);return r}return h.isPlainObject(i)?function(t,e,i){var r=null,n={};for(var s in t)if(s){var a=i(s);"string"==typeof a&&(a=d.parseRequirement(t[s],a)),n[s]=a}else r=d.parseRequirement(t[s],e);return[r,n]}(i,t,e):[d.parseRequirement(i,t)]},requirementType:"string",priority:2};function a(t,e){this.__class__="ValidatorRegistry",this.locale="en",this.init(t||{},e||{})}var p={email:/^((([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))$/,number:/^-?(\d*\.)?\d+(e[-+]?\d+)?$/i,integer:/^-?\d+$/,digits:/^\d+$/,alphanum:/^\w+$/i,date:{test:function(t){return null!==d.parse.date(t)}},url:new RegExp("^(?:(?:https?|ftp)://)?(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-zA-Z\\u00a1-\\uffff0-9]-*)*[a-zA-Z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-zA-Z\\u00a1-\\uffff0-9]-*)*[a-zA-Z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-zA-Z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/\\S*)?$")};p.range=p.number;function f(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}function m(s,a){return function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return i.pop(),a.apply(void 0,[t].concat(u((n=s,i.map(d.parse[n])))));var n}}function g(t){return{validateDate:m("date",t),validateNumber:m("number",t),requirementType:t.length<=2?"string":["string","string"],priority:30}}a.prototype={init:function(t,e){for(var i in this.catalog=e,this.validators=l({},this.validators),t)this.addValidator(i,t[i].fn,t[i].priority);window.Parsley.trigger("parsley:validator:init")},setLocale:function(t){if(void 0===this.catalog[t])throw new Error(t+" is not available in the catalog");return this.locale=t,this},addCatalog:function(t,e,i){return"object"===n(e)&&(this.catalog[t]=e),!0===i?this.setLocale(t):this},addMessage:function(t,e,i){return void 0===this.catalog[t]&&(this.catalog[t]={}),this.catalog[t][e]=i,this},addMessages:function(t,e){for(var i in e)this.addMessage(t,i,e[i]);return this},addValidator:function(t,e,i){if(this.validators[t])d.warn('Validator "'+t+'" is already defined.');else if(s.hasOwnProperty(t))return void d.warn('"'+t+'" is a restricted keyword and is not a valid validator name.');return this._setValidator.apply(this,arguments)},hasValidator:function(t){return!!this.validators[t]},updateValidator:function(t,e,i){return this.validators[t]?this._setValidator.apply(this,arguments):(d.warn('Validator "'+t+'" is not already defined.'),this.addValidator.apply(this,arguments))},removeValidator:function(t){return this.validators[t]||d.warn('Validator "'+t+'" is not defined.'),delete this.validators[t],this},_setValidator:function(t,e,i){for(var r in"object"!==n(e)&&(e={fn:e,priority:i}),e.validate||(e=new c(e)),(this.validators[t]=e).messages||{})this.addMessage(r,t,e.messages[r]);return this},getErrorMessage:function(t){var e;"type"===t.name?e=(this.catalog[this.locale][t.name]||{})[t.requirements]:e=this.formatMessage(this.catalog[this.locale][t.name],t.requirements);return e||this.catalog[this.locale].defaultMessage||this.catalog.en.defaultMessage},formatMessage:function(t,e){if("object"!==n(e))return"string"==typeof t?t.replace(/%s/i,e):"";for(var i in e)t=this.formatMessage(t,e[i]);return t},validators:{notblank:{validateString:function(t){return/\S/.test(t)},priority:2},required:{validateMultiple:function(t){return 0<t.length},validateString:function(t){return/\S/.test(t)},priority:512},type:{validateString:function(t,e,i){var r=2<arguments.length&&void 0!==i?i:{},n=r.step,s=void 0===n?"any":n,a=r.base,o=void 0===a?0:a,l=p[e];if(!l)throw new Error("validator type `"+e+"` is not supported");if(!t)return!0;if(!l.test(t))return!1;if("number"===e&&!/^any$/i.test(s||"")){var u=Number(t),d=Math.max(f(s),f(o));if(f(u)>d)return!1;var h=function(t){return Math.round(t*Math.pow(10,d))};if((h(u)-h(o))%h(s)!=0)return!1}return!0},requirementType:{"":"string",step:"string",base:"number"},priority:256},pattern:{validateString:function(t,e){return!t||e.test(t)},requirementType:"regexp",priority:64},minlength:{validateString:function(t,e){return!t||t.length>=e},requirementType:"integer",priority:30},maxlength:{validateString:function(t,e){return t.length<=e},requirementType:"integer",priority:30},length:{validateString:function(t,e,i){return!t||t.length>=e&&t.length<=i},requirementType:["integer","integer"],priority:30},mincheck:{validateMultiple:function(t,e){return t.length>=e},requirementType:"integer",priority:30},maxcheck:{validateMultiple:function(t,e){return t.length<=e},requirementType:"integer",priority:30},check:{validateMultiple:function(t,e,i){return t.length>=e&&t.length<=i},requirementType:["integer","integer"],priority:30},min:g(function(t,e){return e<=t}),max:g(function(t,e){return t<=e}),range:g(function(t,e,i){return e<=t&&t<=i}),equalto:{validateString:function(t,e){if(!t)return!0;var i=h(e);return i.length?t===i.val():t===e},priority:256},euvatin:{validateString:function(t){if(!t)return!0;return/^[A-Z][A-Z][A-Za-z0-9 -]{2,}$/.test(t)},priority:30}}};var v={};v.Form={_actualizeTriggers:function(){var e=this;this.$element.on("submit.Parsley",function(t){e.onSubmitValidate(t)}),this.$element.on("click.Parsley",d._SubmitSelector,function(t){e.onSubmitButton(t)}),!1!==this.options.uiEnabled&&this.element.setAttribute("novalidate","")},focus:function(){if(!(this._focusedField=null)===this.validationResult||"none"===this.options.focus)return null;for(var t=0;t<this.fields.length;t++){var e=this.fields[t];if(!0!==e.validationResult&&0<e.validationResult.length&&void 0===e.options.noFocus&&(this._focusedField=e.$element,"first"===this.options.focus))break}return null===this._focusedField?null:this._focusedField.focus()},_destroyUI:function(){this.$element.off(".Parsley")}},v.Field={_reflowUI:function(){if(this._buildUI(),this._ui){var t=function t(e,i,r){for(var n=[],s=[],a=0;a<e.length;a++){for(var o=!1,l=0;l<i.length;l++)if(e[a].assert.name===i[l].assert.name){o=!0;break}o?s.push(e[a]):n.push(e[a])}return{kept:s,added:n,removed:r?[]:t(i,e,!0).added}}(this.validationResult,this._ui.lastValidationResult);this._ui.lastValidationResult=this.validationResult,this._manageStatusClass(),this._manageErrorsMessages(t),this._actualizeTriggers(),!t.kept.length&&!t.added.length||this._failedOnce||(this._failedOnce=!0,this._actualizeTriggers())}},getErrorsMessages:function(){if(!0===this.validationResult)return[];for(var t=[],e=0;e<this.validationResult.length;e++)t.push(this.validationResult[e].errorMessage||this._getErrorMessage(this.validationResult[e].assert));return t},addError:function(t,e){var i=1<arguments.length&&void 0!==e?e:{},r=i.message,n=i.assert,s=i.updateClass,a=void 0===s||s;this._buildUI(),this._addError(t,{message:r,assert:n}),a&&this._errorClass()},updateError:function(t,e){var i=1<arguments.length&&void 0!==e?e:{},r=i.message,n=i.assert,s=i.updateClass,a=void 0===s||s;this._buildUI(),this._updateError(t,{message:r,assert:n}),a&&this._errorClass()},removeError:function(t,e){var i=(1<arguments.length&&void 0!==e?e:{}).updateClass,r=void 0===i||i;this._buildUI(),this._removeError(t),r&&this._manageStatusClass()},_manageStatusClass:function(){this.hasConstraints()&&this.needsValidation()&&!0===this.validationResult?this._successClass():0<this.validationResult.length?this._errorClass():this._resetClass()},_manageErrorsMessages:function(t){if(void 0===this.options.errorsMessagesDisabled){if(void 0!==this.options.errorMessage)return t.added.length||t.kept.length?(this._insertErrorWrapper(),0===this._ui.$errorsWrapper.find(".parsley-custom-error-message").length&&this._ui.$errorsWrapper.append(h(this.options.errorTemplate).addClass("parsley-custom-error-message")),this._ui.$errorClassHandler.attr("aria-describedby",this._ui.errorsWrapperId),this._ui.$errorsWrapper.addClass("filled").attr("aria-hidden","false").find(".parsley-custom-error-message").html(this.options.errorMessage)):(this._ui.$errorClassHandler.removeAttr("aria-describedby"),this._ui.$errorsWrapper.removeClass("filled").attr("aria-hidden","true").find(".parsley-custom-error-message").remove());for(var e=0;e<t.removed.length;e++)this._removeError(t.removed[e].assert.name);for(e=0;e<t.added.length;e++)this._addError(t.added[e].assert.name,{message:t.added[e].errorMessage,assert:t.added[e].assert});for(e=0;e<t.kept.length;e++)this._updateError(t.kept[e].assert.name,{message:t.kept[e].errorMessage,assert:t.kept[e].assert})}},_addError:function(t,e){var i=e.message,r=e.assert;this._insertErrorWrapper(),this._ui.$errorClassHandler.attr("aria-describedby",this._ui.errorsWrapperId),this._ui.$errorsWrapper.addClass("filled").attr("aria-hidden","false").append(h(this.options.errorTemplate).addClass("parsley-"+t).html(i||this._getErrorMessage(r)))},_updateError:function(t,e){var i=e.message,r=e.assert;this._ui.$errorsWrapper.addClass("filled").find(".parsley-"+t).html(i||this._getErrorMessage(r))},_removeError:function(t){this._ui.$errorClassHandler.removeAttr("aria-describedby"),this._ui.$errorsWrapper.removeClass("filled").attr("aria-hidden","true").find(".parsley-"+t).remove()},_getErrorMessage:function(t){var e=t.name+"Message";return void 0!==this.options[e]?window.Parsley.formatMessage(this.options[e],t.requirements):window.Parsley.getErrorMessage(t)},_buildUI:function(){if(!this._ui&&!1!==this.options.uiEnabled){var t={};this.element.setAttribute(this.options.namespace+"id",this.__id__),t.$errorClassHandler=this._manageClassHandler(),t.errorsWrapperId="parsley-id-"+(this.options.multiple?"multiple-"+this.options.multiple:this.__id__),t.$errorsWrapper=h(this.options.errorsWrapper).attr("id",t.errorsWrapperId),t.lastValidationResult=[],t.validationInformationVisible=!1,this._ui=t}},_manageClassHandler:function(){if("string"==typeof this.options.classHandler&&h(this.options.classHandler).length)return h(this.options.classHandler);var t=this.options.classHandler;if("string"==typeof this.options.classHandler&&"function"==typeof window[this.options.classHandler]&&(t=window[this.options.classHandler]),"function"==typeof t){var e=t.call(this,this);if(void 0!==e&&e.length)return e}else{if("object"===n(t)&&t instanceof jQuery&&t.length)return t;t&&d.warn("The class handler `"+t+"` does not exist in DOM nor as a global JS function")}return this._inputHolder()},_inputHolder:function(){return this.options.multiple&&"SELECT"!==this.element.nodeName?this.$element.parent():this.$element},_insertErrorWrapper:function(){var t=this.options.errorsContainer;if(0!==this._ui.$errorsWrapper.parent().length)return this._ui.$errorsWrapper.parent();if("string"==typeof t){if(h(t).length)return h(t).append(this._ui.$errorsWrapper);"function"==typeof window[t]?t=window[t]:d.warn("The errors container `"+t+"` does not exist in DOM nor as a global JS function")}return"function"==typeof t&&(t=t.call(this,this)),"object"===n(t)&&t.length?t.append(this._ui.$errorsWrapper):this._inputHolder().after(this._ui.$errorsWrapper)},_actualizeTriggers:function(){var t,e=this,i=this._findRelated();i.off(".Parsley"),this._failedOnce?i.on(d.namespaceEvents(this.options.triggerAfterFailure,"Parsley"),function(){e._validateIfNeeded()}):(t=d.namespaceEvents(this.options.trigger,"Parsley"))&&i.on(t,function(t){e._validateIfNeeded(t)})},_validateIfNeeded:function(t){var e=this;t&&/key|input/.test(t.type)&&(!this._ui||!this._ui.validationInformationVisible)&&this.getValue().length<=this.options.validationThreshold||(this.options.debounce?(window.clearTimeout(this._debounced),this._debounced=window.setTimeout(function(){return e.validate()},this.options.debounce)):this.validate())},_resetUI:function(){this._failedOnce=!1,this._actualizeTriggers(),void 0!==this._ui&&(this._ui.$errorsWrapper.removeClass("filled").children().remove(),this._resetClass(),this._ui.lastValidationResult=[],this._ui.validationInformationVisible=!1)},_destroyUI:function(){this._resetUI(),void 0!==this._ui&&this._ui.$errorsWrapper.remove(),delete this._ui},_successClass:function(){this._ui.validationInformationVisible=!0,this._ui.$errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass)},_errorClass:function(){this._ui.validationInformationVisible=!0,this._ui.$errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass)},_resetClass:function(){this._ui.$errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass)}};function y(t,e,i){this.__class__="Form",this.element=t,this.$element=h(t),this.domOptions=e,this.options=i,this.parent=window.Parsley,this.fields=[],this.validationResult=null}var _={pending:null,resolved:!0,rejected:!1};y.prototype={onSubmitValidate:function(t){var e=this;if(!0!==t.parsley){var i=this._submitSource||this.$element.find(d._SubmitSelector)[0];if(this._submitSource=null,this.$element.find(".parsley-synthetic-submit-button").prop("disabled",!0),!i||null===i.getAttribute("formnovalidate")){window.Parsley._remoteCache={};var r=this.whenValidate({event:t});"resolved"===r.state()&&!1!==this._trigger("submit")||(t.stopImmediatePropagation(),t.preventDefault(),"pending"===r.state()&&r.done(function(){e._submit(i)}))}}},onSubmitButton:function(t){this._submitSource=t.currentTarget},_submit:function(t){if(!1!==this._trigger("submit")){if(t){var e=this.$element.find(".parsley-synthetic-submit-button").prop("disabled",!1);0===e.length&&(e=h('<input class="parsley-synthetic-submit-button" type="hidden">').appendTo(this.$element)),e.attr({name:t.getAttribute("name"),value:t.getAttribute("value")})}this.$element.trigger(l(h.Event("submit"),{parsley:!0}))}},validate:function(t){if(1<=arguments.length&&!h.isPlainObject(t)){d.warnOnce("Calling validate on a parsley form without passing arguments as an object is deprecated.");var e=Array.prototype.slice.call(arguments);t={group:e[0],force:e[1],event:e[2]}}return _[this.whenValidate(t).state()]},whenValidate:function(t){var e,i=this,r=0<arguments.length&&void 0!==t?t:{},n=r.group,s=r.force,a=r.event;(this.submitEvent=a)&&(this.submitEvent=l({},a,{preventDefault:function(){d.warnOnce("Using `this.submitEvent.preventDefault()` is deprecated; instead, call `this.validationResult = false`"),i.validationResult=!1}})),this.validationResult=!0,this._trigger("validate"),this._refreshFields();var o=this._withoutReactualizingFormOptions(function(){return h.map(i.fields,function(t){return t.whenValidate({force:s,group:n})})});return(e=d.all(o).done(function(){i._trigger("success")}).fail(function(){i.validationResult=!1,i.focus(),i._trigger("error")}).always(function(){i._trigger("validated")})).pipe.apply(e,u(this._pipeAccordingToValidationResult()))},isValid:function(t){if(1<=arguments.length&&!h.isPlainObject(t)){d.warnOnce("Calling isValid on a parsley form without passing arguments as an object is deprecated.");var e=Array.prototype.slice.call(arguments);t={group:e[0],force:e[1]}}return _[this.whenValid(t).state()]},whenValid:function(t){var e=this,i=0<arguments.length&&void 0!==t?t:{},r=i.group,n=i.force;this._refreshFields();var s=this._withoutReactualizingFormOptions(function(){return h.map(e.fields,function(t){return t.whenValid({group:r,force:n})})});return d.all(s)},refresh:function(){return this._refreshFields(),this},reset:function(){for(var t=0;t<this.fields.length;t++)this.fields[t].reset();this._trigger("reset")},destroy:function(){this._destroyUI();for(var t=0;t<this.fields.length;t++)this.fields[t].destroy();this.$element.removeData("Parsley"),this._trigger("destroy")},_refreshFields:function(){return this.actualizeOptions()._bindFields()},_bindFields:function(){var n=this,t=this.fields;return this.fields=[],this.fieldsMappedById={},this._withoutReactualizingFormOptions(function(){n.$element.find(n.options.inputs).not(n.options.excluded).not("[".concat(n.options.namespace,"excluded=true]")).each(function(t,e){var i=new window.Parsley.Factory(e,{},n);if("Field"===i.__class__||"FieldMultiple"===i.__class__){var r=i.__class__+"-"+i.__id__;void 0===n.fieldsMappedById[r]&&(n.fieldsMappedById[r]=i,n.fields.push(i))}}),h.each(d.difference(t,n.fields),function(t,e){e.reset()})}),this},_withoutReactualizingFormOptions:function(t){var e=this.actualizeOptions;this.actualizeOptions=function(){return this};var i=t();return this.actualizeOptions=e,i},_trigger:function(t){return this.trigger("form:"+t)}};function b(t,e,i,r,n){var s=window.Parsley._validatorRegistry.validators[e],a=new c(s);l(this,{validator:a,name:e,requirements:i,priority:r=r||t.options[e+"Priority"]||a.priority,isDomConstraint:n=!0===n}),this._parseRequirements(t.options)}function w(t,e,i,r){this.__class__="Field",this.element=t,this.$element=h(t),void 0!==r&&(this.parent=r),this.options=i,this.domOptions=e,this.constraints=[],this.constraintsByName={},this.validationResult=!0,this._bindConstraints()}var F={pending:null,resolved:!0,rejected:!(b.prototype={validate:function(t,e){var i;return(i=this.validator).validate.apply(i,[t].concat(u(this.requirementList),[e]))},_parseRequirements:function(i){var r=this;this.requirementList=this.validator.parseRequirements(this.requirements,function(t){return i[r.name+((e=t)[0].toUpperCase()+e.slice(1))];var e})}})};w.prototype={validate:function(t){1<=arguments.length&&!h.isPlainObject(t)&&(d.warnOnce("Calling validate on a parsley field without passing arguments as an object is deprecated."),t={options:t});var e=this.whenValidate(t);if(!e)return!0;switch(e.state()){case"pending":return null;case"resolved":return!0;case"rejected":return this.validationResult}},whenValidate:function(t){var e,i=this,r=0<arguments.length&&void 0!==t?t:{},n=r.force,s=r.group;if(this.refresh(),!s||this._isInGroup(s))return this.value=this.getValue(),this._trigger("validate"),(e=this.whenValid({force:n,value:this.value,_refreshed:!0}).always(function(){i._reflowUI()}).done(function(){i._trigger("success")}).fail(function(){i._trigger("error")}).always(function(){i._trigger("validated")})).pipe.apply(e,u(this._pipeAccordingToValidationResult()))},hasConstraints:function(){return 0!==this.constraints.length},needsValidation:function(t){return void 0===t&&(t=this.getValue()),!(!t.length&&!this._isRequired()&&void 0===this.options.validateIfEmpty)},_isInGroup:function(t){return Array.isArray(this.options.group)?-1!==h.inArray(t,this.options.group):this.options.group===t},isValid:function(t){if(1<=arguments.length&&!h.isPlainObject(t)){d.warnOnce("Calling isValid on a parsley field without passing arguments as an object is deprecated.");var e=Array.prototype.slice.call(arguments);t={force:e[0],value:e[1]}}var i=this.whenValid(t);return!i||F[i.state()]},whenValid:function(t){var r=this,e=0<arguments.length&&void 0!==t?t:{},i=e.force,n=void 0!==i&&i,s=e.value,a=e.group;if(e._refreshed||this.refresh(),!a||this._isInGroup(a)){if(this.validationResult=!0,!this.hasConstraints())return h.when();if(null==s&&(s=this.getValue()),!this.needsValidation(s)&&!0!==n)return h.when();var o=this._getGroupedConstraints(),l=[];return h.each(o,function(t,e){var i=d.all(h.map(e,function(t){return r._validateConstraint(s,t)}));if(l.push(i),"rejected"===i.state())return!1}),d.all(l)}},_validateConstraint:function(t,e){var i=this,r=e.validate(t,this);return!1===r&&(r=h.Deferred().reject()),d.all([r]).fail(function(t){i.validationResult instanceof Array||(i.validationResult=[]),i.validationResult.push({assert:e,errorMessage:"string"==typeof t&&t})})},getValue:function(){var t;return null==(t="function"==typeof this.options.value?this.options.value(this):void 0!==this.options.value?this.options.value:this.$element.val())?"":this._handleWhitespace(t)},reset:function(){return this._resetUI(),this._trigger("reset")},destroy:function(){this._destroyUI(),this.$element.removeData("Parsley"),this.$element.removeData("FieldMultiple"),this._trigger("destroy")},refresh:function(){return this._refreshConstraints(),this},_refreshConstraints:function(){return this.actualizeOptions()._bindConstraints()},refreshConstraints:function(){return d.warnOnce("Parsley's refreshConstraints is deprecated. Please use refresh"),this.refresh()},addConstraint:function(t,e,i,r){if(window.Parsley._validatorRegistry.validators[t]){var n=new b(this,t,e,i,r);"undefined"!==this.constraintsByName[n.name]&&this.removeConstraint(n.name),this.constraints.push(n),this.constraintsByName[n.name]=n}return this},removeConstraint:function(t){for(var e=0;e<this.constraints.length;e++)if(t===this.constraints[e].name){this.constraints.splice(e,1);break}return delete this.constraintsByName[t],this},updateConstraint:function(t,e,i){return this.removeConstraint(t).addConstraint(t,e,i)},_bindConstraints:function(){for(var t=[],e={},i=0;i<this.constraints.length;i++)!1===this.constraints[i].isDomConstraint&&(t.push(this.constraints[i]),e[this.constraints[i].name]=this.constraints[i]);for(var r in this.constraints=t,this.constraintsByName=e,this.options)this.addConstraint(r,this.options[r],void 0,!0);return this._bindHtml5Constraints()},_bindHtml5Constraints:function(){null!==this.element.getAttribute("required")&&this.addConstraint("required",!0,void 0,!0),null!==this.element.getAttribute("pattern")&&this.addConstraint("pattern",this.element.getAttribute("pattern"),void 0,!0);var t=this.element.getAttribute("min"),e=this.element.getAttribute("max");null!==t&&null!==e?this.addConstraint("range",[t,e],void 0,!0):null!==t?this.addConstraint("min",t,void 0,!0):null!==e&&this.addConstraint("max",e,void 0,!0),null!==this.element.getAttribute("minlength")&&null!==this.element.getAttribute("maxlength")?this.addConstraint("length",[this.element.getAttribute("minlength"),this.element.getAttribute("maxlength")],void 0,!0):null!==this.element.getAttribute("minlength")?this.addConstraint("minlength",this.element.getAttribute("minlength"),void 0,!0):null!==this.element.getAttribute("maxlength")&&this.addConstraint("maxlength",this.element.getAttribute("maxlength"),void 0,!0);var i=d.getType(this.element);return"number"===i?this.addConstraint("type",["number",{step:this.element.getAttribute("step")||"1",base:t||this.element.getAttribute("value")}],void 0,!0):/^(email|url|range|date)$/i.test(i)?this.addConstraint("type",i,void 0,!0):this},_isRequired:function(){return void 0!==this.constraintsByName.required&&!1!==this.constraintsByName.required.requirements},_trigger:function(t){return this.trigger("field:"+t)},_handleWhitespace:function(t){return!0===this.options.trimValue&&d.warnOnce('data-parsley-trim-value="true" is deprecated, please use data-parsley-whitespace="trim"'),"squish"===this.options.whitespace&&(t=t.replace(/\s{2,}/g," ")),"trim"!==this.options.whitespace&&"squish"!==this.options.whitespace&&!0!==this.options.trimValue||(t=d.trimString(t)),t},_isDateInput:function(){var t=this.constraintsByName.type;return t&&"date"===t.requirements},_getGroupedConstraints:function(){if(!1===this.options.priorityEnabled)return[this.constraints];for(var t=[],e={},i=0;i<this.constraints.length;i++){var r=this.constraints[i].priority;e[r]||t.push(e[r]=[]),e[r].push(this.constraints[i])}return t.sort(function(t,e){return e[0].priority-t[0].priority}),t}};function C(){this.__class__="FieldMultiple"}C.prototype={addElement:function(t){return this.$elements.push(t),this},_refreshConstraints:function(){var t;if(this.constraints=[],"SELECT"===this.element.nodeName)return this.actualizeOptions()._bindConstraints(),this;for(var e=0;e<this.$elements.length;e++)if(h("html").has(this.$elements[e]).length){t=this.$elements[e].data("FieldMultiple")._refreshConstraints().constraints;for(var i=0;i<t.length;i++)this.addConstraint(t[i].name,t[i].requirements,t[i].priority,t[i].isDomConstraint)}else this.$elements.splice(e,1);return this},getValue:function(){if("function"==typeof this.options.value)return this.options.value(this);if(void 0!==this.options.value)return this.options.value;if("INPUT"===this.element.nodeName){var t=d.getType(this.element);if("radio"===t)return this._findRelated().filter(":checked").val()||"";if("checkbox"===t){var e=[];return this._findRelated().filter(":checked").each(function(){e.push(h(this).val())}),e}}return"SELECT"===this.element.nodeName&&null===this.$element.val()?[]:this.$element.val()},_init:function(){return this.$elements=[this.$element],this}};function A(t,e,i){this.element=t,this.$element=h(t);var r=this.$element.data("Parsley");if(r)return void 0!==i&&r.parent===window.Parsley&&(r.parent=i,r._resetOptions(r.options)),"object"===n(e)&&l(r.options,e),r;if(!this.$element.length)throw new Error("You must bind Parsley on an existing element.");if(void 0!==i&&"Form"!==i.__class__)throw new Error("Parent instance must be a Form instance");return this.parent=i||window.Parsley,this.init(e)}A.prototype={init:function(t){return this.__class__="Parsley",this.__version__="2.9.2",this.__id__=d.generateID(),this._resetOptions(t),"FORM"===this.element.nodeName||d.checkAttr(this.element,this.options.namespace,"validate")&&!this.$element.is(this.options.inputs)?this.bind("parsleyForm"):this.isMultiple()?this.handleMultiple():this.bind("parsleyField")},isMultiple:function(){var t=d.getType(this.element);return"radio"===t||"checkbox"===t||"SELECT"===this.element.nodeName&&null!==this.element.getAttribute("multiple")},handleMultiple:function(){var t,e,r=this;if(this.options.multiple=this.options.multiple||(t=this.element.getAttribute("name"))||this.element.getAttribute("id"),"SELECT"===this.element.nodeName&&null!==this.element.getAttribute("multiple"))return this.options.multiple=this.options.multiple||this.__id__,this.bind("parsleyFieldMultiple");if(!this.options.multiple)return d.warn("To be bound by Parsley, a radio, a checkbox and a multiple select input must have either a name or a multiple option.",this.$element),this;this.options.multiple=this.options.multiple.replace(/(:|\.|\[|\]|\{|\}|\$)/g,""),t&&h('input[name="'+t+'"]').each(function(t,e){var i=d.getType(e);"radio"!==i&&"checkbox"!==i||e.setAttribute(r.options.namespace+"multiple",r.options.multiple)});for(var i=this._findRelated(),n=0;n<i.length;n++)if(void 0!==(e=h(i.get(n)).data("Parsley"))){this.$element.data("FieldMultiple")||e.addElement(this.$element);break}return this.bind("parsleyField",!0),e||this.bind("parsleyFieldMultiple")},bind:function(t,e){var i;switch(t){case"parsleyForm":i=h.extend(new y(this.element,this.domOptions,this.options),new r,window.ParsleyExtend)._bindFields();break;case"parsleyField":i=h.extend(new w(this.element,this.domOptions,this.options,this.parent),new r,window.ParsleyExtend);break;case"parsleyFieldMultiple":i=h.extend(new w(this.element,this.domOptions,this.options,this.parent),new C,new r,window.ParsleyExtend)._init();break;default:throw new Error(t+"is not a supported Parsley type")}return this.options.multiple&&d.setAttr(this.element,this.options.namespace,"multiple",this.options.multiple),void 0!==e?this.$element.data("FieldMultiple",i):(this.$element.data("Parsley",i),i._actualizeTriggers(),i._trigger("init")),i}};var E=h.fn.jquery.split(".");if(parseInt(E[0])<=1&&parseInt(E[1])<8)throw"The loaded version of jQuery is too old. Please upgrade to 1.8.x or better.";E.forEach||d.warn("Parsley requires ES5 to run properly. Please include https://github.com/es-shims/es5-shim");var x=l(new r,{element:document,$element:h(document),actualizeOptions:null,_resetOptions:null,Factory:A,version:"2.9.2"});l(w.prototype,v.Field,r.prototype),l(y.prototype,v.Form,r.prototype),l(A.prototype,r.prototype),h.fn.parsley=h.fn.psly=function(t){if(1<this.length){var e=[];return this.each(function(){e.push(h(this).parsley(t))}),e}if(0!=this.length)return new A(this[0],t)},void 0===window.ParsleyExtend&&(window.ParsleyExtend={}),x.options=l(d.objectCreate(s),window.ParsleyConfig),window.ParsleyConfig=x.options,window.Parsley=window.psly=x,x.Utils=d,window.ParsleyUtils={},h.each(d,function(t,e){"function"==typeof e&&(window.ParsleyUtils[t]=function(){return d.warnOnce("Accessing `window.ParsleyUtils` is deprecated. Use `window.Parsley.Utils` instead."),d[t].apply(d,arguments)})});var $=window.Parsley._validatorRegistry=new a(window.ParsleyConfig.validators,window.ParsleyConfig.i18n);window.ParsleyValidator={},h.each("setLocale addCatalog addMessage addMessages getErrorMessage formatMessage addValidator updateValidator removeValidator hasValidator".split(" "),function(t,e){window.Parsley[e]=function(){return $[e].apply($,arguments)},window.ParsleyValidator[e]=function(){var t;return d.warnOnce("Accessing the method '".concat(e,"' through Validator is deprecated. Simply call 'window.Parsley.").concat(e,"(...)'")),(t=window.Parsley)[e].apply(t,arguments)}}),window.Parsley.UI=v,window.ParsleyUI={removeError:function(t,e,i){var r=!0!==i;return d.warnOnce("Accessing UI is deprecated. Call 'removeError' on the instance directly. Please comment in issue 1073 as to your need to call this method."),t.removeError(e,{updateClass:r})},getErrorsMessages:function(t){return d.warnOnce("Accessing UI is deprecated. Call 'getErrorsMessages' on the instance directly."),t.getErrorsMessages()}},h.each("addError updateError".split(" "),function(t,a){window.ParsleyUI[a]=function(t,e,i,r,n){var s=!0!==n;return d.warnOnce("Accessing UI is deprecated. Call '".concat(a,"' on the instance directly. Please comment in issue 1073 as to your need to call this method.")),t[a](e,{message:i,assert:r,updateClass:s})}}),!1!==window.ParsleyConfig.autoBind&&h(function(){h("[data-parsley-validate]").length&&h("[data-parsley-validate]").parsley()});function V(){d.warnOnce("Parsley's pubsub module is deprecated; use the 'on' and 'off' methods on parsley instances or window.Parsley")}var P=h({});function O(e,i){return e.parsleyAdaptedCallback||(e.parsleyAdaptedCallback=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(this),e.apply(i||P,t)}),e.parsleyAdaptedCallback}var T="parsley:";function M(t){return 0===t.lastIndexOf(T,0)?t.substr(T.length):t}return h.listen=function(t,e){var i;if(V(),"object"===n(arguments[1])&&"function"==typeof arguments[2]&&(i=arguments[1],e=arguments[2]),"function"!=typeof e)throw new Error("Wrong parameters");window.Parsley.on(M(t),O(e,i))},h.listenTo=function(t,e,i){if(V(),!(t instanceof w||t instanceof y))throw new Error("Must give Parsley instance");if("string"!=typeof e||"function"!=typeof i)throw new Error("Wrong parameters");t.on(M(e),O(i))},h.unsubscribe=function(t,e){if(V(),"string"!=typeof t||"function"!=typeof e)throw new Error("Wrong arguments");window.Parsley.off(M(t),e.parsleyAdaptedCallback)},h.unsubscribeTo=function(t,e){if(V(),!(t instanceof w||t instanceof y))throw new Error("Must give Parsley instance");t.off(M(e))},h.unsubscribeAll=function(e){V(),window.Parsley.off(M(e)),h("form,input,textarea,select").each(function(){var t=h(this).data("Parsley");t&&t.off(M(e))})},h.emit=function(t,e){V();var i=e instanceof w||e instanceof y,r=Array.prototype.slice.call(arguments,i?2:1);r.unshift(M(t)),i||(e=window.Parsley),e.trigger.apply(e,u(r))},h.extend(!0,x,{asyncValidators:{default:{fn:function(t){return 200<=t.status&&t.status<300},url:!1},reverse:{fn:function(t){return t.status<200||300<=t.status},url:!1}},addAsyncValidator:function(t,e,i,r){return x.asyncValidators[t]={fn:e,url:i||!1,options:r||{}},this}}),x.addValidator("remote",{requirementType:{"":"string",validator:"string",reverse:"boolean",options:"object"},validateString:function(t,e,i,r){var n,s,a={},o=i.validator||(!0===i.reverse?"reverse":"default");if(void 0===x.asyncValidators[o])throw new Error("Calling an undefined async validator: `"+o+"`");-1<(e=x.asyncValidators[o].url||e).indexOf("{value}")?e=e.replace("{value}",encodeURIComponent(t)):a[r.element.getAttribute("name")||r.element.getAttribute("id")]=t;var l=h.extend(!0,i.options||{},x.asyncValidators[o].options);n=h.extend(!0,{},{url:e,data:a,type:"GET"},l),r.trigger("field:ajaxoptions",r,n),s=h.param(n),void 0===x._remoteCache&&(x._remoteCache={});function u(){var t=x.asyncValidators[o].fn.call(r,d,e,i);return t=t||h.Deferred().reject(),h.when(t)}var d=x._remoteCache[s]=x._remoteCache[s]||h.ajax(n);return d.then(u,u)},priority:-1}),x.on("form:submit",function(){x._remoteCache={}}),r.prototype.addAsyncValidator=function(){return d.warnOnce("Accessing the method `addAsyncValidator` through an instance is deprecated. Simply call `Parsley.addAsyncValidator(...)`"),x.addAsyncValidator.apply(x,arguments)},x.addMessages("en",{defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",number:"This value should be a valid number.",integer:"This value should be a valid integer.",digits:"This value should be digits.",alphanum:"This value should be alphanumeric."},notblank:"This value should not be blank.",required:"This value is required.",pattern:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or fewer.",length:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or fewer.",check:"You must select between %s and %s choices.",equalto:"This value should be the same.",euvatin:"It's not a valid VAT Identification Number."}),x.setLocale("en"),(new function(){var r=this,n=window||global;l(this,{isNativeEvent:function(t){return t.originalEvent&&!1!==t.originalEvent.isTrusted},fakeInputEvent:function(t){r.isNativeEvent(t)&&h(t.target).trigger("input")},misbehaves:function(t){r.isNativeEvent(t)&&(r.behavesOk(t),h(document).on("change.inputevent",t.data.selector,r.fakeInputEvent),r.fakeInputEvent(t))},behavesOk:function(t){r.isNativeEvent(t)&&h(document).off("input.inputevent",t.data.selector,r.behavesOk).off("change.inputevent",t.data.selector,r.misbehaves)},install:function(){if(!n.inputEventPatched){n.inputEventPatched="0.0.3";for(var t=0,e=["select",'input[type="checkbox"]','input[type="radio"]','input[type="file"]'];t<e.length;t++){var i=e[t];h(document).on("input.inputevent",i,{selector:i},r.behavesOk).on("change.inputevent",i,{selector:i},r.misbehaves)}}},uninstall:function(){delete n.inputEventPatched,h(document).off(".inputevent")}})}).install(),x});
+!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):(t=t||self).parsley=e(t.jQuery)}(this,function(h){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}).apply(this,arguments)}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var i=[],r=!0,n=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(t){n=!0,s=t}finally{try{r||null==o.return||o.return()}finally{if(n)throw s}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var t=1,e={},d={attr:function(t,e,i){var r,n,s,a=new RegExp("^"+e,"i");if(void 0===i)i={};else for(r in i)i.hasOwnProperty(r)&&delete i[r];if(!t)return i;for(r=(s=t.attributes).length;r--;)(n=s[r])&&n.specified&&a.test(n.name)&&(i[this.camelize(n.name.slice(e.length))]=this.deserializeValue(n.value));return i},checkAttr:function(t,e,i){return t.hasAttribute(e+i)},setAttr:function(t,e,i,r){t.setAttribute(this.dasherize(e+i),String(r))},getType:function(t){return t.getAttribute("type")||"text"},generateID:function(){return""+t++},deserializeValue:function(e){var t;try{return e?"true"==e||"false"!=e&&("null"==e?null:isNaN(t=Number(e))?/^[\[\{]/.test(e)?JSON.parse(e):e:t):e}catch(t){return e}},camelize:function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},dasherize:function(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},warn:function(){var t;window.console&&"function"==typeof window.console.warn&&(t=window.console).warn.apply(t,arguments)},warnOnce:function(t){e[t]||(e[t]=!0,this.warn.apply(this,arguments))},_resetWarnings:function(){e={}},trimString:function(t){return t.replace(/^\s+|\s+$/g,"")},parse:{date:function(t){var e=t.match(/^(\d{4,})-(\d\d)-(\d\d)$/);if(!e)return null;var i=o(e.map(function(t){return parseInt(t,10)}),4),r=(i[0],i[1]),n=i[2],s=i[3],a=new Date(r,n-1,s);return a.getFullYear()!==r||a.getMonth()+1!==n||a.getDate()!==s?null:a},string:function(t){return t},integer:function(t){return isNaN(t)?null:parseInt(t,10)},number:function(t){if(isNaN(t))throw null;return parseFloat(t)},boolean:function(t){return!/^\s*false\s*$/i.test(t)},object:function(t){return d.deserializeValue(t)},regexp:function(t){var e="";return t=/^\/.*\/(?:[gimy]*)$/.test(t)?(e=t.replace(/.*\/([gimy]*)$/,"$1"),t.replace(new RegExp("^/(.*?)/"+e+"$"),"$1")):"^"+t+"$",new RegExp(t,e)}},parseRequirement:function(t,e){var i=this.parse[t||"string"];if(!i)throw'Unknown requirement specification: "'+t+'"';var r=i(e);if(null===r)throw"Requirement is not a ".concat(t,': "').concat(e,'"');return r},namespaceEvents:function(t,e){return(t=this.trimString(t||"").split(/\s+/))[0]?h.map(t,function(t){return"".concat(t,".").concat(e)}).join(" "):""},difference:function(t,i){var r=[];return h.each(t,function(t,e){-1==i.indexOf(e)&&r.push(e)}),r},all:function(t){return h.when.apply(h,u(t).concat([42,42]))},objectCreate:Object.create||function(t){if(1<arguments.length)throw Error("Second argument not supported");if("object"!=n(t))throw TypeError("Argument must be an object");i.prototype=t;var e=new i;return i.prototype=null,e},_SubmitSelector:'input[type="submit"], button:submit'};function i(){}function r(){this.__id__=d.generateID()}var s={namespace:"data-parsley-",inputs:"input, textarea, select",excluded:"input[type=button], input[type=submit], input[type=reset], input[type=hidden]",priorityEnabled:!0,multiple:null,group:null,uiEnabled:!0,validationThreshold:3,focus:"first",trigger:!1,triggerAfterFailure:"input",errorClass:"parsley-error",successClass:"parsley-success",classHandler:function(){},errorsContainer:function(){},errorsWrapper:'<ul class="parsley-errors-list"></ul>',errorTemplate:"<li></li>"};r.prototype={asyncSupport:!0,_pipeAccordingToValidationResult:function(){function t(){var t=h.Deferred();return!0!==e.validationResult&&t.reject(),t.resolve().promise()}var e=this;return[t,t]},actualizeOptions:function(){return d.attr(this.element,this.options.namespace,this.domOptions),this.parent&&this.parent.actualizeOptions&&this.parent.actualizeOptions(),this},_resetOptions:function(t){for(var e in this.domOptions=d.objectCreate(this.parent.options),this.options=d.objectCreate(this.domOptions),t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);this.actualizeOptions()},_listeners:null,on:function(t,e){return this._listeners=this._listeners||{},(this._listeners[t]=this._listeners[t]||[]).push(e),this},subscribe:function(t,e){h.listenTo(this,t.toLowerCase(),e)},off:function(t,e){var i=this._listeners&&this._listeners[t];if(i)if(e)for(var r=i.length;r--;)i[r]===e&&i.splice(r,1);else delete this._listeners[t];return this},unsubscribe:function(t){h.unsubscribeTo(this,t.toLowerCase())},trigger:function(t,e,i){e=e||this;var r,n=this._listeners&&this._listeners[t];if(n)for(var s=n.length;s--;)if(!1===(r=n[s].call(e,e,i)))return r;return!this.parent||this.parent.trigger(t,e,i)},asyncIsValid:function(t,e){return d.warnOnce("asyncIsValid is deprecated; please use whenValid instead"),this.whenValid({group:t,force:e})},_findRelated:function(){return this.options.multiple?h(this.parent.element.querySelectorAll("[".concat(this.options.namespace,'multiple="').concat(this.options.multiple,'"]'))):this.$element}};function c(t){h.extend(!0,this,t)}c.prototype={validate:function(t,e){if(this.fn)return 3<arguments.length&&(e=[].slice.call(arguments,1,-1)),this.fn(t,e);if(Array.isArray(t)){if(!this.validateMultiple)throw"Validator `"+this.name+"` does not handle multiple values";return this.validateMultiple.apply(this,arguments)}var i=arguments[arguments.length-1];if(this.validateDate&&i._isDateInput())return arguments[0]=d.parse.date(arguments[0]),null!==arguments[0]&&this.validateDate.apply(this,arguments);if(this.validateNumber)return!t||!isNaN(t)&&(arguments[0]=parseFloat(arguments[0]),this.validateNumber.apply(this,arguments));if(this.validateString)return this.validateString.apply(this,arguments);throw"Validator `"+this.name+"` only handles multiple values"},parseRequirements:function(t,e){if("string"!=typeof t)return Array.isArray(t)?t:[t];var i=this.requirementType;if(Array.isArray(i)){for(var r=function(t,e){var i=t.match(/^\s*\[(.*)\]\s*$/);if(!i)throw'Requirement is not an array: "'+t+'"';var r=i[1].split(",").map(d.trimString);if(r.length!==e)throw"Requirement has "+r.length+" values when "+e+" are needed";return r}(t,i.length),n=0;n<r.length;n++)r[n]=d.parseRequirement(i[n],r[n]);return r}return h.isPlainObject(i)?function(t,e,i){var r=null,n={};for(var s in t)if(s){var a=i(s);"string"==typeof a&&(a=d.parseRequirement(t[s],a)),n[s]=a}else r=d.parseRequirement(t[s],e);return[r,n]}(i,t,e):[d.parseRequirement(i,t)]},requirementType:"string",priority:2};function a(t,e){this.__class__="ValidatorRegistry",this.locale="en",this.init(t||{},e||{})}var p={email:/^((([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))$/,number:/^-?(\d*\.)?\d+(e[-+]?\d+)?$/i,integer:/^-?\d+$/,digits:/^\d+$/,alphanum:/^\w+$/i,date:{test:function(t){return null!==d.parse.date(t)}},url:new RegExp("^(?:(?:https?|ftp)://)?(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-zA-Z\\u00a1-\\uffff0-9]-*)*[a-zA-Z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-zA-Z\\u00a1-\\uffff0-9]-*)*[a-zA-Z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-zA-Z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/\\S*)?$")};p.range=p.number;function f(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}function m(s,a){return function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return i.pop(),a.apply(void 0,[t].concat(u((n=s,i.map(d.parse[n])))));var n}}function g(t){return{validateDate:m("date",t),validateNumber:m("number",t),requirementType:t.length<=2?"string":["string","string"],priority:30}}a.prototype={init:function(t,e){for(var i in this.catalog=e,this.validators=l({},this.validators),t)this.addValidator(i,t[i].fn,t[i].priority);window.Parsley.trigger("parsley:validator:init")},setLocale:function(t){if(void 0===this.catalog[t])throw new Error(t+" is not available in the catalog");return this.locale=t,this},addCatalog:function(t,e,i){return"object"===n(e)&&(this.catalog[t]=e),!0===i?this.setLocale(t):this},addMessage:function(t,e,i){return void 0===this.catalog[t]&&(this.catalog[t]={}),this.catalog[t][e]=i,this},addMessages:function(t,e){for(var i in e)this.addMessage(t,i,e[i]);return this},addValidator:function(t,e,i){if(this.validators[t])d.warn('Validator "'+t+'" is already defined.');else if(s.hasOwnProperty(t))return void d.warn('"'+t+'" is a restricted keyword and is not a valid validator name.');return this._setValidator.apply(this,arguments)},hasValidator:function(t){return!!this.validators[t]},updateValidator:function(t,e,i){return this.validators[t]?this._setValidator.apply(this,arguments):(d.warn('Validator "'+t+'" is not already defined.'),this.addValidator.apply(this,arguments))},removeValidator:function(t){return this.validators[t]||d.warn('Validator "'+t+'" is not defined.'),delete this.validators[t],this},_setValidator:function(t,e,i){for(var r in"object"!==n(e)&&(e={fn:e,priority:i}),e.validate||(e=new c(e)),(this.validators[t]=e).messages||{})this.addMessage(r,t,e.messages[r]);return this},getErrorMessage:function(t){var e;"type"===t.name?e=(this.catalog[this.locale][t.name]||{})[t.requirements]:e=this.formatMessage(this.catalog[this.locale][t.name],t.requirements);return e||this.catalog[this.locale].defaultMessage||this.catalog.en.defaultMessage},formatMessage:function(t,e){if("object"!==n(e))return"string"==typeof t?t.replace(/%s/i,e):"";for(var i in e)t=this.formatMessage(t,e[i]);return t},validators:{notblank:{validateString:function(t){return/\S/.test(t)},priority:2},required:{validateMultiple:function(t){return 0<t.length},validateString:function(t){return/\S/.test(t)},priority:512},type:{validateString:function(t,e,i){var r=2<arguments.length&&void 0!==i?i:{},n=r.step,s=void 0===n?"any":n,a=r.base,o=void 0===a?0:a,l=p[e];if(!l)throw new Error("validator type `"+e+"` is not supported");if(!t)return!0;if(!l.test(t))return!1;if("number"===e&&!/^any$/i.test(s||"")){var u=Number(t),d=Math.max(f(s),f(o));if(f(u)>d)return!1;var h=function(t){return Math.round(t*Math.pow(10,d))};if((h(u)-h(o))%h(s)!=0)return!1}return!0},requirementType:{"":"string",step:"string",base:"number"},priority:256},pattern:{validateString:function(t,e){return!t||e.test(t)},requirementType:"regexp",priority:64},minlength:{validateString:function(t,e){return!t||t.length>=e},requirementType:"integer",priority:30},maxlength:{validateString:function(t,e){return t.length<=e},requirementType:"integer",priority:30},length:{validateString:function(t,e,i){return!t||t.length>=e&&t.length<=i},requirementType:["integer","integer"],priority:30},mincheck:{validateMultiple:function(t,e){return t.length>=e},requirementType:"integer",priority:30},maxcheck:{validateMultiple:function(t,e){return t.length<=e},requirementType:"integer",priority:30},check:{validateMultiple:function(t,e,i){return t.length>=e&&t.length<=i},requirementType:["integer","integer"],priority:30},min:g(function(t,e){return e<=t}),max:g(function(t,e){return t<=e}),range:g(function(t,e,i){return e<=t&&t<=i}),equalto:{validateString:function(t,e){if(!t)return!0;var i=h(e);return i.length?t===i.val():t===e},priority:256},euvatin:{validateString:function(t){if(!t)return!0;return/^[A-Z][A-Z][A-Za-z0-9 -]{2,}$/.test(t)},priority:30}}};var v={};v.Form={_actualizeTriggers:function(){var e=this;this.$element.on("submit.Parsley",function(t){e.onSubmitValidate(t)}),this.$element.on("click.Parsley",d._SubmitSelector,function(t){e.onSubmitButton(t)}),!1!==this.options.uiEnabled&&this.element.setAttribute("novalidate","")},focus:function(){if(!(this._focusedField=null)===this.validationResult||"none"===this.options.focus)return null;for(var t=0;t<this.fields.length;t++){var e=this.fields[t];if(!0!==e.validationResult&&0<e.validationResult.length&&void 0===e.options.noFocus&&(this._focusedField=e.$element,"first"===this.options.focus))break}return null===this._focusedField?null:this._focusedField.trigger('focus')},_destroyUI:function(){this.$element.off(".Parsley")}},v.Field={_reflowUI:function(){if(this._buildUI(),this._ui){var t=function t(e,i,r){for(var n=[],s=[],a=0;a<e.length;a++){for(var o=!1,l=0;l<i.length;l++)if(e[a].assert.name===i[l].assert.name){o=!0;break}o?s.push(e[a]):n.push(e[a])}return{kept:s,added:n,removed:r?[]:t(i,e,!0).added}}(this.validationResult,this._ui.lastValidationResult);this._ui.lastValidationResult=this.validationResult,this._manageStatusClass(),this._manageErrorsMessages(t),this._actualizeTriggers(),!t.kept.length&&!t.added.length||this._failedOnce||(this._failedOnce=!0,this._actualizeTriggers())}},getErrorsMessages:function(){if(!0===this.validationResult)return[];for(var t=[],e=0;e<this.validationResult.length;e++)t.push(this.validationResult[e].errorMessage||this._getErrorMessage(this.validationResult[e].assert));return t},addError:function(t,e){var i=1<arguments.length&&void 0!==e?e:{},r=i.message,n=i.assert,s=i.updateClass,a=void 0===s||s;this._buildUI(),this._addError(t,{message:r,assert:n}),a&&this._errorClass()},updateError:function(t,e){var i=1<arguments.length&&void 0!==e?e:{},r=i.message,n=i.assert,s=i.updateClass,a=void 0===s||s;this._buildUI(),this._updateError(t,{message:r,assert:n}),a&&this._errorClass()},removeError:function(t,e){var i=(1<arguments.length&&void 0!==e?e:{}).updateClass,r=void 0===i||i;this._buildUI(),this._removeError(t),r&&this._manageStatusClass()},_manageStatusClass:function(){this.hasConstraints()&&this.needsValidation()&&!0===this.validationResult?this._successClass():0<this.validationResult.length?this._errorClass():this._resetClass()},_manageErrorsMessages:function(t){if(void 0===this.options.errorsMessagesDisabled){if(void 0!==this.options.errorMessage)return t.added.length||t.kept.length?(this._insertErrorWrapper(),0===this._ui.$errorsWrapper.find(".parsley-custom-error-message").length&&this._ui.$errorsWrapper.append(h(this.options.errorTemplate).addClass("parsley-custom-error-message")),this._ui.$errorClassHandler.attr("aria-describedby",this._ui.errorsWrapperId),this._ui.$errorsWrapper.addClass("filled").attr("aria-hidden","false").find(".parsley-custom-error-message").html(this.options.errorMessage)):(this._ui.$errorClassHandler.removeAttr("aria-describedby"),this._ui.$errorsWrapper.removeClass("filled").attr("aria-hidden","true").find(".parsley-custom-error-message").remove());for(var e=0;e<t.removed.length;e++)this._removeError(t.removed[e].assert.name);for(e=0;e<t.added.length;e++)this._addError(t.added[e].assert.name,{message:t.added[e].errorMessage,assert:t.added[e].assert});for(e=0;e<t.kept.length;e++)this._updateError(t.kept[e].assert.name,{message:t.kept[e].errorMessage,assert:t.kept[e].assert})}},_addError:function(t,e){var i=e.message,r=e.assert;this._insertErrorWrapper(),this._ui.$errorClassHandler.attr("aria-describedby",this._ui.errorsWrapperId),this._ui.$errorsWrapper.addClass("filled").attr("aria-hidden","false").append(h(this.options.errorTemplate).addClass("parsley-"+t).html(i||this._getErrorMessage(r)))},_updateError:function(t,e){var i=e.message,r=e.assert;this._ui.$errorsWrapper.addClass("filled").find(".parsley-"+t).html(i||this._getErrorMessage(r))},_removeError:function(t){this._ui.$errorClassHandler.removeAttr("aria-describedby"),this._ui.$errorsWrapper.removeClass("filled").attr("aria-hidden","true").find(".parsley-"+t).remove()},_getErrorMessage:function(t){var e=t.name+"Message";return void 0!==this.options[e]?window.Parsley.formatMessage(this.options[e],t.requirements):window.Parsley.getErrorMessage(t)},_buildUI:function(){if(!this._ui&&!1!==this.options.uiEnabled){var t={};this.element.setAttribute(this.options.namespace+"id",this.__id__),t.$errorClassHandler=this._manageClassHandler(),t.errorsWrapperId="parsley-id-"+(this.options.multiple?"multiple-"+this.options.multiple:this.__id__),t.$errorsWrapper=h(this.options.errorsWrapper).attr("id",t.errorsWrapperId),t.lastValidationResult=[],t.validationInformationVisible=!1,this._ui=t}},_manageClassHandler:function(){if("string"==typeof this.options.classHandler&&h(this.options.classHandler).length)return h(this.options.classHandler);var t=this.options.classHandler;if("string"==typeof this.options.classHandler&&"function"==typeof window[this.options.classHandler]&&(t=window[this.options.classHandler]),"function"==typeof t){var e=t.call(this,this);if(void 0!==e&&e.length)return e}else{if("object"===n(t)&&t instanceof jQuery&&t.length)return t;t&&d.warn("The class handler `"+t+"` does not exist in DOM nor as a global JS function")}return this._inputHolder()},_inputHolder:function(){return this.options.multiple&&"SELECT"!==this.element.nodeName?this.$element.parent():this.$element},_insertErrorWrapper:function(){var t=this.options.errorsContainer;if(0!==this._ui.$errorsWrapper.parent().length)return this._ui.$errorsWrapper.parent();if("string"==typeof t){if(h(t).length)return h(t).append(this._ui.$errorsWrapper);"function"==typeof window[t]?t=window[t]:d.warn("The errors container `"+t+"` does not exist in DOM nor as a global JS function")}return"function"==typeof t&&(t=t.call(this,this)),"object"===n(t)&&t.length?t.append(this._ui.$errorsWrapper):this._inputHolder().after(this._ui.$errorsWrapper)},_actualizeTriggers:function(){var t,e=this,i=this._findRelated();i.off(".Parsley"),this._failedOnce?i.on(d.namespaceEvents(this.options.triggerAfterFailure,"Parsley"),function(){e._validateIfNeeded()}):(t=d.namespaceEvents(this.options.trigger,"Parsley"))&&i.on(t,function(t){e._validateIfNeeded(t)})},_validateIfNeeded:function(t){var e=this;t&&/key|input/.test(t.type)&&(!this._ui||!this._ui.validationInformationVisible)&&this.getValue().length<=this.options.validationThreshold||(this.options.debounce?(window.clearTimeout(this._debounced),this._debounced=window.setTimeout(function(){return e.validate()},this.options.debounce)):this.validate())},_resetUI:function(){this._failedOnce=!1,this._actualizeTriggers(),void 0!==this._ui&&(this._ui.$errorsWrapper.removeClass("filled").children().remove(),this._resetClass(),this._ui.lastValidationResult=[],this._ui.validationInformationVisible=!1)},_destroyUI:function(){this._resetUI(),void 0!==this._ui&&this._ui.$errorsWrapper.remove(),delete this._ui},_successClass:function(){this._ui.validationInformationVisible=!0,this._ui.$errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass)},_errorClass:function(){this._ui.validationInformationVisible=!0,this._ui.$errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass)},_resetClass:function(){this._ui.$errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass)}};function y(t,e,i){this.__class__="Form",this.element=t,this.$element=h(t),this.domOptions=e,this.options=i,this.parent=window.Parsley,this.fields=[],this.validationResult=null}var _={pending:null,resolved:!0,rejected:!1};y.prototype={onSubmitValidate:function(t){var e=this;if(!0!==t.parsley){var i=this._submitSource||this.$element.find(d._SubmitSelector)[0];if(this._submitSource=null,this.$element.find(".parsley-synthetic-submit-button").prop("disabled",!0),!i||null===i.getAttribute("formnovalidate")){window.Parsley._remoteCache={};var r=this.whenValidate({event:t});"resolved"===r.state()&&!1!==this._trigger("submit")||(t.stopImmediatePropagation(),t.preventDefault(),"pending"===r.state()&&r.done(function(){e._submit(i)}))}}},onSubmitButton:function(t){this._submitSource=t.currentTarget},_submit:function(t){if(!1!==this._trigger("submit")){if(t){var e=this.$element.find(".parsley-synthetic-submit-button").prop("disabled",!1);0===e.length&&(e=h('<input class="parsley-synthetic-submit-button" type="hidden">').appendTo(this.$element)),e.attr({name:t.getAttribute("name"),value:t.getAttribute("value")})}this.$element.trigger(l(h.Event("submit"),{parsley:!0}))}},validate:function(t){if(1<=arguments.length&&!h.isPlainObject(t)){d.warnOnce("Calling validate on a parsley form without passing arguments as an object is deprecated.");var e=Array.prototype.slice.call(arguments);t={group:e[0],force:e[1],event:e[2]}}return _[this.whenValidate(t).state()]},whenValidate:function(t){var e,i=this,r=0<arguments.length&&void 0!==t?t:{},n=r.group,s=r.force,a=r.event;(this.submitEvent=a)&&(this.submitEvent=l({},a,{preventDefault:function(){d.warnOnce("Using `this.submitEvent.preventDefault()` is deprecated; instead, call `this.validationResult = false`"),i.validationResult=!1}})),this.validationResult=!0,this._trigger("validate"),this._refreshFields();var o=this._withoutReactualizingFormOptions(function(){return h.map(i.fields,function(t){return t.whenValidate({force:s,group:n})})});return(e=d.all(o).done(function(){i._trigger("success")}).fail(function(){i.validationResult=!1,i.focus(),i._trigger("error")}).always(function(){i._trigger("validated")})).pipe.apply(e,u(this._pipeAccordingToValidationResult()))},isValid:function(t){if(1<=arguments.length&&!h.isPlainObject(t)){d.warnOnce("Calling isValid on a parsley form without passing arguments as an object is deprecated.");var e=Array.prototype.slice.call(arguments);t={group:e[0],force:e[1]}}return _[this.whenValid(t).state()]},whenValid:function(t){var e=this,i=0<arguments.length&&void 0!==t?t:{},r=i.group,n=i.force;this._refreshFields();var s=this._withoutReactualizingFormOptions(function(){return h.map(e.fields,function(t){return t.whenValid({group:r,force:n})})});return d.all(s)},refresh:function(){return this._refreshFields(),this},reset:function(){for(var t=0;t<this.fields.length;t++)this.fields[t].reset();this._trigger("reset")},destroy:function(){this._destroyUI();for(var t=0;t<this.fields.length;t++)this.fields[t].destroy();this.$element.removeData("Parsley"),this._trigger("destroy")},_refreshFields:function(){return this.actualizeOptions()._bindFields()},_bindFields:function(){var n=this,t=this.fields;return this.fields=[],this.fieldsMappedById={},this._withoutReactualizingFormOptions(function(){n.$element.find(n.options.inputs).not(n.options.excluded).not("[".concat(n.options.namespace,"excluded=true]")).each(function(t,e){var i=new window.Parsley.Factory(e,{},n);if("Field"===i.__class__||"FieldMultiple"===i.__class__){var r=i.__class__+"-"+i.__id__;void 0===n.fieldsMappedById[r]&&(n.fieldsMappedById[r]=i,n.fields.push(i))}}),h.each(d.difference(t,n.fields),function(t,e){e.reset()})}),this},_withoutReactualizingFormOptions:function(t){var e=this.actualizeOptions;this.actualizeOptions=function(){return this};var i=t();return this.actualizeOptions=e,i},_trigger:function(t){return this.trigger("form:"+t)}};function b(t,e,i,r,n){var s=window.Parsley._validatorRegistry.validators[e],a=new c(s);l(this,{validator:a,name:e,requirements:i,priority:r=r||t.options[e+"Priority"]||a.priority,isDomConstraint:n=!0===n}),this._parseRequirements(t.options)}function w(t,e,i,r){this.__class__="Field",this.element=t,this.$element=h(t),void 0!==r&&(this.parent=r),this.options=i,this.domOptions=e,this.constraints=[],this.constraintsByName={},this.validationResult=!0,this._bindConstraints()}var F={pending:null,resolved:!0,rejected:!(b.prototype={validate:function(t,e){var i;return(i=this.validator).validate.apply(i,[t].concat(u(this.requirementList),[e]))},_parseRequirements:function(i){var r=this;this.requirementList=this.validator.parseRequirements(this.requirements,function(t){return i[r.name+((e=t)[0].toUpperCase()+e.slice(1))];var e})}})};w.prototype={validate:function(t){1<=arguments.length&&!h.isPlainObject(t)&&(d.warnOnce("Calling validate on a parsley field without passing arguments as an object is deprecated."),t={options:t});var e=this.whenValidate(t);if(!e)return!0;switch(e.state()){case"pending":return null;case"resolved":return!0;case"rejected":return this.validationResult}},whenValidate:function(t){var e,i=this,r=0<arguments.length&&void 0!==t?t:{},n=r.force,s=r.group;if(this.refresh(),!s||this._isInGroup(s))return this.value=this.getValue(),this._trigger("validate"),(e=this.whenValid({force:n,value:this.value,_refreshed:!0}).always(function(){i._reflowUI()}).done(function(){i._trigger("success")}).fail(function(){i._trigger("error")}).always(function(){i._trigger("validated")})).pipe.apply(e,u(this._pipeAccordingToValidationResult()))},hasConstraints:function(){return 0!==this.constraints.length},needsValidation:function(t){return void 0===t&&(t=this.getValue()),!(!t.length&&!this._isRequired()&&void 0===this.options.validateIfEmpty)},_isInGroup:function(t){return Array.isArray(this.options.group)?-1!==h.inArray(t,this.options.group):this.options.group===t},isValid:function(t){if(1<=arguments.length&&!h.isPlainObject(t)){d.warnOnce("Calling isValid on a parsley field without passing arguments as an object is deprecated.");var e=Array.prototype.slice.call(arguments);t={force:e[0],value:e[1]}}var i=this.whenValid(t);return!i||F[i.state()]},whenValid:function(t){var r=this,e=0<arguments.length&&void 0!==t?t:{},i=e.force,n=void 0!==i&&i,s=e.value,a=e.group;if(e._refreshed||this.refresh(),!a||this._isInGroup(a)){if(this.validationResult=!0,!this.hasConstraints())return h.when();if(null==s&&(s=this.getValue()),!this.needsValidation(s)&&!0!==n)return h.when();var o=this._getGroupedConstraints(),l=[];return h.each(o,function(t,e){var i=d.all(h.map(e,function(t){return r._validateConstraint(s,t)}));if(l.push(i),"rejected"===i.state())return!1}),d.all(l)}},_validateConstraint:function(t,e){var i=this,r=e.validate(t,this);return!1===r&&(r=h.Deferred().reject()),d.all([r]).fail(function(t){i.validationResult instanceof Array||(i.validationResult=[]),i.validationResult.push({assert:e,errorMessage:"string"==typeof t&&t})})},getValue:function(){var t;return null==(t="function"==typeof this.options.value?this.options.value(this):void 0!==this.options.value?this.options.value:this.$element.val())?"":this._handleWhitespace(t)},reset:function(){return this._resetUI(),this._trigger("reset")},destroy:function(){this._destroyUI(),this.$element.removeData("Parsley"),this.$element.removeData("FieldMultiple"),this._trigger("destroy")},refresh:function(){return this._refreshConstraints(),this},_refreshConstraints:function(){return this.actualizeOptions()._bindConstraints()},refreshConstraints:function(){return d.warnOnce("Parsley's refreshConstraints is deprecated. Please use refresh"),this.refresh()},addConstraint:function(t,e,i,r){if(window.Parsley._validatorRegistry.validators[t]){var n=new b(this,t,e,i,r);"undefined"!==this.constraintsByName[n.name]&&this.removeConstraint(n.name),this.constraints.push(n),this.constraintsByName[n.name]=n}return this},removeConstraint:function(t){for(var e=0;e<this.constraints.length;e++)if(t===this.constraints[e].name){this.constraints.splice(e,1);break}return delete this.constraintsByName[t],this},updateConstraint:function(t,e,i){return this.removeConstraint(t).addConstraint(t,e,i)},_bindConstraints:function(){for(var t=[],e={},i=0;i<this.constraints.length;i++)!1===this.constraints[i].isDomConstraint&&(t.push(this.constraints[i]),e[this.constraints[i].name]=this.constraints[i]);for(var r in this.constraints=t,this.constraintsByName=e,this.options)this.addConstraint(r,this.options[r],void 0,!0);return this._bindHtml5Constraints()},_bindHtml5Constraints:function(){null!==this.element.getAttribute("required")&&this.addConstraint("required",!0,void 0,!0),null!==this.element.getAttribute("pattern")&&this.addConstraint("pattern",this.element.getAttribute("pattern"),void 0,!0);var t=this.element.getAttribute("min"),e=this.element.getAttribute("max");null!==t&&null!==e?this.addConstraint("range",[t,e],void 0,!0):null!==t?this.addConstraint("min",t,void 0,!0):null!==e&&this.addConstraint("max",e,void 0,!0),null!==this.element.getAttribute("minlength")&&null!==this.element.getAttribute("maxlength")?this.addConstraint("length",[this.element.getAttribute("minlength"),this.element.getAttribute("maxlength")],void 0,!0):null!==this.element.getAttribute("minlength")?this.addConstraint("minlength",this.element.getAttribute("minlength"),void 0,!0):null!==this.element.getAttribute("maxlength")&&this.addConstraint("maxlength",this.element.getAttribute("maxlength"),void 0,!0);var i=d.getType(this.element);return"number"===i?this.addConstraint("type",["number",{step:this.element.getAttribute("step")||"1",base:t||this.element.getAttribute("value")}],void 0,!0):/^(email|url|range|date)$/i.test(i)?this.addConstraint("type",i,void 0,!0):this},_isRequired:function(){return void 0!==this.constraintsByName.required&&!1!==this.constraintsByName.required.requirements},_trigger:function(t){return this.trigger("field:"+t)},_handleWhitespace:function(t){return!0===this.options.trimValue&&d.warnOnce('data-parsley-trim-value="true" is deprecated, please use data-parsley-whitespace="trim"'),"squish"===this.options.whitespace&&(t=t.replace(/\s{2,}/g," ")),"trim"!==this.options.whitespace&&"squish"!==this.options.whitespace&&!0!==this.options.trimValue||(t=d.trimString(t)),t},_isDateInput:function(){var t=this.constraintsByName.type;return t&&"date"===t.requirements},_getGroupedConstraints:function(){if(!1===this.options.priorityEnabled)return[this.constraints];for(var t=[],e={},i=0;i<this.constraints.length;i++){var r=this.constraints[i].priority;e[r]||t.push(e[r]=[]),e[r].push(this.constraints[i])}return t.sort(function(t,e){return e[0].priority-t[0].priority}),t}};function C(){this.__class__="FieldMultiple"}C.prototype={addElement:function(t){return this.$elements.push(t),this},_refreshConstraints:function(){var t;if(this.constraints=[],"SELECT"===this.element.nodeName)return this.actualizeOptions()._bindConstraints(),this;for(var e=0;e<this.$elements.length;e++)if(h("html").has(this.$elements[e]).length){t=this.$elements[e].data("FieldMultiple")._refreshConstraints().constraints;for(var i=0;i<t.length;i++)this.addConstraint(t[i].name,t[i].requirements,t[i].priority,t[i].isDomConstraint)}else this.$elements.splice(e,1);return this},getValue:function(){if("function"==typeof this.options.value)return this.options.value(this);if(void 0!==this.options.value)return this.options.value;if("INPUT"===this.element.nodeName){var t=d.getType(this.element);if("radio"===t)return this._findRelated().filter(":checked").val()||"";if("checkbox"===t){var e=[];return this._findRelated().filter(":checked").each(function(){e.push(h(this).val())}),e}}return"SELECT"===this.element.nodeName&&null===this.$element.val()?[]:this.$element.val()},_init:function(){return this.$elements=[this.$element],this}};function A(t,e,i){this.element=t,this.$element=h(t);var r=this.$element.data("Parsley");if(r)return void 0!==i&&r.parent===window.Parsley&&(r.parent=i,r._resetOptions(r.options)),"object"===n(e)&&l(r.options,e),r;if(!this.$element.length)throw new Error("You must bind Parsley on an existing element.");if(void 0!==i&&"Form"!==i.__class__)throw new Error("Parent instance must be a Form instance");return this.parent=i||window.Parsley,this.init(e)}A.prototype={init:function(t){return this.__class__="Parsley",this.__version__="2.9.2",this.__id__=d.generateID(),this._resetOptions(t),"FORM"===this.element.nodeName||d.checkAttr(this.element,this.options.namespace,"validate")&&!this.$element.is(this.options.inputs)?this.bind("parsleyForm"):this.isMultiple()?this.handleMultiple():this.bind("parsleyField")},isMultiple:function(){var t=d.getType(this.element);return"radio"===t||"checkbox"===t||"SELECT"===this.element.nodeName&&null!==this.element.getAttribute("multiple")},handleMultiple:function(){var t,e,r=this;if(this.options.multiple=this.options.multiple||(t=this.element.getAttribute("name"))||this.element.getAttribute("id"),"SELECT"===this.element.nodeName&&null!==this.element.getAttribute("multiple"))return this.options.multiple=this.options.multiple||this.__id__,this.bind("parsleyFieldMultiple");if(!this.options.multiple)return d.warn("To be bound by Parsley, a radio, a checkbox and a multiple select input must have either a name or a multiple option.",this.$element),this;this.options.multiple=this.options.multiple.replace(/(:|\.|\[|\]|\{|\}|\$)/g,""),t&&h('input[name="'+t+'"]').each(function(t,e){var i=d.getType(e);"radio"!==i&&"checkbox"!==i||e.setAttribute(r.options.namespace+"multiple",r.options.multiple)});for(var i=this._findRelated(),n=0;n<i.length;n++)if(void 0!==(e=h(i.get(n)).data("Parsley"))){this.$element.data("FieldMultiple")||e.addElement(this.$element);break}return this.bind("parsleyField",!0),e||this.bind("parsleyFieldMultiple")},bind:function(t,e){var i;switch(t){case"parsleyForm":i=h.extend(new y(this.element,this.domOptions,this.options),new r,window.ParsleyExtend)._bindFields();break;case"parsleyField":i=h.extend(new w(this.element,this.domOptions,this.options,this.parent),new r,window.ParsleyExtend);break;case"parsleyFieldMultiple":i=h.extend(new w(this.element,this.domOptions,this.options,this.parent),new C,new r,window.ParsleyExtend)._init();break;default:throw new Error(t+"is not a supported Parsley type")}return this.options.multiple&&d.setAttr(this.element,this.options.namespace,"multiple",this.options.multiple),void 0!==e?this.$element.data("FieldMultiple",i):(this.$element.data("Parsley",i),i._actualizeTriggers(),i._trigger("init")),i}};var E=h.fn.jquery.split(".");if(parseInt(E[0])<=1&&parseInt(E[1])<8)throw"The loaded version of jQuery is too old. Please upgrade to 1.8.x or better.";E.forEach||d.warn("Parsley requires ES5 to run properly. Please include https://github.com/es-shims/es5-shim");var x=l(new r,{element:document,$element:h(document),actualizeOptions:null,_resetOptions:null,Factory:A,version:"2.9.2"});l(w.prototype,v.Field,r.prototype),l(y.prototype,v.Form,r.prototype),l(A.prototype,r.prototype),h.fn.parsley=h.fn.psly=function(t){if(1<this.length){var e=[];return this.each(function(){e.push(h(this).parsley(t))}),e}if(0!=this.length)return new A(this[0],t)},void 0===window.ParsleyExtend&&(window.ParsleyExtend={}),x.options=l(d.objectCreate(s),window.ParsleyConfig),window.ParsleyConfig=x.options,window.Parsley=window.psly=x,x.Utils=d,window.ParsleyUtils={},h.each(d,function(t,e){"function"==typeof e&&(window.ParsleyUtils[t]=function(){return d.warnOnce("Accessing `window.ParsleyUtils` is deprecated. Use `window.Parsley.Utils` instead."),d[t].apply(d,arguments)})});var $=window.Parsley._validatorRegistry=new a(window.ParsleyConfig.validators,window.ParsleyConfig.i18n);window.ParsleyValidator={},h.each("setLocale addCatalog addMessage addMessages getErrorMessage formatMessage addValidator updateValidator removeValidator hasValidator".split(" "),function(t,e){window.Parsley[e]=function(){return $[e].apply($,arguments)},window.ParsleyValidator[e]=function(){var t;return d.warnOnce("Accessing the method '".concat(e,"' through Validator is deprecated. Simply call 'window.Parsley.").concat(e,"(...)'")),(t=window.Parsley)[e].apply(t,arguments)}}),window.Parsley.UI=v,window.ParsleyUI={removeError:function(t,e,i){var r=!0!==i;return d.warnOnce("Accessing UI is deprecated. Call 'removeError' on the instance directly. Please comment in issue 1073 as to your need to call this method."),t.removeError(e,{updateClass:r})},getErrorsMessages:function(t){return d.warnOnce("Accessing UI is deprecated. Call 'getErrorsMessages' on the instance directly."),t.getErrorsMessages()}},h.each("addError updateError".split(" "),function(t,a){window.ParsleyUI[a]=function(t,e,i,r,n){var s=!0!==n;return d.warnOnce("Accessing UI is deprecated. Call '".concat(a,"' on the instance directly. Please comment in issue 1073 as to your need to call this method.")),t[a](e,{message:i,assert:r,updateClass:s})}}),!1!==window.ParsleyConfig.autoBind&&h(function(){h("[data-parsley-validate]").length&&h("[data-parsley-validate]").parsley()});function V(){d.warnOnce("Parsley's pubsub module is deprecated; use the 'on' and 'off' methods on parsley instances or window.Parsley")}var P=h({});function O(e,i){return e.parsleyAdaptedCallback||(e.parsleyAdaptedCallback=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(this),e.apply(i||P,t)}),e.parsleyAdaptedCallback}var T="parsley:";function M(t){return 0===t.lastIndexOf(T,0)?t.substr(T.length):t}return h.listen=function(t,e){var i;if(V(),"object"===n(arguments[1])&&"function"==typeof arguments[2]&&(i=arguments[1],e=arguments[2]),"function"!=typeof e)throw new Error("Wrong parameters");window.Parsley.on(M(t),O(e,i))},h.listenTo=function(t,e,i){if(V(),!(t instanceof w||t instanceof y))throw new Error("Must give Parsley instance");if("string"!=typeof e||"function"!=typeof i)throw new Error("Wrong parameters");t.on(M(e),O(i))},h.unsubscribe=function(t,e){if(V(),"string"!=typeof t||"function"!=typeof e)throw new Error("Wrong arguments");window.Parsley.off(M(t),e.parsleyAdaptedCallback)},h.unsubscribeTo=function(t,e){if(V(),!(t instanceof w||t instanceof y))throw new Error("Must give Parsley instance");t.off(M(e))},h.unsubscribeAll=function(e){V(),window.Parsley.off(M(e)),h("form,input,textarea,select").each(function(){var t=h(this).data("Parsley");t&&t.off(M(e))})},h.emit=function(t,e){V();var i=e instanceof w||e instanceof y,r=Array.prototype.slice.call(arguments,i?2:1);r.unshift(M(t)),i||(e=window.Parsley),e.trigger.apply(e,u(r))},h.extend(!0,x,{asyncValidators:{default:{fn:function(t){return 200<=t.status&&t.status<300},url:!1},reverse:{fn:function(t){return t.status<200||300<=t.status},url:!1}},addAsyncValidator:function(t,e,i,r){return x.asyncValidators[t]={fn:e,url:i||!1,options:r||{}},this}}),x.addValidator("remote",{requirementType:{"":"string",validator:"string",reverse:"boolean",options:"object"},validateString:function(t,e,i,r){var n,s,a={},o=i.validator||(!0===i.reverse?"reverse":"default");if(void 0===x.asyncValidators[o])throw new Error("Calling an undefined async validator: `"+o+"`");-1<(e=x.asyncValidators[o].url||e).indexOf("{value}")?e=e.replace("{value}",encodeURIComponent(t)):a[r.element.getAttribute("name")||r.element.getAttribute("id")]=t;var l=h.extend(!0,i.options||{},x.asyncValidators[o].options);n=h.extend(!0,{},{url:e,data:a,type:"GET"},l),r.trigger("field:ajaxoptions",r,n),s=h.param(n),void 0===x._remoteCache&&(x._remoteCache={});function u(){var t=x.asyncValidators[o].fn.call(r,d,e,i);return t=t||h.Deferred().reject(),h.when(t)}var d=x._remoteCache[s]=x._remoteCache[s]||h.ajax(n);return d.then(u,u)},priority:-1}),x.on("form:submit",function(){x._remoteCache={}}),r.prototype.addAsyncValidator=function(){return d.warnOnce("Accessing the method `addAsyncValidator` through an instance is deprecated. Simply call `Parsley.addAsyncValidator(...)`"),x.addAsyncValidator.apply(x,arguments)},x.addMessages("en",{defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",number:"This value should be a valid number.",integer:"This value should be a valid integer.",digits:"This value should be digits.",alphanum:"This value should be alphanumeric."},notblank:"This value should not be blank.",required:"This value is required.",pattern:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or fewer.",length:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or fewer.",check:"You must select between %s and %s choices.",equalto:"This value should be the same.",euvatin:"It's not a valid VAT Identification Number."}),x.setLocale("en"),(new function(){var r=this,n=window||global;l(this,{isNativeEvent:function(t){return t.originalEvent&&!1!==t.originalEvent.isTrusted},fakeInputEvent:function(t){r.isNativeEvent(t)&&h(t.target).trigger("input")},misbehaves:function(t){r.isNativeEvent(t)&&(r.behavesOk(t),h(document).on("change.inputevent",t.data.selector,r.fakeInputEvent),r.fakeInputEvent(t))},behavesOk:function(t){r.isNativeEvent(t)&&h(document).off("input.inputevent",t.data.selector,r.behavesOk).off("change.inputevent",t.data.selector,r.misbehaves)},install:function(){if(!n.inputEventPatched){n.inputEventPatched="0.0.3";for(var t=0,e=["select",'input[type="checkbox"]','input[type="radio"]','input[type="file"]'];t<e.length;t++){var i=e[t];h(document).on("input.inputevent",i,{selector:i},r.behavesOk).on("change.inputevent",i,{selector:i},r.misbehaves)}}},uninstall:function(){delete n.inputEventPatched,h(document).off(".inputevent")}})}).install(),x});
 //# sourceMappingURL=parsley.min.js.map
diff --git a/dist/parsley.min.js.map b/dist/parsley.min.js.map
index 26a9dfe14d84d38ed4eaefeb362f5b763d11d095..7f611798a5586adb0eeac1c49a6ab331c2250e2c 100644
--- a/dist/parsley.min.js.map
+++ b/dist/parsley.min.js.map
@@ -1 +1 @@
-{"version":3,"file":"parsley.min.js","sources":["../src/parsley/utils.js","../src/parsley/base.js","../src/parsley/defaults.js","../src/parsley/validator.js","../src/parsley/validator_registry.js","../src/parsley/ui.js","../src/parsley/form.js","../src/parsley/constraint.js","../src/parsley/field.js","../src/parsley/multiple.js","../src/parsley/factory.js","../src/parsley/main.js","../src/parsley/pubsub.js","../src/parsley/remote.js","../src/i18n/en.js","../src/vendor/inputevent.js","../src/parsley.js"],"sourcesContent":["import $ from 'jquery';\n\nvar globalID = 1;\nvar pastWarnings = {};\n\nvar Utils = {\n  // Parsley DOM-API\n  // returns object from dom attributes and values\n  attr: function (element, namespace, obj) {\n    var i;\n    var attribute;\n    var attributes;\n    var regex = new RegExp('^' + namespace, 'i');\n\n    if ('undefined' === typeof obj)\n      obj = {};\n    else {\n      // Clear all own properties. This won't affect prototype's values\n      for (i in obj) {\n        if (obj.hasOwnProperty(i))\n          delete obj[i];\n      }\n    }\n\n    if (!element)\n      return obj;\n\n    attributes = element.attributes;\n    for (i = attributes.length; i--; ) {\n      attribute = attributes[i];\n\n      if (attribute && attribute.specified && regex.test(attribute.name)) {\n        obj[this.camelize(attribute.name.slice(namespace.length))] = this.deserializeValue(attribute.value);\n      }\n    }\n\n    return obj;\n  },\n\n  checkAttr: function (element, namespace, checkAttr) {\n    return element.hasAttribute(namespace + checkAttr);\n  },\n\n  setAttr: function (element, namespace, attr, value) {\n    element.setAttribute(this.dasherize(namespace + attr), String(value));\n  },\n\n  getType: function(element) {\n    return element.getAttribute('type') || 'text';\n  },\n\n  generateID: function () {\n    return '' + globalID++;\n  },\n\n  /** Third party functions **/\n  deserializeValue: function (value) {\n    var num;\n\n    try {\n      return value ?\n        value == \"true\" ||\n        (value == \"false\" ? false :\n        value == \"null\" ? null :\n        !isNaN(num = Number(value)) ? num :\n        /^[\\[\\{]/.test(value) ? JSON.parse(value) :\n        value)\n        : value;\n    } catch (e) { return value; }\n  },\n\n  // Zepto camelize function\n  camelize: function (str) {\n    return str.replace(/-+(.)?/g, function (match, chr) {\n      return chr ? chr.toUpperCase() : '';\n    });\n  },\n\n  // Zepto dasherize function\n  dasherize: function (str) {\n    return str.replace(/::/g, '/')\n      .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')\n      .replace(/([a-z\\d])([A-Z])/g, '$1_$2')\n      .replace(/_/g, '-')\n      .toLowerCase();\n  },\n\n  warn: function () {\n    if (window.console && 'function' === typeof window.console.warn)\n      window.console.warn(...arguments);\n  },\n\n  warnOnce: function(msg) {\n    if (!pastWarnings[msg]) {\n      pastWarnings[msg] = true;\n      this.warn(...arguments);\n    }\n  },\n\n  _resetWarnings: function () {\n    pastWarnings = {};\n  },\n\n  trimString: function(string) {\n    return string.replace(/^\\s+|\\s+$/g, '');\n  },\n\n  parse: {\n    date: function(string) {\n      let parsed = string.match(/^(\\d{4,})-(\\d\\d)-(\\d\\d)$/);\n      if (!parsed)\n        return null;\n      let [_, year, month, day] = parsed.map(x => parseInt(x, 10));\n      let date = new Date(year, month - 1, day);\n      if (date.getFullYear() !== year || date.getMonth() + 1 !== month || date.getDate() !== day)\n        return null;\n      return date;\n    },\n    string: function(string) {\n      return string;\n    },\n    integer: function(string) {\n      if (isNaN(string))\n        return null;\n      return parseInt(string, 10);\n    },\n    number: function(string) {\n      if (isNaN(string))\n        throw null;\n      return parseFloat(string);\n    },\n    'boolean': function _boolean(string) {\n      return !(/^\\s*false\\s*$/i.test(string));\n    },\n    object: function(string) {\n      return Utils.deserializeValue(string);\n    },\n    regexp: function(regexp) {\n      var flags = '';\n\n      // Test if RegExp is literal, if not, nothing to be done, otherwise, we need to isolate flags and pattern\n      if (/^\\/.*\\/(?:[gimy]*)$/.test(regexp)) {\n        // Replace the regexp literal string with the first match group: ([gimy]*)\n        // If no flag is present, this will be a blank string\n        flags = regexp.replace(/.*\\/([gimy]*)$/, '$1');\n        // Again, replace the regexp literal string with the first match group:\n        // everything excluding the opening and closing slashes and the flags\n        regexp = regexp.replace(new RegExp('^/(.*?)/' + flags + '$'), '$1');\n      } else {\n        // Anchor regexp:\n        regexp = '^' + regexp + '$';\n      }\n      return new RegExp(regexp, flags);\n    }\n  },\n\n  parseRequirement: function(requirementType, string) {\n    var converter = this.parse[requirementType || 'string'];\n    if (!converter)\n      throw 'Unknown requirement specification: \"' + requirementType + '\"';\n    let converted = converter(string);\n    if (converted === null)\n      throw `Requirement is not a ${requirementType}: \"${string}\"`;\n    return converted;\n  },\n\n  namespaceEvents: function(events, namespace) {\n    events = this.trimString(events || '').split(/\\s+/);\n    if (!events[0])\n      return '';\n    return $.map(events, evt => `${evt}.${namespace}`).join(' ');\n  },\n\n  difference: function(array, remove) {\n    // This is O(N^2), should be optimized\n    let result = [];\n    $.each(array, (_, elem) => {\n      if (remove.indexOf(elem) == -1)\n        result.push(elem);\n    });\n    return result;\n  },\n\n  // Alter-ego to native Promise.all, but for jQuery\n  all: function(promises) {\n    // jQuery treats $.when() and $.when(singlePromise) differently; let's avoid that and add spurious elements\n    return $.when(...promises, 42, 42);\n  },\n\n  // Object.create polyfill, see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create#Polyfill\n  objectCreate: Object.create || (function () {\n    var Object = function () {};\n    return function (prototype) {\n      if (arguments.length > 1) {\n        throw Error('Second argument not supported');\n      }\n      if (typeof prototype != 'object') {\n        throw TypeError('Argument must be an object');\n      }\n      Object.prototype = prototype;\n      var result = new Object();\n      Object.prototype = null;\n      return result;\n    };\n  })(),\n\n  _SubmitSelector: 'input[type=\"submit\"], button:submit'\n};\n\nexport default Utils;\n","import $ from 'jquery';\nimport Utils from './utils';\n\nvar Base = function () {\n  this.__id__ = Utils.generateID();\n};\n\nBase.prototype = {\n  asyncSupport: true, // Deprecated\n\n  _pipeAccordingToValidationResult: function () {\n    var pipe = () => {\n      var r = $.Deferred();\n      if (true !== this.validationResult)\n        r.reject();\n      return r.resolve().promise();\n    };\n    return [pipe, pipe];\n  },\n\n  actualizeOptions: function () {\n    Utils.attr(this.element, this.options.namespace, this.domOptions);\n    if (this.parent && this.parent.actualizeOptions)\n      this.parent.actualizeOptions();\n    return this;\n  },\n\n  _resetOptions: function (initOptions) {\n    this.domOptions = Utils.objectCreate(this.parent.options);\n    this.options = Utils.objectCreate(this.domOptions);\n    // Shallow copy of ownProperties of initOptions:\n    for (var i in initOptions) {\n      if (initOptions.hasOwnProperty(i))\n        this.options[i] = initOptions[i];\n    }\n    this.actualizeOptions();\n  },\n\n  _listeners: null,\n\n  // Register a callback for the given event name\n  // Callback is called with context as the first argument and the `this`\n  // The context is the current parsley instance, or window.Parsley if global\n  // A return value of `false` will interrupt the calls\n  on: function (name, fn) {\n    this._listeners = this._listeners || {};\n    var queue = this._listeners[name] = this._listeners[name] || [];\n    queue.push(fn);\n\n    return this;\n  },\n\n  // Deprecated. Use `on` instead\n  subscribe: function(name, fn) {\n    $.listenTo(this, name.toLowerCase(), fn);\n  },\n\n  // Unregister a callback (or all if none is given) for the given event name\n  off: function (name, fn) {\n    var queue = this._listeners && this._listeners[name];\n    if (queue) {\n      if (!fn) {\n        delete this._listeners[name];\n      } else {\n        for (var i = queue.length; i--; )\n          if (queue[i] === fn)\n            queue.splice(i, 1);\n      }\n    }\n    return this;\n  },\n\n  // Deprecated. Use `off`\n  unsubscribe: function(name, fn) {\n    $.unsubscribeTo(this, name.toLowerCase());\n  },\n\n  // Trigger an event of the given name\n  // A return value of `false` interrupts the callback chain\n  // Returns false if execution was interrupted\n  trigger: function (name, target, extraArg) {\n    target = target || this;\n    var queue = this._listeners && this._listeners[name];\n    var result;\n    var parentResult;\n    if (queue) {\n      for (var i = queue.length; i--; ) {\n        result = queue[i].call(target, target, extraArg);\n        if (result === false) return result;\n      }\n    }\n    if (this.parent) {\n      return this.parent.trigger(name, target, extraArg);\n    }\n    return true;\n  },\n\n  asyncIsValid: function (group, force) {\n    Utils.warnOnce(\"asyncIsValid is deprecated; please use whenValid instead\");\n    return this.whenValid({group, force});\n  },\n\n  _findRelated: function () {\n    return this.options.multiple ?\n      $(this.parent.element.querySelectorAll(`[${this.options.namespace}multiple=\"${this.options.multiple}\"]`))\n    : this.$element;\n  }\n};\n\nexport default Base;\n","// All these options could be overriden and specified directly in DOM using\n// `data-parsley-` default DOM-API\n// eg: `inputs` can be set in DOM using `data-parsley-inputs=\"input, textarea\"`\n// eg: `data-parsley-stop-on-first-failing-constraint=\"false\"`\n\nvar Defaults = {\n  // ### General\n\n  // Default data-namespace for DOM API\n  namespace: 'data-parsley-',\n\n  // Supported inputs by default\n  inputs: 'input, textarea, select',\n\n  // Excluded inputs by default\n  excluded: 'input[type=button], input[type=submit], input[type=reset], input[type=hidden]',\n\n  // Stop validating field on highest priority failing constraint\n  priorityEnabled: true,\n\n  // ### Field only\n\n  // identifier used to group together inputs (e.g. radio buttons...)\n  multiple: null,\n\n  // identifier (or array of identifiers) used to validate only a select group of inputs\n  group: null,\n\n  // ### UI\n  // Enable\\Disable error messages\n  uiEnabled: true,\n\n  // Key events threshold before validation\n  validationThreshold: 3,\n\n  // Focused field on form validation error. 'first'|'last'|'none'\n  focus: 'first',\n\n  // event(s) that will trigger validation before first failure. eg: `input`...\n  trigger: false,\n\n  // event(s) that will trigger validation after first failure.\n  triggerAfterFailure: 'input',\n\n  // Class that would be added on every failing validation Parsley field\n  errorClass: 'parsley-error',\n\n  // Same for success validation\n  successClass: 'parsley-success',\n\n  // Return the `$element` that will receive these above success or error classes\n  // Could also be (and given directly from DOM) a valid selector like `'#div'`\n  classHandler: function (Field) {},\n\n  // Return the `$element` where errors will be appended\n  // Could also be (and given directly from DOM) a valid selector like `'#div'`\n  errorsContainer: function (Field) {},\n\n  // ul elem that would receive errors' list\n  errorsWrapper: '<ul class=\"parsley-errors-list\"></ul>',\n\n  // li elem that would receive error message\n  errorTemplate: '<li></li>'\n};\n\nexport default Defaults;\n","import $ from 'jquery';\nimport Utils from './utils';\n\nvar convertArrayRequirement = function(string, length) {\n  var m = string.match(/^\\s*\\[(.*)\\]\\s*$/);\n  if (!m)\n    throw 'Requirement is not an array: \"' + string + '\"';\n  var values = m[1].split(',').map(Utils.trimString);\n  if (values.length !== length)\n    throw 'Requirement has ' + values.length + ' values when ' + length + ' are needed';\n  return values;\n};\n\nvar convertExtraOptionRequirement = function(requirementSpec, string, extraOptionReader) {\n  var main = null;\n  var extra = {};\n  for (var key in requirementSpec) {\n    if (key) {\n      var value = extraOptionReader(key);\n      if ('string' === typeof value)\n        value = Utils.parseRequirement(requirementSpec[key], value);\n      extra[key] = value;\n    } else {\n      main = Utils.parseRequirement(requirementSpec[key], string);\n    }\n  }\n  return [main, extra];\n};\n\n// A Validator needs to implement the methods `validate` and `parseRequirements`\n\nvar Validator = function(spec) {\n  $.extend(true, this, spec);\n};\n\nValidator.prototype = {\n  // Returns `true` iff the given `value` is valid according the given requirements.\n  validate: function(value, requirementFirstArg) {\n    if (this.fn) { // Legacy style validator\n\n      if (arguments.length > 3)  // If more args then value, requirement, instance...\n        requirementFirstArg = [].slice.call(arguments, 1, -1);  // Skip first arg (value) and last (instance), combining the rest\n      return this.fn(value, requirementFirstArg);\n    }\n\n    if (Array.isArray(value)) {\n      if (!this.validateMultiple)\n        throw 'Validator `' + this.name + '` does not handle multiple values';\n      return this.validateMultiple(...arguments);\n    } else {\n      let instance = arguments[arguments.length - 1];\n      if (this.validateDate && instance._isDateInput()) {\n        arguments[0] = Utils.parse.date(arguments[0]);\n        if (arguments[0] === null)\n          return false;\n        return this.validateDate(...arguments);\n      }\n      if (this.validateNumber) {\n        if (!value) // Builtin validators all accept empty strings, except `required` of course\n          return true;\n        if (isNaN(value))\n          return false;\n        arguments[0] = parseFloat(arguments[0]);\n        return this.validateNumber(...arguments);\n      }\n      if (this.validateString) {\n        return this.validateString(...arguments);\n      }\n      throw 'Validator `' + this.name + '` only handles multiple values';\n    }\n  },\n\n  // Parses `requirements` into an array of arguments,\n  // according to `this.requirementType`\n  parseRequirements: function(requirements, extraOptionReader) {\n    if ('string' !== typeof requirements) {\n      // Assume requirement already parsed\n      // but make sure we return an array\n      return Array.isArray(requirements) ? requirements : [requirements];\n    }\n    var type = this.requirementType;\n    if (Array.isArray(type)) {\n      var values = convertArrayRequirement(requirements, type.length);\n      for (var i = 0; i < values.length; i++)\n        values[i] = Utils.parseRequirement(type[i], values[i]);\n      return values;\n    } else if ($.isPlainObject(type)) {\n      return convertExtraOptionRequirement(type, requirements, extraOptionReader);\n    } else {\n      return [Utils.parseRequirement(type, requirements)];\n    }\n  },\n  // Defaults:\n  requirementType: 'string',\n\n  priority: 2\n\n};\n\nexport default Validator;\n","import $ from 'jquery';\nimport Utils from './utils';\nimport Defaults from './defaults';\nimport Validator from './validator';\n\nvar ValidatorRegistry = function (validators, catalog) {\n  this.__class__ = 'ValidatorRegistry';\n\n  // Default Parsley locale is en\n  this.locale = 'en';\n\n  this.init(validators || {}, catalog || {});\n};\n\nvar typeTesters =  {\n  email: /^((([a-zA-Z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-zA-Z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-zA-Z]|\\d|-|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-zA-Z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-zA-Z]|\\d|-|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-zA-Z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))$/,\n\n  // Follow https://www.w3.org/TR/html5/infrastructure.html#floating-point-numbers\n  number: /^-?(\\d*\\.)?\\d+(e[-+]?\\d+)?$/i,\n\n  integer: /^-?\\d+$/,\n\n  digits: /^\\d+$/,\n\n  alphanum: /^\\w+$/i,\n\n  date: {\n    test: value => Utils.parse.date(value) !== null\n  },\n\n  url: new RegExp(\n      \"^\" +\n        // protocol identifier\n        \"(?:(?:https?|ftp)://)?\" + // ** mod: make scheme optional\n        // user:pass authentication\n        \"(?:\\\\S+(?::\\\\S*)?@)?\" +\n        \"(?:\" +\n          // IP address exclusion\n          // private & local networks\n          // \"(?!(?:10|127)(?:\\\\.\\\\d{1,3}){3})\" +   // ** mod: allow local networks\n          // \"(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})\" +  // ** mod: allow local networks\n          // \"(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})\" +  // ** mod: allow local networks\n          // IP address dotted notation octets\n          // excludes loopback network 0.0.0.0\n          // excludes reserved space >= 224.0.0.0\n          // excludes network & broacast addresses\n          // (first & last IP address of each class)\n          \"(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])\" +\n          \"(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}\" +\n          \"(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))\" +\n        \"|\" +\n          // host name\n          \"(?:(?:[a-zA-Z\\\\u00a1-\\\\uffff0-9]-*)*[a-zA-Z\\\\u00a1-\\\\uffff0-9]+)\" +\n          // domain name\n          \"(?:\\\\.(?:[a-zA-Z\\\\u00a1-\\\\uffff0-9]-*)*[a-zA-Z\\\\u00a1-\\\\uffff0-9]+)*\" +\n          // TLD identifier\n          \"(?:\\\\.(?:[a-zA-Z\\\\u00a1-\\\\uffff]{2,}))\" +\n        \")\" +\n        // port number\n        \"(?::\\\\d{2,5})?\" +\n        // resource path\n        \"(?:/\\\\S*)?\" +\n      \"$\"\n    )\n};\ntypeTesters.range = typeTesters.number;\n\n// See http://stackoverflow.com/a/10454560/8279\nvar decimalPlaces = num => {\n  var match = ('' + num).match(/(?:\\.(\\d+))?(?:[eE]([+-]?\\d+))?$/);\n  if (!match) { return 0; }\n  return Math.max(\n       0,\n       // Number of digits right of decimal point.\n       (match[1] ? match[1].length : 0) -\n       // Adjust for scientific notation.\n       (match[2] ? +match[2] : 0));\n};\n\n// parseArguments('number', ['1', '2']) => [1, 2]\nlet parseArguments = (type, args) => args.map(Utils.parse[type]);\n// operatorToValidator returns a validating function for an operator function, applied to the given type\nlet operatorToValidator = (type, operator) => {\n  return (value, ...requirementsAndInput) => {\n    requirementsAndInput.pop(); // Get rid of `input` argument\n    return operator(value, ...parseArguments(type, requirementsAndInput));\n  };\n};\n\nlet comparisonOperator = operator => ({\n  validateDate: operatorToValidator('date', operator),\n  validateNumber: operatorToValidator('number', operator),\n  requirementType: operator.length <= 2 ? 'string' : ['string', 'string'], // Support operators with a 1 or 2 requirement(s)\n  priority: 30\n});\n\nValidatorRegistry.prototype = {\n  init: function (validators, catalog) {\n    this.catalog = catalog;\n    // Copy prototype's validators:\n    this.validators = Object.assign({}, this.validators);\n\n    for (var name in validators)\n      this.addValidator(name, validators[name].fn, validators[name].priority);\n\n    window.Parsley.trigger('parsley:validator:init');\n  },\n\n  // Set new messages locale if we have dictionary loaded in ParsleyConfig.i18n\n  setLocale: function (locale) {\n    if ('undefined' === typeof this.catalog[locale])\n      throw new Error(locale + ' is not available in the catalog');\n\n    this.locale = locale;\n\n    return this;\n  },\n\n  // Add a new messages catalog for a given locale. Set locale for this catalog if set === `true`\n  addCatalog: function (locale, messages, set) {\n    if ('object' === typeof messages)\n      this.catalog[locale] = messages;\n\n    if (true === set)\n      return this.setLocale(locale);\n\n    return this;\n  },\n\n  // Add a specific message for a given constraint in a given locale\n  addMessage: function (locale, name, message) {\n    if ('undefined' === typeof this.catalog[locale])\n      this.catalog[locale] = {};\n\n    this.catalog[locale][name] = message;\n\n    return this;\n  },\n\n  // Add messages for a given locale\n  addMessages: function (locale, nameMessageObject) {\n    for (var name in nameMessageObject)\n      this.addMessage(locale, name, nameMessageObject[name]);\n\n    return this;\n  },\n\n  // Add a new validator\n  //\n  //    addValidator('custom', {\n  //        requirementType: ['integer', 'integer'],\n  //        validateString: function(value, from, to) {},\n  //        priority: 22,\n  //        messages: {\n  //          en: \"Hey, that's no good\",\n  //          fr: \"Aye aye, pas bon du tout\",\n  //        }\n  //    })\n  //\n  // Old API was addValidator(name, function, priority)\n  //\n  addValidator: function (name, arg1, arg2) {\n    if (this.validators[name])\n      Utils.warn('Validator \"' + name + '\" is already defined.');\n    else if (Defaults.hasOwnProperty(name)) {\n      Utils.warn('\"' + name + '\" is a restricted keyword and is not a valid validator name.');\n      return;\n    }\n    return this._setValidator(...arguments);\n  },\n\n  hasValidator: function (name) {\n    return !!this.validators[name];\n  },\n\n  updateValidator: function (name, arg1, arg2) {\n    if (!this.validators[name]) {\n      Utils.warn('Validator \"' + name + '\" is not already defined.');\n      return this.addValidator(...arguments);\n    }\n    return this._setValidator(...arguments);\n  },\n\n  removeValidator: function (name) {\n    if (!this.validators[name])\n      Utils.warn('Validator \"' + name + '\" is not defined.');\n\n    delete this.validators[name];\n\n    return this;\n  },\n\n  _setValidator: function (name, validator, priority) {\n    if ('object' !== typeof validator) {\n      // Old style validator, with `fn` and `priority`\n      validator = {\n        fn: validator,\n        priority: priority\n      };\n    }\n    if (!validator.validate) {\n      validator = new Validator(validator);\n    }\n    this.validators[name] = validator;\n\n    for (var locale in validator.messages || {})\n      this.addMessage(locale, name, validator.messages[locale]);\n\n    return this;\n  },\n\n  getErrorMessage: function (constraint) {\n    var message;\n\n    // Type constraints are a bit different, we have to match their requirements too to find right error message\n    if ('type' === constraint.name) {\n      var typeMessages = this.catalog[this.locale][constraint.name] || {};\n      message = typeMessages[constraint.requirements];\n    } else\n      message = this.formatMessage(this.catalog[this.locale][constraint.name], constraint.requirements);\n\n    return message || this.catalog[this.locale].defaultMessage || this.catalog.en.defaultMessage;\n  },\n\n  // Kind of light `sprintf()` implementation\n  formatMessage: function (string, parameters) {\n    if ('object' === typeof parameters) {\n      for (var i in parameters)\n        string = this.formatMessage(string, parameters[i]);\n\n      return string;\n    }\n\n    return 'string' === typeof string ? string.replace(/%s/i, parameters) : '';\n  },\n\n  // Here is the Parsley default validators list.\n  // A validator is an object with the following key values:\n  //  - priority: an integer\n  //  - requirement: 'string' (default), 'integer', 'number', 'regexp' or an Array of these\n  //  - validateString, validateMultiple, validateNumber: functions returning `true`, `false` or a promise\n  // Alternatively, a validator can be a function that returns such an object\n  //\n  validators: {\n    notblank: {\n      validateString: function(value) {\n        return /\\S/.test(value);\n      },\n      priority: 2\n    },\n    required: {\n      validateMultiple: function(values) {\n        return values.length > 0;\n      },\n      validateString: function(value) {\n        return /\\S/.test(value);\n      },\n      priority: 512\n    },\n    type: {\n      validateString: function(value, type, {step = 'any', base = 0} = {}) {\n        var tester = typeTesters[type];\n        if (!tester) {\n          throw new Error('validator type `' + type + '` is not supported');\n        }\n        if (!value)\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        if (!tester.test(value))\n          return false;\n        if ('number' === type) {\n          if (!/^any$/i.test(step || '')) {\n            var nb = Number(value);\n            var decimals = Math.max(decimalPlaces(step), decimalPlaces(base));\n            if (decimalPlaces(nb) > decimals) // Value can't have too many decimals\n              return false;\n            // Be careful of rounding errors by using integers.\n            var toInt = f => Math.round(f * Math.pow(10, decimals));\n            if ((toInt(nb) - toInt(base)) % toInt(step) != 0)\n              return false;\n          }\n        }\n        return true;\n      },\n      requirementType: {\n        '': 'string',\n        step: 'string',\n        base: 'number'\n      },\n      priority: 256\n    },\n    pattern: {\n      validateString: function(value, regexp) {\n        if (!value)\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        return regexp.test(value);\n      },\n      requirementType: 'regexp',\n      priority: 64\n    },\n    minlength: {\n      validateString: function (value, requirement) {\n        if (!value)\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        return value.length >= requirement;\n      },\n      requirementType: 'integer',\n      priority: 30\n    },\n    maxlength: {\n      validateString: function (value, requirement) {\n        return value.length <= requirement;\n      },\n      requirementType: 'integer',\n      priority: 30\n    },\n    length: {\n      validateString: function (value, min, max) {\n        if (!value)\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        return value.length >= min && value.length <= max;\n      },\n      requirementType: ['integer', 'integer'],\n      priority: 30\n    },\n    mincheck: {\n      validateMultiple: function (values, requirement) {\n        return values.length >= requirement;\n      },\n      requirementType: 'integer',\n      priority: 30\n    },\n    maxcheck: {\n      validateMultiple: function (values, requirement) {\n        return values.length <= requirement;\n      },\n      requirementType: 'integer',\n      priority: 30\n    },\n    check: {\n      validateMultiple: function (values, min, max) {\n        return values.length >= min && values.length <= max;\n      },\n      requirementType: ['integer', 'integer'],\n      priority: 30\n    },\n    min: comparisonOperator((value, requirement) => value >= requirement),\n    max: comparisonOperator((value, requirement) => value <= requirement),\n    range: comparisonOperator((value, min, max) => value >= min && value <= max),\n    equalto: {\n      validateString: function (value, refOrValue) {\n        if (!value)\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        var $reference = $(refOrValue);\n        if ($reference.length)\n          return value === $reference.val();\n        else\n          return value === refOrValue;\n      },\n      priority: 256\n    },\n    euvatin: {\n      validateString: function (value, refOrValue) {\n        if (!value) {\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        }\n\n        var re = /^[A-Z][A-Z][A-Za-z0-9 -]{2,}$/;\n        return re.test(value);\n      },\n      priority: 30,\n    },\n  }\n};\n\nexport default ValidatorRegistry;\n","import $ from 'jquery';\nimport Utils from './utils';\n\nvar UI = {};\n\nvar diffResults = function (newResult, oldResult, deep) {\n  var added = [];\n  var kept = [];\n\n  for (var i = 0; i < newResult.length; i++) {\n    var found = false;\n\n    for (var j = 0; j < oldResult.length; j++)\n      if (newResult[i].assert.name === oldResult[j].assert.name) {\n        found = true;\n        break;\n      }\n\n    if (found)\n      kept.push(newResult[i]);\n    else\n      added.push(newResult[i]);\n  }\n\n  return {\n    kept: kept,\n    added: added,\n    removed: !deep ? diffResults(oldResult, newResult, true).added : []\n  };\n};\n\nUI.Form = {\n\n  _actualizeTriggers: function () {\n    this.$element.on('submit.Parsley', evt => { this.onSubmitValidate(evt); });\n    this.$element.on('click.Parsley', Utils._SubmitSelector, evt => { this.onSubmitButton(evt); });\n\n    // UI could be disabled\n    if (false === this.options.uiEnabled)\n      return;\n\n    this.element.setAttribute('novalidate', '');\n  },\n\n  focus: function () {\n    this._focusedField = null;\n\n    if (true === this.validationResult || 'none' === this.options.focus)\n      return null;\n\n    for (var i = 0; i < this.fields.length; i++) {\n      var field = this.fields[i];\n      if (true !== field.validationResult && field.validationResult.length > 0 && 'undefined' === typeof field.options.noFocus) {\n        this._focusedField = field.$element;\n        if ('first' === this.options.focus)\n          break;\n      }\n    }\n\n    if (null === this._focusedField)\n      return null;\n\n    return this._focusedField.focus();\n  },\n\n  _destroyUI: function () {\n    // Reset all event listeners\n    this.$element.off('.Parsley');\n  }\n\n};\n\nUI.Field = {\n\n  _reflowUI: function () {\n    this._buildUI();\n\n    // If this field doesn't have an active UI don't bother doing something\n    if (!this._ui)\n      return;\n\n    // Diff between two validation results\n    var diff = diffResults(this.validationResult, this._ui.lastValidationResult);\n\n    // Then store current validation result for next reflow\n    this._ui.lastValidationResult = this.validationResult;\n\n    // Handle valid / invalid / none field class\n    this._manageStatusClass();\n\n    // Add, remove, updated errors messages\n    this._manageErrorsMessages(diff);\n\n    // Triggers impl\n    this._actualizeTriggers();\n\n    // If field is not valid for the first time, bind keyup trigger to ease UX and quickly inform user\n    if ((diff.kept.length || diff.added.length) && !this._failedOnce) {\n      this._failedOnce = true;\n      this._actualizeTriggers();\n    }\n  },\n\n  // Returns an array of field's error message(s)\n  getErrorsMessages: function () {\n    // No error message, field is valid\n    if (true === this.validationResult)\n      return [];\n\n    var messages = [];\n\n    for (var i = 0; i < this.validationResult.length; i++)\n      messages.push(this.validationResult[i].errorMessage ||\n       this._getErrorMessage(this.validationResult[i].assert));\n\n    return messages;\n  },\n\n  // It's a goal of Parsley that this method is no longer required [#1073]\n  addError: function (name, {message, assert, updateClass = true} = {}) {\n    this._buildUI();\n    this._addError(name, {message, assert});\n\n    if (updateClass)\n      this._errorClass();\n  },\n\n  // It's a goal of Parsley that this method is no longer required [#1073]\n  updateError: function (name, {message, assert, updateClass = true} = {}) {\n    this._buildUI();\n    this._updateError(name, {message, assert});\n\n    if (updateClass)\n      this._errorClass();\n  },\n\n  // It's a goal of Parsley that this method is no longer required [#1073]\n  removeError: function (name, {updateClass = true} = {}) {\n    this._buildUI();\n    this._removeError(name);\n\n    // edge case possible here: remove a standard Parsley error that is still failing in this.validationResult\n    // but highly improbable cuz' manually removing a well Parsley handled error makes no sense.\n    if (updateClass)\n      this._manageStatusClass();\n  },\n\n  _manageStatusClass: function () {\n    if (this.hasConstraints() && this.needsValidation() && true === this.validationResult)\n      this._successClass();\n    else if (this.validationResult.length > 0)\n      this._errorClass();\n    else\n      this._resetClass();\n  },\n\n  _manageErrorsMessages: function (diff) {\n    if ('undefined' !== typeof this.options.errorsMessagesDisabled)\n      return;\n\n    // Case where we have errorMessage option that configure an unique field error message, regardless failing validators\n    if ('undefined' !== typeof this.options.errorMessage) {\n      if ((diff.added.length || diff.kept.length)) {\n        this._insertErrorWrapper();\n\n        if (0 === this._ui.$errorsWrapper.find('.parsley-custom-error-message').length)\n          this._ui.$errorsWrapper\n            .append(\n              $(this.options.errorTemplate)\n              .addClass('parsley-custom-error-message')\n            );\n\n        this._ui.$errorClassHandler.attr('aria-describedby', this._ui.errorsWrapperId);\n\n        return this._ui.$errorsWrapper\n          .addClass('filled')\n          .attr('aria-hidden', 'false')\n          .find('.parsley-custom-error-message')\n          .html(this.options.errorMessage);\n      }\n\n      this._ui.$errorClassHandler.removeAttr('aria-describedby');\n\n      return this._ui.$errorsWrapper\n        .removeClass('filled')\n        .attr('aria-hidden', 'true')\n        .find('.parsley-custom-error-message')\n        .remove();\n    }\n\n    // Show, hide, update failing constraints messages\n    for (var i = 0; i < diff.removed.length; i++)\n      this._removeError(diff.removed[i].assert.name);\n\n    for (i = 0; i < diff.added.length; i++)\n      this._addError(diff.added[i].assert.name, {message: diff.added[i].errorMessage, assert: diff.added[i].assert});\n\n    for (i = 0; i < diff.kept.length; i++)\n      this._updateError(diff.kept[i].assert.name, {message: diff.kept[i].errorMessage, assert: diff.kept[i].assert});\n  },\n\n\n  _addError: function (name, {message, assert}) {\n    this._insertErrorWrapper();\n    this._ui.$errorClassHandler\n      .attr('aria-describedby', this._ui.errorsWrapperId);\n    this._ui.$errorsWrapper\n      .addClass('filled')\n      .attr('aria-hidden', 'false')\n      .append(\n        $(this.options.errorTemplate)\n        .addClass('parsley-' + name)\n        .html(message || this._getErrorMessage(assert))\n      );\n  },\n\n  _updateError: function (name, {message, assert}) {\n    this._ui.$errorsWrapper\n      .addClass('filled')\n      .find('.parsley-' + name)\n      .html(message || this._getErrorMessage(assert));\n  },\n\n  _removeError: function (name) {\n    this._ui.$errorClassHandler\n      .removeAttr('aria-describedby');\n    this._ui.$errorsWrapper\n      .removeClass('filled')\n      .attr('aria-hidden', 'true')\n      .find('.parsley-' + name)\n      .remove();\n  },\n\n  _getErrorMessage: function (constraint) {\n    var customConstraintErrorMessage = constraint.name + 'Message';\n\n    if ('undefined' !== typeof this.options[customConstraintErrorMessage])\n      return window.Parsley.formatMessage(this.options[customConstraintErrorMessage], constraint.requirements);\n\n    return window.Parsley.getErrorMessage(constraint);\n  },\n\n  _buildUI: function () {\n    // UI could be already built or disabled\n    if (this._ui || false === this.options.uiEnabled)\n      return;\n\n    var _ui = {};\n\n    // Give field its Parsley id in DOM\n    this.element.setAttribute(this.options.namespace + 'id', this.__id__);\n\n    /** Generate important UI elements and store them in this **/\n    // $errorClassHandler is the $element that woul have parsley-error and parsley-success classes\n    _ui.$errorClassHandler = this._manageClassHandler();\n\n    // $errorsWrapper is a div that would contain the various field errors, it will be appended into $errorsContainer\n    _ui.errorsWrapperId = 'parsley-id-' + (this.options.multiple ? 'multiple-' + this.options.multiple : this.__id__);\n    _ui.$errorsWrapper = $(this.options.errorsWrapper).attr('id', _ui.errorsWrapperId);\n\n    // ValidationResult UI storage to detect what have changed bwt two validations, and update DOM accordingly\n    _ui.lastValidationResult = [];\n    _ui.validationInformationVisible = false;\n\n    // Store it in this for later\n    this._ui = _ui;\n  },\n\n  // Determine which element will have `parsley-error` and `parsley-success` classes\n  _manageClassHandler: function () {\n    // Class handled could also be determined by function given in Parsley options\n    if ('string' === typeof this.options.classHandler && $(this.options.classHandler).length)\n      return $(this.options.classHandler);\n\n    // Class handled could also be determined by function given in Parsley options\n    var $handlerFunction = this.options.classHandler;\n\n    // It might also be the function name of a global function\n    if ('string' === typeof this.options.classHandler && 'function' === typeof window[this.options.classHandler])\n      $handlerFunction = window[this.options.classHandler];\n\n    if ('function' === typeof $handlerFunction) {\n      var $handler = $handlerFunction.call(this, this);\n\n      // If this function returned a valid existing DOM element, go for it\n      if ('undefined' !== typeof $handler && $handler.length)\n        return $handler;\n    } else if ('object' === typeof $handlerFunction && $handlerFunction instanceof jQuery && $handlerFunction.length) {\n      return $handlerFunction;\n    } else if ($handlerFunction) {\n      Utils.warn('The class handler `' + $handlerFunction + '` does not exist in DOM nor as a global JS function');\n    }\n\n    return this._inputHolder();\n  },\n\n  _inputHolder: function() {\n    // if simple element (input, texatrea, select...) it will perfectly host the classes and precede the error container\n    if (!this.options.multiple || this.element.nodeName === 'SELECT')\n      return this.$element;\n\n    // But if multiple element (radio, checkbox), that would be their parent\n    return this.$element.parent();\n  },\n\n  _insertErrorWrapper: function () {\n    var $errorsContainer = this.options.errorsContainer;\n\n    // Nothing to do if already inserted\n    if (0 !== this._ui.$errorsWrapper.parent().length)\n      return this._ui.$errorsWrapper.parent();\n\n    if ('string' === typeof $errorsContainer) {\n      if ($($errorsContainer).length)\n        return $($errorsContainer).append(this._ui.$errorsWrapper);\n      else if ('function' === typeof window[$errorsContainer])\n        $errorsContainer = window[$errorsContainer];\n      else\n        Utils.warn('The errors container `' + $errorsContainer + '` does not exist in DOM nor as a global JS function');\n    }\n\n    if ('function' === typeof $errorsContainer)\n      $errorsContainer = $errorsContainer.call(this, this);\n\n    if ('object' === typeof $errorsContainer && $errorsContainer.length)\n      return $errorsContainer.append(this._ui.$errorsWrapper);\n\n    return this._inputHolder().after(this._ui.$errorsWrapper);\n  },\n\n  _actualizeTriggers: function () {\n    var $toBind = this._findRelated();\n    var trigger;\n\n    // Remove Parsley events already bound on this field\n    $toBind.off('.Parsley');\n    if (this._failedOnce)\n      $toBind.on(Utils.namespaceEvents(this.options.triggerAfterFailure, 'Parsley'), () => {\n        this._validateIfNeeded();\n      });\n    else if (trigger = Utils.namespaceEvents(this.options.trigger, 'Parsley')) {\n      $toBind.on(trigger, event => {\n        this._validateIfNeeded(event);\n      });\n    }\n  },\n\n  _validateIfNeeded: function (event) {\n    // For keyup, keypress, keydown, input... events that could be a little bit obstrusive\n    // do not validate if val length < min threshold on first validation. Once field have been validated once and info\n    // about success or failure have been displayed, always validate with this trigger to reflect every yalidation change.\n    if (event && /key|input/.test(event.type))\n      if (!(this._ui && this._ui.validationInformationVisible) && this.getValue().length <= this.options.validationThreshold)\n        return;\n\n    if (this.options.debounce) {\n      window.clearTimeout(this._debounced);\n      this._debounced = window.setTimeout(() => this.validate(), this.options.debounce);\n    } else\n      this.validate();\n  },\n\n  _resetUI: function () {\n    // Reset all event listeners\n    this._failedOnce = false;\n    this._actualizeTriggers();\n\n    // Nothing to do if UI never initialized for this field\n    if ('undefined' === typeof this._ui)\n      return;\n\n    // Reset all errors' li\n    this._ui.$errorsWrapper\n      .removeClass('filled')\n      .children()\n      .remove();\n\n    // Reset validation class\n    this._resetClass();\n\n    // Reset validation flags and last validation result\n    this._ui.lastValidationResult = [];\n    this._ui.validationInformationVisible = false;\n  },\n\n  _destroyUI: function () {\n    this._resetUI();\n\n    if ('undefined' !== typeof this._ui)\n      this._ui.$errorsWrapper.remove();\n\n    delete this._ui;\n  },\n\n  _successClass: function () {\n    this._ui.validationInformationVisible = true;\n    this._ui.$errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass);\n  },\n  _errorClass: function () {\n    this._ui.validationInformationVisible = true;\n    this._ui.$errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass);\n  },\n  _resetClass: function () {\n    this._ui.$errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass);\n  }\n};\n\nexport default UI;\n","import $ from 'jquery';\nimport Base from './base';\nimport Utils from './utils';\n\nvar Form = function (element, domOptions, options) {\n  this.__class__ = 'Form';\n\n  this.element = element;\n  this.$element = $(element);\n  this.domOptions = domOptions;\n  this.options = options;\n  this.parent = window.Parsley;\n\n  this.fields = [];\n  this.validationResult = null;\n};\n\nvar statusMapping = {pending: null, resolved: true, rejected: false};\n\nForm.prototype = {\n  onSubmitValidate: function (event) {\n    // This is a Parsley generated submit event, do not validate, do not prevent, simply exit and keep normal behavior\n    if (true === event.parsley)\n      return;\n\n    // If we didn't come here through a submit button, use the first one in the form\n    var submitSource = this._submitSource || this.$element.find(Utils._SubmitSelector)[0];\n    this._submitSource = null;\n    this.$element.find('.parsley-synthetic-submit-button').prop('disabled', true);\n    if (submitSource && null !== submitSource.getAttribute('formnovalidate'))\n      return;\n\n    window.Parsley._remoteCache = {};\n\n    var promise = this.whenValidate({event});\n\n    if ('resolved' === promise.state() && false !== this._trigger('submit')) {\n      // All good, let event go through. We make this distinction because browsers\n      // differ in their handling of `submit` being called from inside a submit event [#1047]\n    } else {\n      // Rejected or pending: cancel this submit\n      event.stopImmediatePropagation();\n      event.preventDefault();\n      if ('pending' === promise.state())\n        promise.done(() => { this._submit(submitSource); });\n    }\n  },\n\n  onSubmitButton: function(event) {\n    this._submitSource = event.currentTarget;\n  },\n  // internal\n  // _submit submits the form, this time without going through the validations.\n  // Care must be taken to \"fake\" the actual submit button being clicked.\n  _submit: function (submitSource) {\n    if (false === this._trigger('submit'))\n      return;\n    // Add submit button's data\n    if (submitSource) {\n      var $synthetic = this.$element.find('.parsley-synthetic-submit-button').prop('disabled', false);\n      if (0 === $synthetic.length)\n        $synthetic = $('<input class=\"parsley-synthetic-submit-button\" type=\"hidden\">').appendTo(this.$element);\n      $synthetic.attr({\n        name: submitSource.getAttribute('name'),\n        value: submitSource.getAttribute('value')\n      });\n    }\n\n    this.$element.trigger(Object.assign($.Event('submit'), {parsley: true}));\n  },\n\n  // Performs validation on fields while triggering events.\n  // @returns `true` if all validations succeeds, `false`\n  // if a failure is immediately detected, or `null`\n  // if dependant on a promise.\n  // Consider using `whenValidate` instead.\n  validate: function (options) {\n    if (arguments.length >= 1 && !$.isPlainObject(options)) {\n      Utils.warnOnce('Calling validate on a parsley form without passing arguments as an object is deprecated.');\n      var [group, force, event] = arguments;\n      options = {group, force, event};\n    }\n    return statusMapping[ this.whenValidate(options).state() ];\n  },\n\n  whenValidate: function ({group, force, event} = {}) {\n    this.submitEvent = event;\n    if (event) {\n      this.submitEvent = Object.assign({}, event, {preventDefault: () => {\n        Utils.warnOnce(\"Using `this.submitEvent.preventDefault()` is deprecated; instead, call `this.validationResult = false`\");\n        this.validationResult = false;\n      }});\n    }\n    this.validationResult = true;\n\n    // fire validate event to eventually modify things before every validation\n    this._trigger('validate');\n\n    // Refresh form DOM options and form's fields that could have changed\n    this._refreshFields();\n\n    var promises = this._withoutReactualizingFormOptions(() => {\n      return $.map(this.fields, field => field.whenValidate({force, group}));\n    });\n\n    return Utils.all(promises)\n      .done(  () => { this._trigger('success'); })\n      .fail(  () => {\n        this.validationResult = false;\n        this.focus();\n        this._trigger('error');\n      })\n      .always(() => { this._trigger('validated'); })\n      .pipe(...this._pipeAccordingToValidationResult());\n  },\n\n  // Iterate over refreshed fields, and stop on first failure.\n  // Returns `true` if all fields are valid, `false` if a failure is detected\n  // or `null` if the result depends on an unresolved promise.\n  // Prefer using `whenValid` instead.\n  isValid: function (options) {\n    if (arguments.length >= 1 && !$.isPlainObject(options)) {\n      Utils.warnOnce('Calling isValid on a parsley form without passing arguments as an object is deprecated.');\n      var [group, force] = arguments;\n      options = {group, force};\n    }\n    return statusMapping[ this.whenValid(options).state() ];\n  },\n\n  // Iterate over refreshed fields and validate them.\n  // Returns a promise.\n  // A validation that immediately fails will interrupt the validations.\n  whenValid: function ({group, force} = {}) {\n    this._refreshFields();\n\n    var promises = this._withoutReactualizingFormOptions(() => {\n      return $.map(this.fields, field => field.whenValid({group, force}));\n    });\n    return Utils.all(promises);\n  },\n\n  refresh: function() {\n    this._refreshFields();\n    return this;\n  },\n\n  // Reset UI\n  reset: function () {\n    // Form case: emit a reset event for each field\n    for (var i = 0; i < this.fields.length; i++)\n      this.fields[i].reset();\n\n    this._trigger('reset');\n  },\n\n  // Destroy Parsley instance (+ UI)\n  destroy: function () {\n    // Field case: emit destroy event to clean UI and then destroy stored instance\n    this._destroyUI();\n\n    // Form case: destroy all its fields and then destroy stored instance\n    for (var i = 0; i < this.fields.length; i++)\n      this.fields[i].destroy();\n\n    this.$element.removeData('Parsley');\n    this._trigger('destroy');\n  },\n\n  _refreshFields: function () {\n    return this.actualizeOptions()._bindFields();\n  },\n\n  _bindFields: function () {\n    var oldFields = this.fields;\n\n    this.fields = [];\n    this.fieldsMappedById = {};\n\n    this._withoutReactualizingFormOptions(() => {\n      this.$element\n      .find(this.options.inputs)\n      .not(this.options.excluded)\n      .not(`[${this.options.namespace}excluded=true]`)\n      .each((_, element) => {\n        var fieldInstance = new window.Parsley.Factory(element, {}, this);\n\n        // Only add valid and not excluded `Field` and `FieldMultiple` children\n        if ('Field' === fieldInstance.__class__ || 'FieldMultiple' === fieldInstance.__class__) {\n          let uniqueId = fieldInstance.__class__ + '-' + fieldInstance.__id__;\n          if ('undefined' === typeof this.fieldsMappedById[uniqueId]) {\n            this.fieldsMappedById[uniqueId] = fieldInstance;\n            this.fields.push(fieldInstance);\n          }\n        }\n      });\n\n      $.each(Utils.difference(oldFields, this.fields), (_, field) => {\n        field.reset();\n      });\n    });\n    return this;\n  },\n\n  // Internal only.\n  // Looping on a form's fields to do validation or similar\n  // will trigger reactualizing options on all of them, which\n  // in turn will reactualize the form's options.\n  // To avoid calling actualizeOptions so many times on the form\n  // for nothing, _withoutReactualizingFormOptions temporarily disables\n  // the method actualizeOptions on this form while `fn` is called.\n  _withoutReactualizingFormOptions: function (fn) {\n    var oldActualizeOptions = this.actualizeOptions;\n    this.actualizeOptions = function () { return this; };\n    var result = fn();\n    this.actualizeOptions = oldActualizeOptions;\n    return result;\n  },\n\n  // Internal only.\n  // Shortcut to trigger an event\n  // Returns true iff event is not interrupted and default not prevented.\n  _trigger: function (eventName) {\n    return this.trigger('form:' + eventName);\n  }\n\n};\n\nexport default Form;\n","import Utils from './utils';\nimport Validator from './validator';\n\nconst Constraint = function(parsleyField, name, requirements, priority, isDomConstraint) {\n  const validatorSpec = window.Parsley._validatorRegistry.validators[name];\n  const validator = new Validator(validatorSpec);\n  priority = priority || parsleyField.options[name + 'Priority'] || validator.priority;\n  isDomConstraint = (true === isDomConstraint);\n\n  Object.assign(this, {\n    validator,\n    name,\n    requirements,\n    priority,\n    isDomConstraint\n  });\n  this._parseRequirements(parsleyField.options);\n};\n\nconst capitalize = function(str) {\n  const cap = str[0].toUpperCase();\n  return cap + str.slice(1);\n};\n\nConstraint.prototype = {\n  validate: function(value, instance) {\n    return this.validator.validate(value, ...this.requirementList, instance);\n  },\n\n  _parseRequirements: function(options) {\n    this.requirementList = this.validator.parseRequirements(this.requirements,\n      key => options[this.name + capitalize(key)]\n    );\n  }\n};\n\nexport default Constraint;\n","import $ from 'jquery';\nimport Constraint from './constraint';\nimport UI from './ui';\nimport Utils from './utils';\n\nvar Field = function (field, domOptions, options, parsleyFormInstance) {\n  this.__class__ = 'Field';\n\n  this.element = field;\n  this.$element = $(field);\n\n  // Set parent if we have one\n  if ('undefined' !== typeof parsleyFormInstance) {\n    this.parent = parsleyFormInstance;\n  }\n\n  this.options = options;\n  this.domOptions = domOptions;\n\n  // Initialize some properties\n  this.constraints = [];\n  this.constraintsByName = {};\n  this.validationResult = true;\n\n  // Bind constraints\n  this._bindConstraints();\n};\n\nvar statusMapping = {pending: null, resolved: true, rejected: false};\n\nField.prototype = {\n  // # Public API\n  // Validate field and trigger some events for mainly `UI`\n  // @returns `true`, an array of the validators that failed, or\n  // `null` if validation is not finished. Prefer using whenValidate\n  validate: function (options) {\n    if (arguments.length >= 1 && !$.isPlainObject(options)) {\n      Utils.warnOnce('Calling validate on a parsley field without passing arguments as an object is deprecated.');\n      options = {options};\n    }\n    var promise = this.whenValidate(options);\n    if (!promise)  // If excluded with `group` option\n      return true;\n    switch (promise.state()) {\n      case 'pending': return null;\n      case 'resolved': return true;\n      case 'rejected': return this.validationResult;\n    }\n  },\n\n  // Validate field and trigger some events for mainly `UI`\n  // @returns a promise that succeeds only when all validations do\n  // or `undefined` if field is not in the given `group`.\n  whenValidate: function ({force, group} =  {}) {\n    // do not validate a field if not the same as given validation group\n    this.refresh();\n    if (group && !this._isInGroup(group))\n      return;\n\n    this.value = this.getValue();\n\n    // Field Validate event. `this.value` could be altered for custom needs\n    this._trigger('validate');\n\n    return this.whenValid({force, value: this.value, _refreshed: true})\n      .always(() => { this._reflowUI(); })\n      .done(() =>   { this._trigger('success'); })\n      .fail(() =>   { this._trigger('error'); })\n      .always(() => { this._trigger('validated'); })\n      .pipe(...this._pipeAccordingToValidationResult());\n  },\n\n  hasConstraints: function () {\n    return 0 !== this.constraints.length;\n  },\n\n  // An empty optional field does not need validation\n  needsValidation: function (value) {\n    if ('undefined' === typeof value)\n      value = this.getValue();\n\n    // If a field is empty and not required, it is valid\n    // Except if `data-parsley-validate-if-empty` explicitely added, useful for some custom validators\n    if (!value.length && !this._isRequired() && 'undefined' === typeof this.options.validateIfEmpty)\n      return false;\n\n    return true;\n  },\n\n  _isInGroup: function (group) {\n    if (Array.isArray(this.options.group))\n      return -1 !== $.inArray(group, this.options.group);\n    return this.options.group === group;\n  },\n\n  // Just validate field. Do not trigger any event.\n  // Returns `true` iff all constraints pass, `false` if there are failures,\n  // or `null` if the result can not be determined yet (depends on a promise)\n  // See also `whenValid`.\n  isValid: function (options) {\n    if (arguments.length >= 1 && !$.isPlainObject(options)) {\n      Utils.warnOnce('Calling isValid on a parsley field without passing arguments as an object is deprecated.');\n      var [force, value] = arguments;\n      options = {force, value};\n    }\n    var promise = this.whenValid(options);\n    if (!promise) // Excluded via `group`\n      return true;\n    return statusMapping[promise.state()];\n  },\n\n  // Just validate field. Do not trigger any event.\n  // @returns a promise that succeeds only when all validations do\n  // or `undefined` if the field is not in the given `group`.\n  // The argument `force` will force validation of empty fields.\n  // If a `value` is given, it will be validated instead of the value of the input.\n  whenValid: function ({force = false, value, group, _refreshed} = {}) {\n    // Recompute options and rebind constraints to have latest changes\n    if (!_refreshed)\n      this.refresh();\n    // do not validate a field if not the same as given validation group\n    if (group && !this._isInGroup(group))\n      return;\n\n    this.validationResult = true;\n\n    // A field without constraint is valid\n    if (!this.hasConstraints())\n      return $.when();\n\n    // Value could be passed as argument, needed to add more power to 'field:validate'\n    if ('undefined' === typeof value || null === value)\n      value = this.getValue();\n\n    if (!this.needsValidation(value) && true !== force)\n      return $.when();\n\n    var groupedConstraints = this._getGroupedConstraints();\n    var promises = [];\n    $.each(groupedConstraints, (_, constraints) => {\n      // Process one group of constraints at a time, we validate the constraints\n      // and combine the promises together.\n      var promise = Utils.all(\n        $.map(constraints, constraint => this._validateConstraint(value, constraint))\n      );\n      promises.push(promise);\n      if (promise.state() === 'rejected')\n        return false; // Interrupt processing if a group has already failed\n    });\n    return Utils.all(promises);\n  },\n\n  // @returns a promise\n  _validateConstraint: function(value, constraint) {\n    var result = constraint.validate(value, this);\n    // Map false to a failed promise\n    if (false === result)\n      result = $.Deferred().reject();\n    // Make sure we return a promise and that we record failures\n    return Utils.all([result]).fail(errorMessage => {\n      if (!(this.validationResult instanceof Array))\n        this.validationResult = [];\n      this.validationResult.push({\n        assert: constraint,\n        errorMessage: 'string' === typeof errorMessage && errorMessage\n      });\n    });\n  },\n\n  // @returns Parsley field computed value that could be overrided or configured in DOM\n  getValue: function () {\n    var value;\n\n    // Value could be overriden in DOM or with explicit options\n    if ('function' === typeof this.options.value)\n      value = this.options.value(this);\n    else if ('undefined' !== typeof this.options.value)\n      value = this.options.value;\n    else\n      value = this.$element.val();\n\n    // Handle wrong DOM or configurations\n    if ('undefined' === typeof value || null === value)\n      return '';\n\n    return this._handleWhitespace(value);\n  },\n\n  // Reset UI\n  reset: function () {\n    this._resetUI();\n    return this._trigger('reset');\n  },\n\n  // Destroy Parsley instance (+ UI)\n  destroy: function () {\n    // Field case: emit destroy event to clean UI and then destroy stored instance\n    this._destroyUI();\n    this.$element.removeData('Parsley');\n    this.$element.removeData('FieldMultiple');\n    this._trigger('destroy');\n  },\n\n  // Actualize options and rebind constraints\n  refresh: function () {\n    this._refreshConstraints();\n    return this;\n  },\n\n  _refreshConstraints: function () {\n    return this.actualizeOptions()._bindConstraints();\n  },\n\n  refreshConstraints: function() {\n    Utils.warnOnce(\"Parsley's refreshConstraints is deprecated. Please use refresh\");\n    return this.refresh();\n  },\n\n  /**\n  * Add a new constraint to a field\n  *\n  * @param {String}   name\n  * @param {Mixed}    requirements      optional\n  * @param {Number}   priority          optional\n  * @param {Boolean}  isDomConstraint   optional\n  */\n  addConstraint: function (name, requirements, priority, isDomConstraint) {\n\n    if (window.Parsley._validatorRegistry.validators[name]) {\n      var constraint = new Constraint(this, name, requirements, priority, isDomConstraint);\n\n      // if constraint already exist, delete it and push new version\n      if ('undefined' !== this.constraintsByName[constraint.name])\n        this.removeConstraint(constraint.name);\n\n      this.constraints.push(constraint);\n      this.constraintsByName[constraint.name] = constraint;\n    }\n\n    return this;\n  },\n\n  // Remove a constraint\n  removeConstraint: function (name) {\n    for (var i = 0; i < this.constraints.length; i++)\n      if (name === this.constraints[i].name) {\n        this.constraints.splice(i, 1);\n        break;\n      }\n    delete this.constraintsByName[name];\n    return this;\n  },\n\n  // Update a constraint (Remove + re-add)\n  updateConstraint: function (name, parameters, priority) {\n    return this.removeConstraint(name)\n      .addConstraint(name, parameters, priority);\n  },\n\n  // # Internals\n\n  // Internal only.\n  // Bind constraints from config + options + DOM\n  _bindConstraints: function () {\n    var constraints = [];\n    var constraintsByName = {};\n\n    // clean all existing DOM constraints to only keep javascript user constraints\n    for (var i = 0; i < this.constraints.length; i++)\n      if (false === this.constraints[i].isDomConstraint) {\n        constraints.push(this.constraints[i]);\n        constraintsByName[this.constraints[i].name] = this.constraints[i];\n      }\n\n    this.constraints = constraints;\n    this.constraintsByName = constraintsByName;\n\n    // then re-add Parsley DOM-API constraints\n    for (var name in this.options)\n      this.addConstraint(name, this.options[name], undefined, true);\n\n    // finally, bind special HTML5 constraints\n    return this._bindHtml5Constraints();\n  },\n\n  // Internal only.\n  // Bind specific HTML5 constraints to be HTML5 compliant\n  _bindHtml5Constraints: function () {\n    // html5 required\n    if (null !== this.element.getAttribute('required'))\n      this.addConstraint('required', true, undefined, true);\n\n    // html5 pattern\n    if (null !== this.element.getAttribute('pattern'))\n      this.addConstraint('pattern', this.element.getAttribute('pattern'), undefined, true);\n\n    // range\n    let min = this.element.getAttribute('min');\n    let max = this.element.getAttribute('max');\n    if (null !== min && null !== max)\n      this.addConstraint('range', [min, max], undefined, true);\n\n    // HTML5 min\n    else if (null !== min)\n      this.addConstraint('min', min, undefined, true);\n\n    // HTML5 max\n    else if (null !== max)\n      this.addConstraint('max', max, undefined, true);\n\n\n    // length\n    if (null !== this.element.getAttribute('minlength') && null !== this.element.getAttribute('maxlength'))\n      this.addConstraint('length', [this.element.getAttribute('minlength'), this.element.getAttribute('maxlength')], undefined, true);\n\n    // HTML5 minlength\n    else if (null !== this.element.getAttribute('minlength'))\n      this.addConstraint('minlength', this.element.getAttribute('minlength'), undefined, true);\n\n    // HTML5 maxlength\n    else if (null !== this.element.getAttribute('maxlength'))\n      this.addConstraint('maxlength', this.element.getAttribute('maxlength'), undefined, true);\n\n\n    // html5 types\n    var type = Utils.getType(this.element);\n\n    // Small special case here for HTML5 number: integer validator if step attribute is undefined or an integer value, number otherwise\n    if ('number' === type) {\n      return this.addConstraint('type', ['number', {\n        step: this.element.getAttribute('step') || '1',\n        base: min || this.element.getAttribute('value')\n      }], undefined, true);\n    // Regular other HTML5 supported types\n    } else if (/^(email|url|range|date)$/i.test(type)) {\n      return this.addConstraint('type', type, undefined, true);\n    }\n    return this;\n  },\n\n  // Internal only.\n  // Field is required if have required constraint without `false` value\n  _isRequired: function () {\n    if ('undefined' === typeof this.constraintsByName.required)\n      return false;\n\n    return false !== this.constraintsByName.required.requirements;\n  },\n\n  // Internal only.\n  // Shortcut to trigger an event\n  _trigger: function (eventName) {\n    return this.trigger('field:' + eventName);\n  },\n\n  // Internal only\n  // Handles whitespace in a value\n  // Use `data-parsley-whitespace=\"squish\"` to auto squish input value\n  // Use `data-parsley-whitespace=\"trim\"` to auto trim input value\n  _handleWhitespace: function (value) {\n    if (true === this.options.trimValue)\n      Utils.warnOnce('data-parsley-trim-value=\"true\" is deprecated, please use data-parsley-whitespace=\"trim\"');\n\n    if ('squish' === this.options.whitespace)\n      value = value.replace(/\\s{2,}/g, ' ');\n\n    if (('trim' === this.options.whitespace) || ('squish' === this.options.whitespace) || (true === this.options.trimValue))\n      value = Utils.trimString(value);\n\n    return value;\n  },\n\n  _isDateInput: function() {\n    var c = this.constraintsByName.type;\n    return c && c.requirements === 'date';\n  },\n\n  // Internal only.\n  // Returns the constraints, grouped by descending priority.\n  // The result is thus an array of arrays of constraints.\n  _getGroupedConstraints: function () {\n    if (false === this.options.priorityEnabled)\n      return [this.constraints];\n\n    var groupedConstraints = [];\n    var index = {};\n\n    // Create array unique of priorities\n    for (var i = 0; i < this.constraints.length; i++) {\n      var p = this.constraints[i].priority;\n      if (!index[p])\n        groupedConstraints.push(index[p] = []);\n      index[p].push(this.constraints[i]);\n    }\n    // Sort them by priority DESC\n    groupedConstraints.sort(function (a, b) { return b[0].priority - a[0].priority; });\n\n    return groupedConstraints;\n  }\n\n};\n\nexport default Field;\n","import $ from 'jquery';\nimport Utils from './utils';\n\nvar Multiple = function () {\n  this.__class__ = 'FieldMultiple';\n};\n\nMultiple.prototype = {\n  // Add new `$element` sibling for multiple field\n  addElement: function ($element) {\n    this.$elements.push($element);\n\n    return this;\n  },\n\n  // See `Field._refreshConstraints()`\n  _refreshConstraints: function () {\n    var fieldConstraints;\n\n    this.constraints = [];\n\n    // Select multiple special treatment\n    if (this.element.nodeName === 'SELECT') {\n      this.actualizeOptions()._bindConstraints();\n\n      return this;\n    }\n\n    // Gather all constraints for each input in the multiple group\n    for (var i = 0; i < this.$elements.length; i++) {\n\n      // Check if element have not been dynamically removed since last binding\n      if (!$('html').has(this.$elements[i]).length) {\n        this.$elements.splice(i, 1);\n        continue;\n      }\n\n      fieldConstraints = this.$elements[i].data('FieldMultiple')._refreshConstraints().constraints;\n\n      for (var j = 0; j < fieldConstraints.length; j++)\n        this.addConstraint(fieldConstraints[j].name, fieldConstraints[j].requirements, fieldConstraints[j].priority, fieldConstraints[j].isDomConstraint);\n    }\n\n    return this;\n  },\n\n  // See `Field.getValue()`\n  getValue: function () {\n    // Value could be overriden in DOM\n    if ('function' === typeof this.options.value)\n      return this.options.value(this);\n    else if ('undefined' !== typeof this.options.value)\n      return this.options.value;\n\n    // Radio input case\n    if (this.element.nodeName === 'INPUT') {\n      var type = Utils.getType(this.element);\n      if (type === 'radio')\n        return this._findRelated().filter(':checked').val() || '';\n\n      // checkbox input case\n      if (type === 'checkbox') {\n        var values = [];\n\n        this._findRelated().filter(':checked').each(function () {\n          values.push($(this).val());\n        });\n\n        return values;\n      }\n    }\n\n    // Select multiple case\n    if (this.element.nodeName === 'SELECT' && null === this.$element.val())\n      return [];\n\n    // Default case that should never happen\n    return this.$element.val();\n  },\n\n  _init: function () {\n    this.$elements = [this.$element];\n\n    return this;\n  }\n};\n\nexport default Multiple;\n","import $ from 'jquery';\nimport Utils from './utils';\nimport Base from './base';\nimport Form from './form';\nimport Field from './field';\nimport Multiple from './multiple';\n\nvar Factory = function (element, options, parsleyFormInstance) {\n  this.element = element;\n  this.$element = $(element);\n\n  // If the element has already been bound, returns its saved Parsley instance\n  var savedparsleyFormInstance = this.$element.data('Parsley');\n  if (savedparsleyFormInstance) {\n\n    // If the saved instance has been bound without a Form parent and there is one given in this call, add it\n    if ('undefined' !== typeof parsleyFormInstance && savedparsleyFormInstance.parent === window.Parsley) {\n      savedparsleyFormInstance.parent = parsleyFormInstance;\n      savedparsleyFormInstance._resetOptions(savedparsleyFormInstance.options);\n    }\n\n    if ('object' === typeof options) {\n      Object.assign(savedparsleyFormInstance.options, options);\n    }\n\n    return savedparsleyFormInstance;\n  }\n\n  // Parsley must be instantiated with a DOM element or jQuery $element\n  if (!this.$element.length)\n    throw new Error('You must bind Parsley on an existing element.');\n\n  if ('undefined' !== typeof parsleyFormInstance && 'Form' !== parsleyFormInstance.__class__)\n    throw new Error('Parent instance must be a Form instance');\n\n  this.parent = parsleyFormInstance || window.Parsley;\n  return this.init(options);\n};\n\nFactory.prototype = {\n  init: function (options) {\n    this.__class__ = 'Parsley';\n    this.__version__ = 'VERSION';\n    this.__id__ = Utils.generateID();\n\n    // Pre-compute options\n    this._resetOptions(options);\n\n    // A Form instance is obviously a `<form>` element but also every node that is not an input and has the `data-parsley-validate` attribute\n    if (this.element.nodeName === 'FORM' || (Utils.checkAttr(this.element, this.options.namespace, 'validate') && !this.$element.is(this.options.inputs)))\n      return this.bind('parsleyForm');\n\n    // Every other element is bound as a `Field` or `FieldMultiple`\n    return this.isMultiple() ? this.handleMultiple() : this.bind('parsleyField');\n  },\n\n  isMultiple: function () {\n    var type = Utils.getType(this.element);\n    return ((type === 'radio' || type === 'checkbox') ||\n      (this.element.nodeName === 'SELECT' && null !== this.element.getAttribute('multiple')));\n  },\n\n  // Multiples fields are a real nightmare :(\n  // Maybe some refactoring would be appreciated here...\n  handleMultiple: function () {\n    var name;\n    var multiple;\n    var parsleyMultipleInstance;\n\n    // Handle multiple name\n    this.options.multiple = this.options.multiple ||\n      (name = this.element.getAttribute('name')) ||\n      this.element.getAttribute('id');\n\n    // Special select multiple input\n    if (this.element.nodeName === 'SELECT' && null !== this.element.getAttribute('multiple')) {\n      this.options.multiple = this.options.multiple || this.__id__;\n      return this.bind('parsleyFieldMultiple');\n\n    // Else for radio / checkboxes, we need a `name` or `data-parsley-multiple` to properly bind it\n    } else if (!this.options.multiple) {\n      Utils.warn('To be bound by Parsley, a radio, a checkbox and a multiple select input must have either a name or a multiple option.', this.$element);\n      return this;\n    }\n\n    // Remove special chars\n    this.options.multiple = this.options.multiple.replace(/(:|\\.|\\[|\\]|\\{|\\}|\\$)/g, '');\n\n    // Add proper `data-parsley-multiple` to siblings if we have a valid multiple name\n    if (name) {\n      $('input[name=\"' + name + '\"]').each((i, input) => {\n        var type = Utils.getType(input);\n        if ((type === 'radio' || type === 'checkbox'))\n          input.setAttribute(this.options.namespace + 'multiple', this.options.multiple);\n      });\n    }\n\n    // Check here if we don't already have a related multiple instance saved\n    var $previouslyRelated = this._findRelated();\n    for (var i = 0; i < $previouslyRelated.length; i++) {\n      parsleyMultipleInstance = $($previouslyRelated.get(i)).data('Parsley');\n      if ('undefined' !== typeof parsleyMultipleInstance) {\n\n        if (!this.$element.data('FieldMultiple')) {\n          parsleyMultipleInstance.addElement(this.$element);\n        }\n\n        break;\n      }\n    }\n\n    // Create a secret Field instance for every multiple field. It will be stored in `data('FieldMultiple')`\n    // And will be useful later to access classic `Field` stuff while being in a `FieldMultiple` instance\n    this.bind('parsleyField', true);\n\n    return parsleyMultipleInstance || this.bind('parsleyFieldMultiple');\n  },\n\n  // Return proper `Form`, `Field` or `FieldMultiple`\n  bind: function (type, doNotStore) {\n    var parsleyInstance;\n\n    switch (type) {\n      case 'parsleyForm':\n        parsleyInstance = $.extend(\n          new Form(this.element, this.domOptions, this.options),\n          new Base(),\n          window.ParsleyExtend\n        )._bindFields();\n        break;\n      case 'parsleyField':\n        parsleyInstance = $.extend(\n          new Field(this.element, this.domOptions, this.options, this.parent),\n          new Base(),\n          window.ParsleyExtend\n        );\n        break;\n      case 'parsleyFieldMultiple':\n        parsleyInstance = $.extend(\n          new Field(this.element, this.domOptions, this.options, this.parent),\n          new Multiple(),\n          new Base(),\n          window.ParsleyExtend\n        )._init();\n        break;\n      default:\n        throw new Error(type + 'is not a supported Parsley type');\n    }\n\n    if (this.options.multiple)\n      Utils.setAttr(this.element, this.options.namespace, 'multiple', this.options.multiple);\n\n    if ('undefined' !== typeof doNotStore) {\n      this.$element.data('FieldMultiple', parsleyInstance);\n\n      return parsleyInstance;\n    }\n\n    // Store the freshly bound instance in a DOM element for later access using jQuery `data()`\n    this.$element.data('Parsley', parsleyInstance);\n\n    // Tell the world we have a new Form or Field instance!\n    parsleyInstance._actualizeTriggers();\n    parsleyInstance._trigger('init');\n\n    return parsleyInstance;\n  }\n};\n\nexport default Factory;\n","import $ from 'jquery';\nimport Utils from './utils';\nimport Defaults from './defaults';\nimport Base from './base';\nimport ValidatorRegistry from './validator_registry';\nimport UI from './ui';\nimport Form from './form';\nimport Field from './field';\nimport Multiple from './multiple';\nimport Factory from './factory';\n\nvar vernums = $.fn.jquery.split('.');\nif (parseInt(vernums[0]) <= 1 && parseInt(vernums[1]) < 8) {\n  throw \"The loaded version of jQuery is too old. Please upgrade to 1.8.x or better.\";\n}\nif (!vernums.forEach) {\n  Utils.warn('Parsley requires ES5 to run properly. Please include https://github.com/es-shims/es5-shim');\n}\n// Inherit `on`, `off` & `trigger` to Parsley:\nvar Parsley = Object.assign(new Base(), {\n    element: document,\n    $element: $(document),\n    actualizeOptions: null,\n    _resetOptions: null,\n    Factory: Factory,\n    version: 'VERSION'\n  });\n\n// Supplement Field and Form with Base\n// This way, the constructors will have access to those methods\nObject.assign(Field.prototype, UI.Field, Base.prototype);\nObject.assign(Form.prototype, UI.Form, Base.prototype);\n// Inherit actualizeOptions and _resetOptions:\nObject.assign(Factory.prototype, Base.prototype);\n\n// ### jQuery API\n// `$('.elem').parsley(options)` or `$('.elem').psly(options)`\n$.fn.parsley = $.fn.psly = function (options) {\n  if (this.length > 1) {\n    var instances = [];\n\n    this.each(function () {\n      instances.push($(this).parsley(options));\n    });\n\n    return instances;\n  }\n\n  // Return undefined if applied to non existing DOM element\n  if (this.length == 0) {\n    return;\n  }\n\n  return new Factory(this[0], options);\n};\n\n// ### Field and Form extension\n// Ensure the extension is now defined if it wasn't previously\nif ('undefined' === typeof window.ParsleyExtend)\n  window.ParsleyExtend = {};\n\n// ### Parsley config\n// Inherit from ParsleyDefault, and copy over any existing values\nParsley.options = Object.assign(Utils.objectCreate(Defaults), window.ParsleyConfig);\nwindow.ParsleyConfig = Parsley.options; // Old way of accessing global options\n\n// ### Globals\nwindow.Parsley = window.psly = Parsley;\nParsley.Utils = Utils;\nwindow.ParsleyUtils = {};\n$.each(Utils, (key, value) => {\n  if ('function' === typeof value) {\n    window.ParsleyUtils[key] = (...args) => {\n      Utils.warnOnce('Accessing `window.ParsleyUtils` is deprecated. Use `window.Parsley.Utils` instead.');\n      return Utils[key](...args);\n    };\n  }\n});\n\n// ### Define methods that forward to the registry, and deprecate all access except through window.Parsley\nvar registry = window.Parsley._validatorRegistry = new ValidatorRegistry(window.ParsleyConfig.validators, window.ParsleyConfig.i18n);\nwindow.ParsleyValidator = {};\n$.each('setLocale addCatalog addMessage addMessages getErrorMessage formatMessage addValidator updateValidator removeValidator hasValidator'.split(' '), function (i, method) {\n  window.Parsley[method] = (...args) => registry[method](...args);\n  window.ParsleyValidator[method] = function () {\n    Utils.warnOnce(`Accessing the method '${method}' through Validator is deprecated. Simply call 'window.Parsley.${method}(...)'`);\n    return window.Parsley[method](...arguments);\n  };\n});\n\n// ### UI\n// Deprecated global object\nwindow.Parsley.UI = UI;\nwindow.ParsleyUI = {\n  removeError: function (instance, name, doNotUpdateClass) {\n    var updateClass = true !== doNotUpdateClass;\n    Utils.warnOnce(`Accessing UI is deprecated. Call 'removeError' on the instance directly. Please comment in issue 1073 as to your need to call this method.`);\n    return instance.removeError(name, {updateClass});\n  },\n  getErrorsMessages: function (instance) {\n    Utils.warnOnce(`Accessing UI is deprecated. Call 'getErrorsMessages' on the instance directly.`);\n    return instance.getErrorsMessages();\n  }\n};\n$.each('addError updateError'.split(' '), function (i, method) {\n  window.ParsleyUI[method] = function (instance, name, message, assert, doNotUpdateClass) {\n    var updateClass = true !== doNotUpdateClass;\n    Utils.warnOnce(`Accessing UI is deprecated. Call '${method}' on the instance directly. Please comment in issue 1073 as to your need to call this method.`);\n    return instance[method](name, {message, assert, updateClass});\n  };\n});\n\n// ### PARSLEY auto-binding\n// Prevent it by setting `ParsleyConfig.autoBind` to `false`\nif (false !== window.ParsleyConfig.autoBind) {\n  $(function () {\n    // Works only on `data-parsley-validate`.\n    if ($('[data-parsley-validate]').length)\n      $('[data-parsley-validate]').parsley();\n  });\n}\n\nexport default Parsley;\n","import $ from 'jquery';\nimport Field from './field';\nimport Form from './form';\nimport Utils from './utils';\n\nvar o = $({});\nvar deprecated = function () {\n  Utils.warnOnce(\"Parsley's pubsub module is deprecated; use the 'on' and 'off' methods on parsley instances or window.Parsley\");\n};\n\n// Returns an event handler that calls `fn` with the arguments it expects\nfunction adapt(fn, context) {\n  // Store to allow unbinding\n  if (!fn.parsleyAdaptedCallback) {\n    fn.parsleyAdaptedCallback = function () {\n      var args = Array.prototype.slice.call(arguments, 0);\n      args.unshift(this);\n      fn.apply(context || o, args);\n    };\n  }\n  return fn.parsleyAdaptedCallback;\n}\n\nvar eventPrefix = 'parsley:';\n// Converts 'parsley:form:validate' into 'form:validate'\nfunction eventName(name) {\n  if (name.lastIndexOf(eventPrefix, 0) === 0)\n    return name.substr(eventPrefix.length);\n  return name;\n}\n\n// $.listen is deprecated. Use Parsley.on instead.\n$.listen = function (name, callback) {\n  var context;\n  deprecated();\n  if ('object' === typeof arguments[1] && 'function' === typeof arguments[2]) {\n    context = arguments[1];\n    callback = arguments[2];\n  }\n\n  if ('function' !== typeof callback)\n    throw new Error('Wrong parameters');\n\n  window.Parsley.on(eventName(name), adapt(callback, context));\n};\n\n$.listenTo = function (instance, name, fn) {\n  deprecated();\n  if (!(instance instanceof Field) && !(instance instanceof Form))\n    throw new Error('Must give Parsley instance');\n\n  if ('string' !== typeof name || 'function' !== typeof fn)\n    throw new Error('Wrong parameters');\n\n  instance.on(eventName(name), adapt(fn));\n};\n\n$.unsubscribe = function (name, fn) {\n  deprecated();\n  if ('string' !== typeof name || 'function' !== typeof fn)\n    throw new Error('Wrong arguments');\n  window.Parsley.off(eventName(name), fn.parsleyAdaptedCallback);\n};\n\n$.unsubscribeTo = function (instance, name) {\n  deprecated();\n  if (!(instance instanceof Field) && !(instance instanceof Form))\n    throw new Error('Must give Parsley instance');\n  instance.off(eventName(name));\n};\n\n$.unsubscribeAll = function (name) {\n  deprecated();\n  window.Parsley.off(eventName(name));\n  $('form,input,textarea,select').each(function () {\n    var instance = $(this).data('Parsley');\n    if (instance) {\n      instance.off(eventName(name));\n    }\n  });\n};\n\n// $.emit is deprecated. Use jQuery events instead.\n$.emit = function (name, instance) {\n  deprecated();\n  var instanceGiven = (instance instanceof Field) || (instance instanceof Form);\n  var args = Array.prototype.slice.call(arguments, instanceGiven ? 2 : 1);\n  args.unshift(eventName(name));\n  if (!instanceGiven) {\n    instance = window.Parsley;\n  }\n  instance.trigger(...args);\n};\n\nexport default {};\n","import $ from 'jquery';\nimport Utils from './utils';\nimport Base from './base';\n\nimport Parsley from './main';\n\n$.extend(true, Parsley, {\n  asyncValidators: {\n    'default': {\n      fn: function (xhr) {\n        // By default, only status 2xx are deemed successful.\n        // Note: we use status instead of state() because responses with status 200\n        // but invalid messages (e.g. an empty body for content type set to JSON) will\n        // result in state() === 'rejected'.\n        return xhr.status >= 200 && xhr.status < 300;\n      },\n      url: false\n    },\n    reverse: {\n      fn: function (xhr) {\n        // If reverse option is set, a failing ajax request is considered successful\n        return xhr.status < 200 || xhr.status >= 300;\n      },\n      url: false\n    }\n  },\n\n  addAsyncValidator: function (name, fn, url, options) {\n    Parsley.asyncValidators[name] = {\n      fn: fn,\n      url: url || false,\n      options: options || {}\n    };\n\n    return this;\n  }\n\n});\n\nParsley.addValidator('remote', {\n  requirementType: {\n    '': 'string',\n    'validator': 'string',\n    'reverse': 'boolean',\n    'options': 'object'\n  },\n\n  validateString: function (value, url, options, instance) {\n    var data = {};\n    var ajaxOptions;\n    var csr;\n    var validator = options.validator || (true === options.reverse ? 'reverse' : 'default');\n\n    if ('undefined' === typeof Parsley.asyncValidators[validator])\n      throw new Error('Calling an undefined async validator: `' + validator + '`');\n\n    url = Parsley.asyncValidators[validator].url || url;\n\n    // Fill current value\n    if (url.indexOf('{value}') > -1) {\n      url = url.replace('{value}', encodeURIComponent(value));\n    } else {\n      data[instance.element.getAttribute('name') || instance.element.getAttribute('id')] = value;\n    }\n\n    // Merge options passed in from the function with the ones in the attribute\n    var remoteOptions = $.extend(true, options.options || {} , Parsley.asyncValidators[validator].options);\n\n    // All `$.ajax(options)` could be overridden or extended directly from DOM in `data-parsley-remote-options`\n    ajaxOptions = $.extend(true, {}, {\n      url: url,\n      data: data,\n      type: 'GET'\n    }, remoteOptions);\n\n    // Generate store key based on ajax options\n    instance.trigger('field:ajaxoptions', instance, ajaxOptions);\n\n    csr = $.param(ajaxOptions);\n\n    // Initialise querry cache\n    if ('undefined' === typeof Parsley._remoteCache)\n      Parsley._remoteCache = {};\n\n    // Try to retrieve stored xhr\n    var xhr = Parsley._remoteCache[csr] = Parsley._remoteCache[csr] || $.ajax(ajaxOptions);\n\n    var handleXhr = function () {\n      var result = Parsley.asyncValidators[validator].fn.call(instance, xhr, url, options);\n      if (!result) // Map falsy results to rejected promise\n        result = $.Deferred().reject();\n      return $.when(result);\n    };\n\n    return xhr.then(handleXhr, handleXhr);\n  },\n\n  priority: -1\n});\n\nParsley.on('form:submit', function () {\n  Parsley._remoteCache = {};\n});\n\nBase.prototype.addAsyncValidator = function () {\n  Utils.warnOnce('Accessing the method `addAsyncValidator` through an instance is deprecated. Simply call `Parsley.addAsyncValidator(...)`');\n  return Parsley.addAsyncValidator(...arguments);\n};\n","// This is included with the Parsley library itself,\n// thus there is no use in adding it to your project.\nimport Parsley from '../parsley/main';\n\nParsley.addMessages('en', {\n  defaultMessage: \"This value seems to be invalid.\",\n  type: {\n    email:        \"This value should be a valid email.\",\n    url:          \"This value should be a valid url.\",\n    number:       \"This value should be a valid number.\",\n    integer:      \"This value should be a valid integer.\",\n    digits:       \"This value should be digits.\",\n    alphanum:     \"This value should be alphanumeric.\"\n  },\n  notblank:       \"This value should not be blank.\",\n  required:       \"This value is required.\",\n  pattern:        \"This value seems to be invalid.\",\n  min:            \"This value should be greater than or equal to %s.\",\n  max:            \"This value should be lower than or equal to %s.\",\n  range:          \"This value should be between %s and %s.\",\n  minlength:      \"This value is too short. It should have %s characters or more.\",\n  maxlength:      \"This value is too long. It should have %s characters or fewer.\",\n  length:         \"This value length is invalid. It should be between %s and %s characters long.\",\n  mincheck:       \"You must select at least %s choices.\",\n  maxcheck:       \"You must select %s choices or fewer.\",\n  check:          \"You must select between %s and %s choices.\",\n  equalto:        \"This value should be the same.\",\n  euvatin:        \"It's not a valid VAT Identification Number.\",\n});\n\nParsley.setLocale('en');\n","/**\n * inputevent - Alleviate browser bugs for input events\n * https://github.com/marcandre/inputevent\n * @version v0.0.3 - (built Thu, Apr 14th 2016, 5:58 pm)\n * @author Marc-Andre Lafortune <github@marc-andre.ca>\n * @license MIT\n */\n\nimport $ from 'jquery';\n\nfunction InputEvent() {\n  let globals = window || global;\n\n  // Slightly odd way construct our object. This way methods are force bound.\n  // Used to test for duplicate library.\n  Object.assign(this, {\n\n    // For browsers that do not support isTrusted, assumes event is native.\n    isNativeEvent: evt => {\n      return evt.originalEvent && evt.originalEvent.isTrusted !== false;\n    },\n\n    fakeInputEvent: evt => {\n      if (this.isNativeEvent(evt)) {\n        $(evt.target).trigger('input');\n      }\n    },\n\n    misbehaves: evt => {\n      if (this.isNativeEvent(evt)) {\n        this.behavesOk(evt);\n        $(document)\n          .on('change.inputevent', evt.data.selector, this.fakeInputEvent);\n        this.fakeInputEvent(evt);\n      }\n    },\n\n    behavesOk: evt => {\n      if (this.isNativeEvent(evt)) {\n        $(document) // Simply unbinds the testing handler\n          .off('input.inputevent', evt.data.selector, this.behavesOk)\n          .off('change.inputevent', evt.data.selector, this.misbehaves);\n      }\n    },\n\n    // Bind the testing handlers\n    install: () => {\n      if (globals.inputEventPatched) {\n        return;\n      }\n      globals.inputEventPatched = '0.0.3';\n      for (let selector of ['select', 'input[type=\"checkbox\"]', 'input[type=\"radio\"]', 'input[type=\"file\"]']) {\n        $(document)\n          .on('input.inputevent', selector, {selector}, this.behavesOk)\n          .on('change.inputevent', selector, {selector}, this.misbehaves);\n      }\n    },\n\n    uninstall: () => {\n      delete globals.inputEventPatched;\n      $(document).off('.inputevent');\n    }\n\n  });\n};\n\nexport default new InputEvent();\n","import $ from 'jquery';\nimport Parsley from './parsley/main';\nimport './parsley/pubsub';\nimport './parsley/remote';\nimport './i18n/en';\nimport inputevent from './vendor/inputevent';\n\ninputevent.install();\n\nexport default Parsley;\n"],"names":["globalID","pastWarnings","Utils","attr","element","namespace","obj","i","attribute","attributes","regex","RegExp","hasOwnProperty","length","specified","test","name","this","camelize","slice","deserializeValue","value","checkAttr","hasAttribute","setAttr","setAttribute","dasherize","String","getType","getAttribute","generateID","num","isNaN","Number","JSON","parse","e","str","replace","match","chr","toUpperCase","toLowerCase","warn","window","console","arguments","warnOnce","msg","_resetWarnings","trimString","string","date","parsed","map","x","parseInt","year","month","day","Date","getFullYear","getMonth","getDate","integer","number","parseFloat","object","regexp","flags","parseRequirement","requirementType","converter","converted","namespaceEvents","events","split","$","evt","join","difference","array","remove","result","each","_","elem","indexOf","push","all","promises","when","objectCreate","Object","create","prototype","Error","_typeof","TypeError","_SubmitSelector","Base","__id__","Defaults","inputs","excluded","priorityEnabled","multiple","group","uiEnabled","validationThreshold","focus","trigger","triggerAfterFailure","errorClass","successClass","classHandler","errorsContainer","errorsWrapper","errorTemplate","asyncSupport","_pipeAccordingToValidationResult","pipe","r","Deferred","_this","validationResult","reject","resolve","promise","actualizeOptions","options","domOptions","parent","_resetOptions","initOptions","_listeners","on","fn","subscribe","listenTo","off","queue","splice","unsubscribe","unsubscribeTo","target","extraArg","call","asyncIsValid","force","whenValid","_findRelated","querySelectorAll","$element","Validator","spec","extend","validate","requirementFirstArg","Array","isArray","validateMultiple","instance","validateDate","_isDateInput","validateNumber","validateString","parseRequirements","requirements","extraOptionReader","type","values","m","convertArrayRequirement","isPlainObject","requirementSpec","main","extra","key","convertExtraOptionRequirement","priority","ValidatorRegistry","validators","catalog","__class__","locale","init","typeTesters","email","digits","alphanum","url","range","decimalPlaces","Math","max","operatorToValidator","operator","requirementsAndInput","pop","comparisonOperator","_extends","addValidator","Parsley","setLocale","addCatalog","messages","set","addMessage","message","addMessages","nameMessageObject","arg1","arg2","_setValidator","hasValidator","updateValidator","removeValidator","validator","getErrorMessage","constraint","formatMessage","defaultMessage","en","parameters","notblank","required","step","base","tester","nb","decimals","toInt","f","round","pow","pattern","minlength","requirement","maxlength","min","mincheck","maxcheck","check","equalto","refOrValue","$reference","val","euvatin","UI","Form","_actualizeTriggers","onSubmitValidate","onSubmitButton","_focusedField","fields","field","noFocus","_destroyUI","Field","_reflowUI","_buildUI","_ui","diff","diffResults","newResult","oldResult","deep","added","kept","found","j","assert","removed","lastValidationResult","_manageStatusClass","_manageErrorsMessages","_failedOnce","getErrorsMessages","errorMessage","_getErrorMessage","addError","updateClass","_addError","_errorClass","updateError","_updateError","removeError","_removeError","hasConstraints","needsValidation","_successClass","_resetClass","errorsMessagesDisabled","_insertErrorWrapper","$errorsWrapper","find","append","addClass","$errorClassHandler","errorsWrapperId","html","removeAttr","removeClass","customConstraintErrorMessage","_manageClassHandler","validationInformationVisible","$handlerFunction","$handler","jQuery","_inputHolder","nodeName","$errorsContainer","after","$toBind","_this2","_validateIfNeeded","event","getValue","debounce","clearTimeout","_debounced","setTimeout","_this3","_resetUI","children","statusMapping","pending","resolved","rejected","parsley","submitSource","_submitSource","prop","_remoteCache","whenValidate","state","_trigger","stopImmediatePropagation","preventDefault","done","_submit","currentTarget","$synthetic","appendTo","Event","submitEvent","_refreshFields","_withoutReactualizingFormOptions","fail","always","isValid","refresh","reset","destroy","removeData","_bindFields","oldFields","fieldsMappedById","_this4","not","fieldInstance","Factory","uniqueId","oldActualizeOptions","eventName","Constraint","parsleyField","isDomConstraint","validatorSpec","_validatorRegistry","_parseRequirements","parsleyFormInstance","constraints","constraintsByName","_bindConstraints","requirementList","_isInGroup","_refreshed","_isRequired","validateIfEmpty","inArray","groupedConstraints","_getGroupedConstraints","_validateConstraint","_handleWhitespace","_refreshConstraints","refreshConstraints","addConstraint","removeConstraint","updateConstraint","undefined","_bindHtml5Constraints","trimValue","whitespace","c","index","p","sort","a","b","Multiple","addElement","$elements","fieldConstraints","has","data","filter","_init","savedparsleyFormInstance","__version__","is","bind","isMultiple","handleMultiple","parsleyMultipleInstance","input","$previouslyRelated","get","doNotStore","parsleyInstance","ParsleyExtend","vernums","jquery","forEach","document","version","psly","instances","ParsleyConfig","ParsleyUtils","registry","i18n","ParsleyValidator","method","ParsleyUI","doNotUpdateClass","autoBind","deprecated","o","adapt","context","parsleyAdaptedCallback","args","unshift","apply","eventPrefix","lastIndexOf","substr","listen","callback","unsubscribeAll","emit","instanceGiven","asyncValidators","xhr","status","reverse","addAsyncValidator","ajaxOptions","csr","encodeURIComponent","remoteOptions","param","handleXhr","ajax","then","globals","global","isNativeEvent","originalEvent","isTrusted","fakeInputEvent","misbehaves","behavesOk","selector","install","inputEventPatched","uninstall"],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"parsley.min.js","sources":["../src/parsley/utils.js","../src/parsley/base.js","../src/parsley/defaults.js","../src/parsley/validator.js","../src/parsley/validator_registry.js","../src/parsley/ui.js","../src/parsley/form.js","../src/parsley/constraint.js","../src/parsley/field.js","../src/parsley/multiple.js","../src/parsley/factory.js","../src/parsley/main.js","../src/parsley/pubsub.js","../src/parsley/remote.js","../src/i18n/en.js","../src/vendor/inputevent.js","../src/parsley.js"],"sourcesContent":["import $ from 'jquery';\n\nvar globalID = 1;\nvar pastWarnings = {};\n\nvar Utils = {\n  // Parsley DOM-API\n  // returns object from dom attributes and values\n  attr: function (element, namespace, obj) {\n    var i;\n    var attribute;\n    var attributes;\n    var regex = new RegExp('^' + namespace, 'i');\n\n    if ('undefined' === typeof obj)\n      obj = {};\n    else {\n      // Clear all own properties. This won't affect prototype's values\n      for (i in obj) {\n        if (obj.hasOwnProperty(i))\n          delete obj[i];\n      }\n    }\n\n    if (!element)\n      return obj;\n\n    attributes = element.attributes;\n    for (i = attributes.length; i--; ) {\n      attribute = attributes[i];\n\n      if (attribute && attribute.specified && regex.test(attribute.name)) {\n        obj[this.camelize(attribute.name.slice(namespace.length))] = this.deserializeValue(attribute.value);\n      }\n    }\n\n    return obj;\n  },\n\n  checkAttr: function (element, namespace, checkAttr) {\n    return element.hasAttribute(namespace + checkAttr);\n  },\n\n  setAttr: function (element, namespace, attr, value) {\n    element.setAttribute(this.dasherize(namespace + attr), String(value));\n  },\n\n  getType: function(element) {\n    return element.getAttribute('type') || 'text';\n  },\n\n  generateID: function () {\n    return '' + globalID++;\n  },\n\n  /** Third party functions **/\n  deserializeValue: function (value) {\n    var num;\n\n    try {\n      return value ?\n        value == \"true\" ||\n        (value == \"false\" ? false :\n        value == \"null\" ? null :\n        !isNaN(num = Number(value)) ? num :\n        /^[\\[\\{]/.test(value) ? JSON.parse(value) :\n        value)\n        : value;\n    } catch (e) { return value; }\n  },\n\n  // Zepto camelize function\n  camelize: function (str) {\n    return str.replace(/-+(.)?/g, function (match, chr) {\n      return chr ? chr.toUpperCase() : '';\n    });\n  },\n\n  // Zepto dasherize function\n  dasherize: function (str) {\n    return str.replace(/::/g, '/')\n      .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')\n      .replace(/([a-z\\d])([A-Z])/g, '$1_$2')\n      .replace(/_/g, '-')\n      .toLowerCase();\n  },\n\n  warn: function () {\n    if (window.console && 'function' === typeof window.console.warn)\n      window.console.warn(...arguments);\n  },\n\n  warnOnce: function(msg) {\n    if (!pastWarnings[msg]) {\n      pastWarnings[msg] = true;\n      this.warn(...arguments);\n    }\n  },\n\n  _resetWarnings: function () {\n    pastWarnings = {};\n  },\n\n  trimString: function(string) {\n    return string.replace(/^\\s+|\\s+$/g, '');\n  },\n\n  parse: {\n    date: function(string) {\n      let parsed = string.match(/^(\\d{4,})-(\\d\\d)-(\\d\\d)$/);\n      if (!parsed)\n        return null;\n      let [_, year, month, day] = parsed.map(x => parseInt(x, 10));\n      let date = new Date(year, month - 1, day);\n      if (date.getFullYear() !== year || date.getMonth() + 1 !== month || date.getDate() !== day)\n        return null;\n      return date;\n    },\n    string: function(string) {\n      return string;\n    },\n    integer: function(string) {\n      if (isNaN(string))\n        return null;\n      return parseInt(string, 10);\n    },\n    number: function(string) {\n      if (isNaN(string))\n        throw null;\n      return parseFloat(string);\n    },\n    'boolean': function _boolean(string) {\n      return !(/^\\s*false\\s*$/i.test(string));\n    },\n    object: function(string) {\n      return Utils.deserializeValue(string);\n    },\n    regexp: function(regexp) {\n      var flags = '';\n\n      // Test if RegExp is literal, if not, nothing to be done, otherwise, we need to isolate flags and pattern\n      if (/^\\/.*\\/(?:[gimy]*)$/.test(regexp)) {\n        // Replace the regexp literal string with the first match group: ([gimy]*)\n        // If no flag is present, this will be a blank string\n        flags = regexp.replace(/.*\\/([gimy]*)$/, '$1');\n        // Again, replace the regexp literal string with the first match group:\n        // everything excluding the opening and closing slashes and the flags\n        regexp = regexp.replace(new RegExp('^/(.*?)/' + flags + '$'), '$1');\n      } else {\n        // Anchor regexp:\n        regexp = '^' + regexp + '$';\n      }\n      return new RegExp(regexp, flags);\n    }\n  },\n\n  parseRequirement: function(requirementType, string) {\n    var converter = this.parse[requirementType || 'string'];\n    if (!converter)\n      throw 'Unknown requirement specification: \"' + requirementType + '\"';\n    let converted = converter(string);\n    if (converted === null)\n      throw `Requirement is not a ${requirementType}: \"${string}\"`;\n    return converted;\n  },\n\n  namespaceEvents: function(events, namespace) {\n    events = this.trimString(events || '').split(/\\s+/);\n    if (!events[0])\n      return '';\n    return $.map(events, evt => `${evt}.${namespace}`).join(' ');\n  },\n\n  difference: function(array, remove) {\n    // This is O(N^2), should be optimized\n    let result = [];\n    $.each(array, (_, elem) => {\n      if (remove.indexOf(elem) == -1)\n        result.push(elem);\n    });\n    return result;\n  },\n\n  // Alter-ego to native Promise.all, but for jQuery\n  all: function(promises) {\n    // jQuery treats $.when() and $.when(singlePromise) differently; let's avoid that and add spurious elements\n    return $.when(...promises, 42, 42);\n  },\n\n  // Object.create polyfill, see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create#Polyfill\n  objectCreate: Object.create || (function () {\n    var Object = function () {};\n    return function (prototype) {\n      if (arguments.length > 1) {\n        throw Error('Second argument not supported');\n      }\n      if (typeof prototype != 'object') {\n        throw TypeError('Argument must be an object');\n      }\n      Object.prototype = prototype;\n      var result = new Object();\n      Object.prototype = null;\n      return result;\n    };\n  })(),\n\n  _SubmitSelector: 'input[type=\"submit\"], button:submit'\n};\n\nexport default Utils;\n","import $ from 'jquery';\nimport Utils from './utils';\n\nvar Base = function () {\n  this.__id__ = Utils.generateID();\n};\n\nBase.prototype = {\n  asyncSupport: true, // Deprecated\n\n  _pipeAccordingToValidationResult: function () {\n    var pipe = () => {\n      var r = $.Deferred();\n      if (true !== this.validationResult)\n        r.reject();\n      return r.resolve().promise();\n    };\n    return [pipe, pipe];\n  },\n\n  actualizeOptions: function () {\n    Utils.attr(this.element, this.options.namespace, this.domOptions);\n    if (this.parent && this.parent.actualizeOptions)\n      this.parent.actualizeOptions();\n    return this;\n  },\n\n  _resetOptions: function (initOptions) {\n    this.domOptions = Utils.objectCreate(this.parent.options);\n    this.options = Utils.objectCreate(this.domOptions);\n    // Shallow copy of ownProperties of initOptions:\n    for (var i in initOptions) {\n      if (initOptions.hasOwnProperty(i))\n        this.options[i] = initOptions[i];\n    }\n    this.actualizeOptions();\n  },\n\n  _listeners: null,\n\n  // Register a callback for the given event name\n  // Callback is called with context as the first argument and the `this`\n  // The context is the current parsley instance, or window.Parsley if global\n  // A return value of `false` will interrupt the calls\n  on: function (name, fn) {\n    this._listeners = this._listeners || {};\n    var queue = this._listeners[name] = this._listeners[name] || [];\n    queue.push(fn);\n\n    return this;\n  },\n\n  // Deprecated. Use `on` instead\n  subscribe: function(name, fn) {\n    $.listenTo(this, name.toLowerCase(), fn);\n  },\n\n  // Unregister a callback (or all if none is given) for the given event name\n  off: function (name, fn) {\n    var queue = this._listeners && this._listeners[name];\n    if (queue) {\n      if (!fn) {\n        delete this._listeners[name];\n      } else {\n        for (var i = queue.length; i--; )\n          if (queue[i] === fn)\n            queue.splice(i, 1);\n      }\n    }\n    return this;\n  },\n\n  // Deprecated. Use `off`\n  unsubscribe: function(name, fn) {\n    $.unsubscribeTo(this, name.toLowerCase());\n  },\n\n  // Trigger an event of the given name\n  // A return value of `false` interrupts the callback chain\n  // Returns false if execution was interrupted\n  trigger: function (name, target, extraArg) {\n    target = target || this;\n    var queue = this._listeners && this._listeners[name];\n    var result;\n    var parentResult;\n    if (queue) {\n      for (var i = queue.length; i--; ) {\n        result = queue[i].call(target, target, extraArg);\n        if (result === false) return result;\n      }\n    }\n    if (this.parent) {\n      return this.parent.trigger(name, target, extraArg);\n    }\n    return true;\n  },\n\n  asyncIsValid: function (group, force) {\n    Utils.warnOnce(\"asyncIsValid is deprecated; please use whenValid instead\");\n    return this.whenValid({group, force});\n  },\n\n  _findRelated: function () {\n    return this.options.multiple ?\n      $(this.parent.element.querySelectorAll(`[${this.options.namespace}multiple=\"${this.options.multiple}\"]`))\n    : this.$element;\n  }\n};\n\nexport default Base;\n","// All these options could be overriden and specified directly in DOM using\n// `data-parsley-` default DOM-API\n// eg: `inputs` can be set in DOM using `data-parsley-inputs=\"input, textarea\"`\n// eg: `data-parsley-stop-on-first-failing-constraint=\"false\"`\n\nvar Defaults = {\n  // ### General\n\n  // Default data-namespace for DOM API\n  namespace: 'data-parsley-',\n\n  // Supported inputs by default\n  inputs: 'input, textarea, select',\n\n  // Excluded inputs by default\n  excluded: 'input[type=button], input[type=submit], input[type=reset], input[type=hidden]',\n\n  // Stop validating field on highest priority failing constraint\n  priorityEnabled: true,\n\n  // ### Field only\n\n  // identifier used to group together inputs (e.g. radio buttons...)\n  multiple: null,\n\n  // identifier (or array of identifiers) used to validate only a select group of inputs\n  group: null,\n\n  // ### UI\n  // Enable\\Disable error messages\n  uiEnabled: true,\n\n  // Key events threshold before validation\n  validationThreshold: 3,\n\n  // Focused field on form validation error. 'first'|'last'|'none'\n  focus: 'first',\n\n  // event(s) that will trigger validation before first failure. eg: `input`...\n  trigger: false,\n\n  // event(s) that will trigger validation after first failure.\n  triggerAfterFailure: 'input',\n\n  // Class that would be added on every failing validation Parsley field\n  errorClass: 'parsley-error',\n\n  // Same for success validation\n  successClass: 'parsley-success',\n\n  // Return the `$element` that will receive these above success or error classes\n  // Could also be (and given directly from DOM) a valid selector like `'#div'`\n  classHandler: function (Field) {},\n\n  // Return the `$element` where errors will be appended\n  // Could also be (and given directly from DOM) a valid selector like `'#div'`\n  errorsContainer: function (Field) {},\n\n  // ul elem that would receive errors' list\n  errorsWrapper: '<ul class=\"parsley-errors-list\"></ul>',\n\n  // li elem that would receive error message\n  errorTemplate: '<li></li>'\n};\n\nexport default Defaults;\n","import $ from 'jquery';\nimport Utils from './utils';\n\nvar convertArrayRequirement = function(string, length) {\n  var m = string.match(/^\\s*\\[(.*)\\]\\s*$/);\n  if (!m)\n    throw 'Requirement is not an array: \"' + string + '\"';\n  var values = m[1].split(',').map(Utils.trimString);\n  if (values.length !== length)\n    throw 'Requirement has ' + values.length + ' values when ' + length + ' are needed';\n  return values;\n};\n\nvar convertExtraOptionRequirement = function(requirementSpec, string, extraOptionReader) {\n  var main = null;\n  var extra = {};\n  for (var key in requirementSpec) {\n    if (key) {\n      var value = extraOptionReader(key);\n      if ('string' === typeof value)\n        value = Utils.parseRequirement(requirementSpec[key], value);\n      extra[key] = value;\n    } else {\n      main = Utils.parseRequirement(requirementSpec[key], string);\n    }\n  }\n  return [main, extra];\n};\n\n// A Validator needs to implement the methods `validate` and `parseRequirements`\n\nvar Validator = function(spec) {\n  $.extend(true, this, spec);\n};\n\nValidator.prototype = {\n  // Returns `true` iff the given `value` is valid according the given requirements.\n  validate: function(value, requirementFirstArg) {\n    if (this.fn) { // Legacy style validator\n\n      if (arguments.length > 3)  // If more args then value, requirement, instance...\n        requirementFirstArg = [].slice.call(arguments, 1, -1);  // Skip first arg (value) and last (instance), combining the rest\n      return this.fn(value, requirementFirstArg);\n    }\n\n    if (Array.isArray(value)) {\n      if (!this.validateMultiple)\n        throw 'Validator `' + this.name + '` does not handle multiple values';\n      return this.validateMultiple(...arguments);\n    } else {\n      let instance = arguments[arguments.length - 1];\n      if (this.validateDate && instance._isDateInput()) {\n        arguments[0] = Utils.parse.date(arguments[0]);\n        if (arguments[0] === null)\n          return false;\n        return this.validateDate(...arguments);\n      }\n      if (this.validateNumber) {\n        if (!value) // Builtin validators all accept empty strings, except `required` of course\n          return true;\n        if (isNaN(value))\n          return false;\n        arguments[0] = parseFloat(arguments[0]);\n        return this.validateNumber(...arguments);\n      }\n      if (this.validateString) {\n        return this.validateString(...arguments);\n      }\n      throw 'Validator `' + this.name + '` only handles multiple values';\n    }\n  },\n\n  // Parses `requirements` into an array of arguments,\n  // according to `this.requirementType`\n  parseRequirements: function(requirements, extraOptionReader) {\n    if ('string' !== typeof requirements) {\n      // Assume requirement already parsed\n      // but make sure we return an array\n      return Array.isArray(requirements) ? requirements : [requirements];\n    }\n    var type = this.requirementType;\n    if (Array.isArray(type)) {\n      var values = convertArrayRequirement(requirements, type.length);\n      for (var i = 0; i < values.length; i++)\n        values[i] = Utils.parseRequirement(type[i], values[i]);\n      return values;\n    } else if ($.isPlainObject(type)) {\n      return convertExtraOptionRequirement(type, requirements, extraOptionReader);\n    } else {\n      return [Utils.parseRequirement(type, requirements)];\n    }\n  },\n  // Defaults:\n  requirementType: 'string',\n\n  priority: 2\n\n};\n\nexport default Validator;\n","import $ from 'jquery';\nimport Utils from './utils';\nimport Defaults from './defaults';\nimport Validator from './validator';\n\nvar ValidatorRegistry = function (validators, catalog) {\n  this.__class__ = 'ValidatorRegistry';\n\n  // Default Parsley locale is en\n  this.locale = 'en';\n\n  this.init(validators || {}, catalog || {});\n};\n\nvar typeTesters =  {\n  email: /^((([a-zA-Z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-zA-Z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-zA-Z]|\\d|-|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-zA-Z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-zA-Z]|\\d|-|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-zA-Z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))$/,\n\n  // Follow https://www.w3.org/TR/html5/infrastructure.html#floating-point-numbers\n  number: /^-?(\\d*\\.)?\\d+(e[-+]?\\d+)?$/i,\n\n  integer: /^-?\\d+$/,\n\n  digits: /^\\d+$/,\n\n  alphanum: /^\\w+$/i,\n\n  date: {\n    test: value => Utils.parse.date(value) !== null\n  },\n\n  url: new RegExp(\n      \"^\" +\n        // protocol identifier\n        \"(?:(?:https?|ftp)://)?\" + // ** mod: make scheme optional\n        // user:pass authentication\n        \"(?:\\\\S+(?::\\\\S*)?@)?\" +\n        \"(?:\" +\n          // IP address exclusion\n          // private & local networks\n          // \"(?!(?:10|127)(?:\\\\.\\\\d{1,3}){3})\" +   // ** mod: allow local networks\n          // \"(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})\" +  // ** mod: allow local networks\n          // \"(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})\" +  // ** mod: allow local networks\n          // IP address dotted notation octets\n          // excludes loopback network 0.0.0.0\n          // excludes reserved space >= 224.0.0.0\n          // excludes network & broacast addresses\n          // (first & last IP address of each class)\n          \"(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])\" +\n          \"(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}\" +\n          \"(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))\" +\n        \"|\" +\n          // host name\n          \"(?:(?:[a-zA-Z\\\\u00a1-\\\\uffff0-9]-*)*[a-zA-Z\\\\u00a1-\\\\uffff0-9]+)\" +\n          // domain name\n          \"(?:\\\\.(?:[a-zA-Z\\\\u00a1-\\\\uffff0-9]-*)*[a-zA-Z\\\\u00a1-\\\\uffff0-9]+)*\" +\n          // TLD identifier\n          \"(?:\\\\.(?:[a-zA-Z\\\\u00a1-\\\\uffff]{2,}))\" +\n        \")\" +\n        // port number\n        \"(?::\\\\d{2,5})?\" +\n        // resource path\n        \"(?:/\\\\S*)?\" +\n      \"$\"\n    )\n};\ntypeTesters.range = typeTesters.number;\n\n// See http://stackoverflow.com/a/10454560/8279\nvar decimalPlaces = num => {\n  var match = ('' + num).match(/(?:\\.(\\d+))?(?:[eE]([+-]?\\d+))?$/);\n  if (!match) { return 0; }\n  return Math.max(\n       0,\n       // Number of digits right of decimal point.\n       (match[1] ? match[1].length : 0) -\n       // Adjust for scientific notation.\n       (match[2] ? +match[2] : 0));\n};\n\n// parseArguments('number', ['1', '2']) => [1, 2]\nlet parseArguments = (type, args) => args.map(Utils.parse[type]);\n// operatorToValidator returns a validating function for an operator function, applied to the given type\nlet operatorToValidator = (type, operator) => {\n  return (value, ...requirementsAndInput) => {\n    requirementsAndInput.pop(); // Get rid of `input` argument\n    return operator(value, ...parseArguments(type, requirementsAndInput));\n  };\n};\n\nlet comparisonOperator = operator => ({\n  validateDate: operatorToValidator('date', operator),\n  validateNumber: operatorToValidator('number', operator),\n  requirementType: operator.length <= 2 ? 'string' : ['string', 'string'], // Support operators with a 1 or 2 requirement(s)\n  priority: 30\n});\n\nValidatorRegistry.prototype = {\n  init: function (validators, catalog) {\n    this.catalog = catalog;\n    // Copy prototype's validators:\n    this.validators = Object.assign({}, this.validators);\n\n    for (var name in validators)\n      this.addValidator(name, validators[name].fn, validators[name].priority);\n\n    window.Parsley.trigger('parsley:validator:init');\n  },\n\n  // Set new messages locale if we have dictionary loaded in ParsleyConfig.i18n\n  setLocale: function (locale) {\n    if ('undefined' === typeof this.catalog[locale])\n      throw new Error(locale + ' is not available in the catalog');\n\n    this.locale = locale;\n\n    return this;\n  },\n\n  // Add a new messages catalog for a given locale. Set locale for this catalog if set === `true`\n  addCatalog: function (locale, messages, set) {\n    if ('object' === typeof messages)\n      this.catalog[locale] = messages;\n\n    if (true === set)\n      return this.setLocale(locale);\n\n    return this;\n  },\n\n  // Add a specific message for a given constraint in a given locale\n  addMessage: function (locale, name, message) {\n    if ('undefined' === typeof this.catalog[locale])\n      this.catalog[locale] = {};\n\n    this.catalog[locale][name] = message;\n\n    return this;\n  },\n\n  // Add messages for a given locale\n  addMessages: function (locale, nameMessageObject) {\n    for (var name in nameMessageObject)\n      this.addMessage(locale, name, nameMessageObject[name]);\n\n    return this;\n  },\n\n  // Add a new validator\n  //\n  //    addValidator('custom', {\n  //        requirementType: ['integer', 'integer'],\n  //        validateString: function(value, from, to) {},\n  //        priority: 22,\n  //        messages: {\n  //          en: \"Hey, that's no good\",\n  //          fr: \"Aye aye, pas bon du tout\",\n  //        }\n  //    })\n  //\n  // Old API was addValidator(name, function, priority)\n  //\n  addValidator: function (name, arg1, arg2) {\n    if (this.validators[name])\n      Utils.warn('Validator \"' + name + '\" is already defined.');\n    else if (Defaults.hasOwnProperty(name)) {\n      Utils.warn('\"' + name + '\" is a restricted keyword and is not a valid validator name.');\n      return;\n    }\n    return this._setValidator(...arguments);\n  },\n\n  hasValidator: function (name) {\n    return !!this.validators[name];\n  },\n\n  updateValidator: function (name, arg1, arg2) {\n    if (!this.validators[name]) {\n      Utils.warn('Validator \"' + name + '\" is not already defined.');\n      return this.addValidator(...arguments);\n    }\n    return this._setValidator(...arguments);\n  },\n\n  removeValidator: function (name) {\n    if (!this.validators[name])\n      Utils.warn('Validator \"' + name + '\" is not defined.');\n\n    delete this.validators[name];\n\n    return this;\n  },\n\n  _setValidator: function (name, validator, priority) {\n    if ('object' !== typeof validator) {\n      // Old style validator, with `fn` and `priority`\n      validator = {\n        fn: validator,\n        priority: priority\n      };\n    }\n    if (!validator.validate) {\n      validator = new Validator(validator);\n    }\n    this.validators[name] = validator;\n\n    for (var locale in validator.messages || {})\n      this.addMessage(locale, name, validator.messages[locale]);\n\n    return this;\n  },\n\n  getErrorMessage: function (constraint) {\n    var message;\n\n    // Type constraints are a bit different, we have to match their requirements too to find right error message\n    if ('type' === constraint.name) {\n      var typeMessages = this.catalog[this.locale][constraint.name] || {};\n      message = typeMessages[constraint.requirements];\n    } else\n      message = this.formatMessage(this.catalog[this.locale][constraint.name], constraint.requirements);\n\n    return message || this.catalog[this.locale].defaultMessage || this.catalog.en.defaultMessage;\n  },\n\n  // Kind of light `sprintf()` implementation\n  formatMessage: function (string, parameters) {\n    if ('object' === typeof parameters) {\n      for (var i in parameters)\n        string = this.formatMessage(string, parameters[i]);\n\n      return string;\n    }\n\n    return 'string' === typeof string ? string.replace(/%s/i, parameters) : '';\n  },\n\n  // Here is the Parsley default validators list.\n  // A validator is an object with the following key values:\n  //  - priority: an integer\n  //  - requirement: 'string' (default), 'integer', 'number', 'regexp' or an Array of these\n  //  - validateString, validateMultiple, validateNumber: functions returning `true`, `false` or a promise\n  // Alternatively, a validator can be a function that returns such an object\n  //\n  validators: {\n    notblank: {\n      validateString: function(value) {\n        return /\\S/.test(value);\n      },\n      priority: 2\n    },\n    required: {\n      validateMultiple: function(values) {\n        return values.length > 0;\n      },\n      validateString: function(value) {\n        return /\\S/.test(value);\n      },\n      priority: 512\n    },\n    type: {\n      validateString: function(value, type, {step = 'any', base = 0} = {}) {\n        var tester = typeTesters[type];\n        if (!tester) {\n          throw new Error('validator type `' + type + '` is not supported');\n        }\n        if (!value)\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        if (!tester.test(value))\n          return false;\n        if ('number' === type) {\n          if (!/^any$/i.test(step || '')) {\n            var nb = Number(value);\n            var decimals = Math.max(decimalPlaces(step), decimalPlaces(base));\n            if (decimalPlaces(nb) > decimals) // Value can't have too many decimals\n              return false;\n            // Be careful of rounding errors by using integers.\n            var toInt = f => Math.round(f * Math.pow(10, decimals));\n            if ((toInt(nb) - toInt(base)) % toInt(step) != 0)\n              return false;\n          }\n        }\n        return true;\n      },\n      requirementType: {\n        '': 'string',\n        step: 'string',\n        base: 'number'\n      },\n      priority: 256\n    },\n    pattern: {\n      validateString: function(value, regexp) {\n        if (!value)\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        return regexp.test(value);\n      },\n      requirementType: 'regexp',\n      priority: 64\n    },\n    minlength: {\n      validateString: function (value, requirement) {\n        if (!value)\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        return value.length >= requirement;\n      },\n      requirementType: 'integer',\n      priority: 30\n    },\n    maxlength: {\n      validateString: function (value, requirement) {\n        return value.length <= requirement;\n      },\n      requirementType: 'integer',\n      priority: 30\n    },\n    length: {\n      validateString: function (value, min, max) {\n        if (!value)\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        return value.length >= min && value.length <= max;\n      },\n      requirementType: ['integer', 'integer'],\n      priority: 30\n    },\n    mincheck: {\n      validateMultiple: function (values, requirement) {\n        return values.length >= requirement;\n      },\n      requirementType: 'integer',\n      priority: 30\n    },\n    maxcheck: {\n      validateMultiple: function (values, requirement) {\n        return values.length <= requirement;\n      },\n      requirementType: 'integer',\n      priority: 30\n    },\n    check: {\n      validateMultiple: function (values, min, max) {\n        return values.length >= min && values.length <= max;\n      },\n      requirementType: ['integer', 'integer'],\n      priority: 30\n    },\n    min: comparisonOperator((value, requirement) => value >= requirement),\n    max: comparisonOperator((value, requirement) => value <= requirement),\n    range: comparisonOperator((value, min, max) => value >= min && value <= max),\n    equalto: {\n      validateString: function (value, refOrValue) {\n        if (!value)\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        var $reference = $(refOrValue);\n        if ($reference.length)\n          return value === $reference.val();\n        else\n          return value === refOrValue;\n      },\n      priority: 256\n    },\n    euvatin: {\n      validateString: function (value, refOrValue) {\n        if (!value) {\n          return true;  // Builtin validators all accept empty strings, except `required` of course\n        }\n\n        var re = /^[A-Z][A-Z][A-Za-z0-9 -]{2,}$/;\n        return re.test(value);\n      },\n      priority: 30,\n    },\n  }\n};\n\nexport default ValidatorRegistry;\n","import $ from 'jquery';\nimport Utils from './utils';\n\nvar UI = {};\n\nvar diffResults = function (newResult, oldResult, deep) {\n  var added = [];\n  var kept = [];\n\n  for (var i = 0; i < newResult.length; i++) {\n    var found = false;\n\n    for (var j = 0; j < oldResult.length; j++)\n      if (newResult[i].assert.name === oldResult[j].assert.name) {\n        found = true;\n        break;\n      }\n\n    if (found)\n      kept.push(newResult[i]);\n    else\n      added.push(newResult[i]);\n  }\n\n  return {\n    kept: kept,\n    added: added,\n    removed: !deep ? diffResults(oldResult, newResult, true).added : []\n  };\n};\n\nUI.Form = {\n\n  _actualizeTriggers: function () {\n    this.$element.on('submit.Parsley', evt => { this.onSubmitValidate(evt); });\n    this.$element.on('click.Parsley', Utils._SubmitSelector, evt => { this.onSubmitButton(evt); });\n\n    // UI could be disabled\n    if (false === this.options.uiEnabled)\n      return;\n\n    this.element.setAttribute('novalidate', '');\n  },\n\n  focus: function () {\n    this._focusedField = null;\n\n    if (true === this.validationResult || 'none' === this.options.focus)\n      return null;\n\n    for (var i = 0; i < this.fields.length; i++) {\n      var field = this.fields[i];\n      if (true !== field.validationResult && field.validationResult.length > 0 && 'undefined' === typeof field.options.noFocus) {\n        this._focusedField = field.$element;\n        if ('first' === this.options.focus)\n          break;\n      }\n    }\n\n    if (null === this._focusedField)\n      return null;\n\n    return this._focusedField.trigger('focus');\n  },\n\n  _destroyUI: function () {\n    // Reset all event listeners\n    this.$element.off('.Parsley');\n  }\n\n};\n\nUI.Field = {\n\n  _reflowUI: function () {\n    this._buildUI();\n\n    // If this field doesn't have an active UI don't bother doing something\n    if (!this._ui)\n      return;\n\n    // Diff between two validation results\n    var diff = diffResults(this.validationResult, this._ui.lastValidationResult);\n\n    // Then store current validation result for next reflow\n    this._ui.lastValidationResult = this.validationResult;\n\n    // Handle valid / invalid / none field class\n    this._manageStatusClass();\n\n    // Add, remove, updated errors messages\n    this._manageErrorsMessages(diff);\n\n    // Triggers impl\n    this._actualizeTriggers();\n\n    // If field is not valid for the first time, bind keyup trigger to ease UX and quickly inform user\n    if ((diff.kept.length || diff.added.length) && !this._failedOnce) {\n      this._failedOnce = true;\n      this._actualizeTriggers();\n    }\n  },\n\n  // Returns an array of field's error message(s)\n  getErrorsMessages: function () {\n    // No error message, field is valid\n    if (true === this.validationResult)\n      return [];\n\n    var messages = [];\n\n    for (var i = 0; i < this.validationResult.length; i++)\n      messages.push(this.validationResult[i].errorMessage ||\n       this._getErrorMessage(this.validationResult[i].assert));\n\n    return messages;\n  },\n\n  // It's a goal of Parsley that this method is no longer required [#1073]\n  addError: function (name, {message, assert, updateClass = true} = {}) {\n    this._buildUI();\n    this._addError(name, {message, assert});\n\n    if (updateClass)\n      this._errorClass();\n  },\n\n  // It's a goal of Parsley that this method is no longer required [#1073]\n  updateError: function (name, {message, assert, updateClass = true} = {}) {\n    this._buildUI();\n    this._updateError(name, {message, assert});\n\n    if (updateClass)\n      this._errorClass();\n  },\n\n  // It's a goal of Parsley that this method is no longer required [#1073]\n  removeError: function (name, {updateClass = true} = {}) {\n    this._buildUI();\n    this._removeError(name);\n\n    // edge case possible here: remove a standard Parsley error that is still failing in this.validationResult\n    // but highly improbable cuz' manually removing a well Parsley handled error makes no sense.\n    if (updateClass)\n      this._manageStatusClass();\n  },\n\n  _manageStatusClass: function () {\n    if (this.hasConstraints() && this.needsValidation() && true === this.validationResult)\n      this._successClass();\n    else if (this.validationResult.length > 0)\n      this._errorClass();\n    else\n      this._resetClass();\n  },\n\n  _manageErrorsMessages: function (diff) {\n    if ('undefined' !== typeof this.options.errorsMessagesDisabled)\n      return;\n\n    // Case where we have errorMessage option that configure an unique field error message, regardless failing validators\n    if ('undefined' !== typeof this.options.errorMessage) {\n      if ((diff.added.length || diff.kept.length)) {\n        this._insertErrorWrapper();\n\n        if (0 === this._ui.$errorsWrapper.find('.parsley-custom-error-message').length)\n          this._ui.$errorsWrapper\n            .append(\n              $(this.options.errorTemplate)\n              .addClass('parsley-custom-error-message')\n            );\n\n        this._ui.$errorClassHandler.attr('aria-describedby', this._ui.errorsWrapperId);\n\n        return this._ui.$errorsWrapper\n          .addClass('filled')\n          .attr('aria-hidden', 'false')\n          .find('.parsley-custom-error-message')\n          .html(this.options.errorMessage);\n      }\n\n      this._ui.$errorClassHandler.removeAttr('aria-describedby');\n\n      return this._ui.$errorsWrapper\n        .removeClass('filled')\n        .attr('aria-hidden', 'true')\n        .find('.parsley-custom-error-message')\n        .remove();\n    }\n\n    // Show, hide, update failing constraints messages\n    for (var i = 0; i < diff.removed.length; i++)\n      this._removeError(diff.removed[i].assert.name);\n\n    for (i = 0; i < diff.added.length; i++)\n      this._addError(diff.added[i].assert.name, {message: diff.added[i].errorMessage, assert: diff.added[i].assert});\n\n    for (i = 0; i < diff.kept.length; i++)\n      this._updateError(diff.kept[i].assert.name, {message: diff.kept[i].errorMessage, assert: diff.kept[i].assert});\n  },\n\n\n  _addError: function (name, {message, assert}) {\n    this._insertErrorWrapper();\n    this._ui.$errorClassHandler\n      .attr('aria-describedby', this._ui.errorsWrapperId);\n    this._ui.$errorsWrapper\n      .addClass('filled')\n      .attr('aria-hidden', 'false')\n      .append(\n        $(this.options.errorTemplate)\n        .addClass('parsley-' + name)\n        .html(message || this._getErrorMessage(assert))\n      );\n  },\n\n  _updateError: function (name, {message, assert}) {\n    this._ui.$errorsWrapper\n      .addClass('filled')\n      .find('.parsley-' + name)\n      .html(message || this._getErrorMessage(assert));\n  },\n\n  _removeError: function (name) {\n    this._ui.$errorClassHandler\n      .removeAttr('aria-describedby');\n    this._ui.$errorsWrapper\n      .removeClass('filled')\n      .attr('aria-hidden', 'true')\n      .find('.parsley-' + name)\n      .remove();\n  },\n\n  _getErrorMessage: function (constraint) {\n    var customConstraintErrorMessage = constraint.name + 'Message';\n\n    if ('undefined' !== typeof this.options[customConstraintErrorMessage])\n      return window.Parsley.formatMessage(this.options[customConstraintErrorMessage], constraint.requirements);\n\n    return window.Parsley.getErrorMessage(constraint);\n  },\n\n  _buildUI: function () {\n    // UI could be already built or disabled\n    if (this._ui || false === this.options.uiEnabled)\n      return;\n\n    var _ui = {};\n\n    // Give field its Parsley id in DOM\n    this.element.setAttribute(this.options.namespace + 'id', this.__id__);\n\n    /** Generate important UI elements and store them in this **/\n    // $errorClassHandler is the $element that woul have parsley-error and parsley-success classes\n    _ui.$errorClassHandler = this._manageClassHandler();\n\n    // $errorsWrapper is a div that would contain the various field errors, it will be appended into $errorsContainer\n    _ui.errorsWrapperId = 'parsley-id-' + (this.options.multiple ? 'multiple-' + this.options.multiple : this.__id__);\n    _ui.$errorsWrapper = $(this.options.errorsWrapper).attr('id', _ui.errorsWrapperId);\n\n    // ValidationResult UI storage to detect what have changed bwt two validations, and update DOM accordingly\n    _ui.lastValidationResult = [];\n    _ui.validationInformationVisible = false;\n\n    // Store it in this for later\n    this._ui = _ui;\n  },\n\n  // Determine which element will have `parsley-error` and `parsley-success` classes\n  _manageClassHandler: function () {\n    // Class handled could also be determined by function given in Parsley options\n    if ('string' === typeof this.options.classHandler && $(this.options.classHandler).length)\n      return $(this.options.classHandler);\n\n    // Class handled could also be determined by function given in Parsley options\n    var $handlerFunction = this.options.classHandler;\n\n    // It might also be the function name of a global function\n    if ('string' === typeof this.options.classHandler && 'function' === typeof window[this.options.classHandler])\n      $handlerFunction = window[this.options.classHandler];\n\n    if ('function' === typeof $handlerFunction) {\n      var $handler = $handlerFunction.call(this, this);\n\n      // If this function returned a valid existing DOM element, go for it\n      if ('undefined' !== typeof $handler && $handler.length)\n        return $handler;\n    } else if ('object' === typeof $handlerFunction && $handlerFunction instanceof jQuery && $handlerFunction.length) {\n      return $handlerFunction;\n    } else if ($handlerFunction) {\n      Utils.warn('The class handler `' + $handlerFunction + '` does not exist in DOM nor as a global JS function');\n    }\n\n    return this._inputHolder();\n  },\n\n  _inputHolder: function() {\n    // if simple element (input, texatrea, select...) it will perfectly host the classes and precede the error container\n    if (!this.options.multiple || this.element.nodeName === 'SELECT')\n      return this.$element;\n\n    // But if multiple element (radio, checkbox), that would be their parent\n    return this.$element.parent();\n  },\n\n  _insertErrorWrapper: function () {\n    var $errorsContainer = this.options.errorsContainer;\n\n    // Nothing to do if already inserted\n    if (0 !== this._ui.$errorsWrapper.parent().length)\n      return this._ui.$errorsWrapper.parent();\n\n    if ('string' === typeof $errorsContainer) {\n      if ($($errorsContainer).length)\n        return $($errorsContainer).append(this._ui.$errorsWrapper);\n      else if ('function' === typeof window[$errorsContainer])\n        $errorsContainer = window[$errorsContainer];\n      else\n        Utils.warn('The errors container `' + $errorsContainer + '` does not exist in DOM nor as a global JS function');\n    }\n\n    if ('function' === typeof $errorsContainer)\n      $errorsContainer = $errorsContainer.call(this, this);\n\n    if ('object' === typeof $errorsContainer && $errorsContainer.length)\n      return $errorsContainer.append(this._ui.$errorsWrapper);\n\n    return this._inputHolder().after(this._ui.$errorsWrapper);\n  },\n\n  _actualizeTriggers: function () {\n    var $toBind = this._findRelated();\n    var trigger;\n\n    // Remove Parsley events already bound on this field\n    $toBind.off('.Parsley');\n    if (this._failedOnce)\n      $toBind.on(Utils.namespaceEvents(this.options.triggerAfterFailure, 'Parsley'), () => {\n        this._validateIfNeeded();\n      });\n    else if (trigger = Utils.namespaceEvents(this.options.trigger, 'Parsley')) {\n      $toBind.on(trigger, event => {\n        this._validateIfNeeded(event);\n      });\n    }\n  },\n\n  _validateIfNeeded: function (event) {\n    // For keyup, keypress, keydown, input... events that could be a little bit obstrusive\n    // do not validate if val length < min threshold on first validation. Once field have been validated once and info\n    // about success or failure have been displayed, always validate with this trigger to reflect every yalidation change.\n    if (event && /key|input/.test(event.type))\n      if (!(this._ui && this._ui.validationInformationVisible) && this.getValue().length <= this.options.validationThreshold)\n        return;\n\n    if (this.options.debounce) {\n      window.clearTimeout(this._debounced);\n      this._debounced = window.setTimeout(() => this.validate(), this.options.debounce);\n    } else\n      this.validate();\n  },\n\n  _resetUI: function () {\n    // Reset all event listeners\n    this._failedOnce = false;\n    this._actualizeTriggers();\n\n    // Nothing to do if UI never initialized for this field\n    if ('undefined' === typeof this._ui)\n      return;\n\n    // Reset all errors' li\n    this._ui.$errorsWrapper\n      .removeClass('filled')\n      .children()\n      .remove();\n\n    // Reset validation class\n    this._resetClass();\n\n    // Reset validation flags and last validation result\n    this._ui.lastValidationResult = [];\n    this._ui.validationInformationVisible = false;\n  },\n\n  _destroyUI: function () {\n    this._resetUI();\n\n    if ('undefined' !== typeof this._ui)\n      this._ui.$errorsWrapper.remove();\n\n    delete this._ui;\n  },\n\n  _successClass: function () {\n    this._ui.validationInformationVisible = true;\n    this._ui.$errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass);\n  },\n  _errorClass: function () {\n    this._ui.validationInformationVisible = true;\n    this._ui.$errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass);\n  },\n  _resetClass: function () {\n    this._ui.$errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass);\n  }\n};\n\nexport default UI;\n","import $ from 'jquery';\nimport Base from './base';\nimport Utils from './utils';\n\nvar Form = function (element, domOptions, options) {\n  this.__class__ = 'Form';\n\n  this.element = element;\n  this.$element = $(element);\n  this.domOptions = domOptions;\n  this.options = options;\n  this.parent = window.Parsley;\n\n  this.fields = [];\n  this.validationResult = null;\n};\n\nvar statusMapping = {pending: null, resolved: true, rejected: false};\n\nForm.prototype = {\n  onSubmitValidate: function (event) {\n    // This is a Parsley generated submit event, do not validate, do not prevent, simply exit and keep normal behavior\n    if (true === event.parsley)\n      return;\n\n    // If we didn't come here through a submit button, use the first one in the form\n    var submitSource = this._submitSource || this.$element.find(Utils._SubmitSelector)[0];\n    this._submitSource = null;\n    this.$element.find('.parsley-synthetic-submit-button').prop('disabled', true);\n    if (submitSource && null !== submitSource.getAttribute('formnovalidate'))\n      return;\n\n    window.Parsley._remoteCache = {};\n\n    var promise = this.whenValidate({event});\n\n    if ('resolved' === promise.state() && false !== this._trigger('submit')) {\n      // All good, let event go through. We make this distinction because browsers\n      // differ in their handling of `submit` being called from inside a submit event [#1047]\n    } else {\n      // Rejected or pending: cancel this submit\n      event.stopImmediatePropagation();\n      event.preventDefault();\n      if ('pending' === promise.state())\n        promise.done(() => { this._submit(submitSource); });\n    }\n  },\n\n  onSubmitButton: function(event) {\n    this._submitSource = event.currentTarget;\n  },\n  // internal\n  // _submit submits the form, this time without going through the validations.\n  // Care must be taken to \"fake\" the actual submit button being clicked.\n  _submit: function (submitSource) {\n    if (false === this._trigger('submit'))\n      return;\n    // Add submit button's data\n    if (submitSource) {\n      var $synthetic = this.$element.find('.parsley-synthetic-submit-button').prop('disabled', false);\n      if (0 === $synthetic.length)\n        $synthetic = $('<input class=\"parsley-synthetic-submit-button\" type=\"hidden\">').appendTo(this.$element);\n      $synthetic.attr({\n        name: submitSource.getAttribute('name'),\n        value: submitSource.getAttribute('value')\n      });\n    }\n\n    this.$element.trigger(Object.assign($.Event('submit'), {parsley: true}));\n  },\n\n  // Performs validation on fields while triggering events.\n  // @returns `true` if all validations succeeds, `false`\n  // if a failure is immediately detected, or `null`\n  // if dependant on a promise.\n  // Consider using `whenValidate` instead.\n  validate: function (options) {\n    if (arguments.length >= 1 && !$.isPlainObject(options)) {\n      Utils.warnOnce('Calling validate on a parsley form without passing arguments as an object is deprecated.');\n      var [group, force, event] = arguments;\n      options = {group, force, event};\n    }\n    return statusMapping[ this.whenValidate(options).state() ];\n  },\n\n  whenValidate: function ({group, force, event} = {}) {\n    this.submitEvent = event;\n    if (event) {\n      this.submitEvent = Object.assign({}, event, {preventDefault: () => {\n        Utils.warnOnce(\"Using `this.submitEvent.preventDefault()` is deprecated; instead, call `this.validationResult = false`\");\n        this.validationResult = false;\n      }});\n    }\n    this.validationResult = true;\n\n    // fire validate event to eventually modify things before every validation\n    this._trigger('validate');\n\n    // Refresh form DOM options and form's fields that could have changed\n    this._refreshFields();\n\n    var promises = this._withoutReactualizingFormOptions(() => {\n      return $.map(this.fields, field => field.whenValidate({force, group}));\n    });\n\n    return Utils.all(promises)\n      .done(  () => { this._trigger('success'); })\n      .fail(  () => {\n        this.validationResult = false;\n        this.focus();\n        this._trigger('error');\n      })\n      .always(() => { this._trigger('validated'); })\n      .pipe(...this._pipeAccordingToValidationResult());\n  },\n\n  // Iterate over refreshed fields, and stop on first failure.\n  // Returns `true` if all fields are valid, `false` if a failure is detected\n  // or `null` if the result depends on an unresolved promise.\n  // Prefer using `whenValid` instead.\n  isValid: function (options) {\n    if (arguments.length >= 1 && !$.isPlainObject(options)) {\n      Utils.warnOnce('Calling isValid on a parsley form without passing arguments as an object is deprecated.');\n      var [group, force] = arguments;\n      options = {group, force};\n    }\n    return statusMapping[ this.whenValid(options).state() ];\n  },\n\n  // Iterate over refreshed fields and validate them.\n  // Returns a promise.\n  // A validation that immediately fails will interrupt the validations.\n  whenValid: function ({group, force} = {}) {\n    this._refreshFields();\n\n    var promises = this._withoutReactualizingFormOptions(() => {\n      return $.map(this.fields, field => field.whenValid({group, force}));\n    });\n    return Utils.all(promises);\n  },\n\n  refresh: function() {\n    this._refreshFields();\n    return this;\n  },\n\n  // Reset UI\n  reset: function () {\n    // Form case: emit a reset event for each field\n    for (var i = 0; i < this.fields.length; i++)\n      this.fields[i].reset();\n\n    this._trigger('reset');\n  },\n\n  // Destroy Parsley instance (+ UI)\n  destroy: function () {\n    // Field case: emit destroy event to clean UI and then destroy stored instance\n    this._destroyUI();\n\n    // Form case: destroy all its fields and then destroy stored instance\n    for (var i = 0; i < this.fields.length; i++)\n      this.fields[i].destroy();\n\n    this.$element.removeData('Parsley');\n    this._trigger('destroy');\n  },\n\n  _refreshFields: function () {\n    return this.actualizeOptions()._bindFields();\n  },\n\n  _bindFields: function () {\n    var oldFields = this.fields;\n\n    this.fields = [];\n    this.fieldsMappedById = {};\n\n    this._withoutReactualizingFormOptions(() => {\n      this.$element\n      .find(this.options.inputs)\n      .not(this.options.excluded)\n      .not(`[${this.options.namespace}excluded=true]`)\n      .each((_, element) => {\n        var fieldInstance = new window.Parsley.Factory(element, {}, this);\n\n        // Only add valid and not excluded `Field` and `FieldMultiple` children\n        if ('Field' === fieldInstance.__class__ || 'FieldMultiple' === fieldInstance.__class__) {\n          let uniqueId = fieldInstance.__class__ + '-' + fieldInstance.__id__;\n          if ('undefined' === typeof this.fieldsMappedById[uniqueId]) {\n            this.fieldsMappedById[uniqueId] = fieldInstance;\n            this.fields.push(fieldInstance);\n          }\n        }\n      });\n\n      $.each(Utils.difference(oldFields, this.fields), (_, field) => {\n        field.reset();\n      });\n    });\n    return this;\n  },\n\n  // Internal only.\n  // Looping on a form's fields to do validation or similar\n  // will trigger reactualizing options on all of them, which\n  // in turn will reactualize the form's options.\n  // To avoid calling actualizeOptions so many times on the form\n  // for nothing, _withoutReactualizingFormOptions temporarily disables\n  // the method actualizeOptions on this form while `fn` is called.\n  _withoutReactualizingFormOptions: function (fn) {\n    var oldActualizeOptions = this.actualizeOptions;\n    this.actualizeOptions = function () { return this; };\n    var result = fn();\n    this.actualizeOptions = oldActualizeOptions;\n    return result;\n  },\n\n  // Internal only.\n  // Shortcut to trigger an event\n  // Returns true iff event is not interrupted and default not prevented.\n  _trigger: function (eventName) {\n    return this.trigger('form:' + eventName);\n  }\n\n};\n\nexport default Form;\n","import Utils from './utils';\nimport Validator from './validator';\n\nconst Constraint = function(parsleyField, name, requirements, priority, isDomConstraint) {\n  const validatorSpec = window.Parsley._validatorRegistry.validators[name];\n  const validator = new Validator(validatorSpec);\n  priority = priority || parsleyField.options[name + 'Priority'] || validator.priority;\n  isDomConstraint = (true === isDomConstraint);\n\n  Object.assign(this, {\n    validator,\n    name,\n    requirements,\n    priority,\n    isDomConstraint\n  });\n  this._parseRequirements(parsleyField.options);\n};\n\nconst capitalize = function(str) {\n  const cap = str[0].toUpperCase();\n  return cap + str.slice(1);\n};\n\nConstraint.prototype = {\n  validate: function(value, instance) {\n    return this.validator.validate(value, ...this.requirementList, instance);\n  },\n\n  _parseRequirements: function(options) {\n    this.requirementList = this.validator.parseRequirements(this.requirements,\n      key => options[this.name + capitalize(key)]\n    );\n  }\n};\n\nexport default Constraint;\n","import $ from 'jquery';\nimport Constraint from './constraint';\nimport UI from './ui';\nimport Utils from './utils';\n\nvar Field = function (field, domOptions, options, parsleyFormInstance) {\n  this.__class__ = 'Field';\n\n  this.element = field;\n  this.$element = $(field);\n\n  // Set parent if we have one\n  if ('undefined' !== typeof parsleyFormInstance) {\n    this.parent = parsleyFormInstance;\n  }\n\n  this.options = options;\n  this.domOptions = domOptions;\n\n  // Initialize some properties\n  this.constraints = [];\n  this.constraintsByName = {};\n  this.validationResult = true;\n\n  // Bind constraints\n  this._bindConstraints();\n};\n\nvar statusMapping = {pending: null, resolved: true, rejected: false};\n\nField.prototype = {\n  // # Public API\n  // Validate field and trigger some events for mainly `UI`\n  // @returns `true`, an array of the validators that failed, or\n  // `null` if validation is not finished. Prefer using whenValidate\n  validate: function (options) {\n    if (arguments.length >= 1 && !$.isPlainObject(options)) {\n      Utils.warnOnce('Calling validate on a parsley field without passing arguments as an object is deprecated.');\n      options = {options};\n    }\n    var promise = this.whenValidate(options);\n    if (!promise)  // If excluded with `group` option\n      return true;\n    switch (promise.state()) {\n      case 'pending': return null;\n      case 'resolved': return true;\n      case 'rejected': return this.validationResult;\n    }\n  },\n\n  // Validate field and trigger some events for mainly `UI`\n  // @returns a promise that succeeds only when all validations do\n  // or `undefined` if field is not in the given `group`.\n  whenValidate: function ({force, group} =  {}) {\n    // do not validate a field if not the same as given validation group\n    this.refresh();\n    if (group && !this._isInGroup(group))\n      return;\n\n    this.value = this.getValue();\n\n    // Field Validate event. `this.value` could be altered for custom needs\n    this._trigger('validate');\n\n    return this.whenValid({force, value: this.value, _refreshed: true})\n      .always(() => { this._reflowUI(); })\n      .done(() =>   { this._trigger('success'); })\n      .fail(() =>   { this._trigger('error'); })\n      .always(() => { this._trigger('validated'); })\n      .pipe(...this._pipeAccordingToValidationResult());\n  },\n\n  hasConstraints: function () {\n    return 0 !== this.constraints.length;\n  },\n\n  // An empty optional field does not need validation\n  needsValidation: function (value) {\n    if ('undefined' === typeof value)\n      value = this.getValue();\n\n    // If a field is empty and not required, it is valid\n    // Except if `data-parsley-validate-if-empty` explicitely added, useful for some custom validators\n    if (!value.length && !this._isRequired() && 'undefined' === typeof this.options.validateIfEmpty)\n      return false;\n\n    return true;\n  },\n\n  _isInGroup: function (group) {\n    if (Array.isArray(this.options.group))\n      return -1 !== $.inArray(group, this.options.group);\n    return this.options.group === group;\n  },\n\n  // Just validate field. Do not trigger any event.\n  // Returns `true` iff all constraints pass, `false` if there are failures,\n  // or `null` if the result can not be determined yet (depends on a promise)\n  // See also `whenValid`.\n  isValid: function (options) {\n    if (arguments.length >= 1 && !$.isPlainObject(options)) {\n      Utils.warnOnce('Calling isValid on a parsley field without passing arguments as an object is deprecated.');\n      var [force, value] = arguments;\n      options = {force, value};\n    }\n    var promise = this.whenValid(options);\n    if (!promise) // Excluded via `group`\n      return true;\n    return statusMapping[promise.state()];\n  },\n\n  // Just validate field. Do not trigger any event.\n  // @returns a promise that succeeds only when all validations do\n  // or `undefined` if the field is not in the given `group`.\n  // The argument `force` will force validation of empty fields.\n  // If a `value` is given, it will be validated instead of the value of the input.\n  whenValid: function ({force = false, value, group, _refreshed} = {}) {\n    // Recompute options and rebind constraints to have latest changes\n    if (!_refreshed)\n      this.refresh();\n    // do not validate a field if not the same as given validation group\n    if (group && !this._isInGroup(group))\n      return;\n\n    this.validationResult = true;\n\n    // A field without constraint is valid\n    if (!this.hasConstraints())\n      return $.when();\n\n    // Value could be passed as argument, needed to add more power to 'field:validate'\n    if ('undefined' === typeof value || null === value)\n      value = this.getValue();\n\n    if (!this.needsValidation(value) && true !== force)\n      return $.when();\n\n    var groupedConstraints = this._getGroupedConstraints();\n    var promises = [];\n    $.each(groupedConstraints, (_, constraints) => {\n      // Process one group of constraints at a time, we validate the constraints\n      // and combine the promises together.\n      var promise = Utils.all(\n        $.map(constraints, constraint => this._validateConstraint(value, constraint))\n      );\n      promises.push(promise);\n      if (promise.state() === 'rejected')\n        return false; // Interrupt processing if a group has already failed\n    });\n    return Utils.all(promises);\n  },\n\n  // @returns a promise\n  _validateConstraint: function(value, constraint) {\n    var result = constraint.validate(value, this);\n    // Map false to a failed promise\n    if (false === result)\n      result = $.Deferred().reject();\n    // Make sure we return a promise and that we record failures\n    return Utils.all([result]).fail(errorMessage => {\n      if (!(this.validationResult instanceof Array))\n        this.validationResult = [];\n      this.validationResult.push({\n        assert: constraint,\n        errorMessage: 'string' === typeof errorMessage && errorMessage\n      });\n    });\n  },\n\n  // @returns Parsley field computed value that could be overrided or configured in DOM\n  getValue: function () {\n    var value;\n\n    // Value could be overriden in DOM or with explicit options\n    if ('function' === typeof this.options.value)\n      value = this.options.value(this);\n    else if ('undefined' !== typeof this.options.value)\n      value = this.options.value;\n    else\n      value = this.$element.val();\n\n    // Handle wrong DOM or configurations\n    if ('undefined' === typeof value || null === value)\n      return '';\n\n    return this._handleWhitespace(value);\n  },\n\n  // Reset UI\n  reset: function () {\n    this._resetUI();\n    return this._trigger('reset');\n  },\n\n  // Destroy Parsley instance (+ UI)\n  destroy: function () {\n    // Field case: emit destroy event to clean UI and then destroy stored instance\n    this._destroyUI();\n    this.$element.removeData('Parsley');\n    this.$element.removeData('FieldMultiple');\n    this._trigger('destroy');\n  },\n\n  // Actualize options and rebind constraints\n  refresh: function () {\n    this._refreshConstraints();\n    return this;\n  },\n\n  _refreshConstraints: function () {\n    return this.actualizeOptions()._bindConstraints();\n  },\n\n  refreshConstraints: function() {\n    Utils.warnOnce(\"Parsley's refreshConstraints is deprecated. Please use refresh\");\n    return this.refresh();\n  },\n\n  /**\n  * Add a new constraint to a field\n  *\n  * @param {String}   name\n  * @param {Mixed}    requirements      optional\n  * @param {Number}   priority          optional\n  * @param {Boolean}  isDomConstraint   optional\n  */\n  addConstraint: function (name, requirements, priority, isDomConstraint) {\n\n    if (window.Parsley._validatorRegistry.validators[name]) {\n      var constraint = new Constraint(this, name, requirements, priority, isDomConstraint);\n\n      // if constraint already exist, delete it and push new version\n      if ('undefined' !== this.constraintsByName[constraint.name])\n        this.removeConstraint(constraint.name);\n\n      this.constraints.push(constraint);\n      this.constraintsByName[constraint.name] = constraint;\n    }\n\n    return this;\n  },\n\n  // Remove a constraint\n  removeConstraint: function (name) {\n    for (var i = 0; i < this.constraints.length; i++)\n      if (name === this.constraints[i].name) {\n        this.constraints.splice(i, 1);\n        break;\n      }\n    delete this.constraintsByName[name];\n    return this;\n  },\n\n  // Update a constraint (Remove + re-add)\n  updateConstraint: function (name, parameters, priority) {\n    return this.removeConstraint(name)\n      .addConstraint(name, parameters, priority);\n  },\n\n  // # Internals\n\n  // Internal only.\n  // Bind constraints from config + options + DOM\n  _bindConstraints: function () {\n    var constraints = [];\n    var constraintsByName = {};\n\n    // clean all existing DOM constraints to only keep javascript user constraints\n    for (var i = 0; i < this.constraints.length; i++)\n      if (false === this.constraints[i].isDomConstraint) {\n        constraints.push(this.constraints[i]);\n        constraintsByName[this.constraints[i].name] = this.constraints[i];\n      }\n\n    this.constraints = constraints;\n    this.constraintsByName = constraintsByName;\n\n    // then re-add Parsley DOM-API constraints\n    for (var name in this.options)\n      this.addConstraint(name, this.options[name], undefined, true);\n\n    // finally, bind special HTML5 constraints\n    return this._bindHtml5Constraints();\n  },\n\n  // Internal only.\n  // Bind specific HTML5 constraints to be HTML5 compliant\n  _bindHtml5Constraints: function () {\n    // html5 required\n    if (null !== this.element.getAttribute('required'))\n      this.addConstraint('required', true, undefined, true);\n\n    // html5 pattern\n    if (null !== this.element.getAttribute('pattern'))\n      this.addConstraint('pattern', this.element.getAttribute('pattern'), undefined, true);\n\n    // range\n    let min = this.element.getAttribute('min');\n    let max = this.element.getAttribute('max');\n    if (null !== min && null !== max)\n      this.addConstraint('range', [min, max], undefined, true);\n\n    // HTML5 min\n    else if (null !== min)\n      this.addConstraint('min', min, undefined, true);\n\n    // HTML5 max\n    else if (null !== max)\n      this.addConstraint('max', max, undefined, true);\n\n\n    // length\n    if (null !== this.element.getAttribute('minlength') && null !== this.element.getAttribute('maxlength'))\n      this.addConstraint('length', [this.element.getAttribute('minlength'), this.element.getAttribute('maxlength')], undefined, true);\n\n    // HTML5 minlength\n    else if (null !== this.element.getAttribute('minlength'))\n      this.addConstraint('minlength', this.element.getAttribute('minlength'), undefined, true);\n\n    // HTML5 maxlength\n    else if (null !== this.element.getAttribute('maxlength'))\n      this.addConstraint('maxlength', this.element.getAttribute('maxlength'), undefined, true);\n\n\n    // html5 types\n    var type = Utils.getType(this.element);\n\n    // Small special case here for HTML5 number: integer validator if step attribute is undefined or an integer value, number otherwise\n    if ('number' === type) {\n      return this.addConstraint('type', ['number', {\n        step: this.element.getAttribute('step') || '1',\n        base: min || this.element.getAttribute('value')\n      }], undefined, true);\n    // Regular other HTML5 supported types\n    } else if (/^(email|url|range|date)$/i.test(type)) {\n      return this.addConstraint('type', type, undefined, true);\n    }\n    return this;\n  },\n\n  // Internal only.\n  // Field is required if have required constraint without `false` value\n  _isRequired: function () {\n    if ('undefined' === typeof this.constraintsByName.required)\n      return false;\n\n    return false !== this.constraintsByName.required.requirements;\n  },\n\n  // Internal only.\n  // Shortcut to trigger an event\n  _trigger: function (eventName) {\n    return this.trigger('field:' + eventName);\n  },\n\n  // Internal only\n  // Handles whitespace in a value\n  // Use `data-parsley-whitespace=\"squish\"` to auto squish input value\n  // Use `data-parsley-whitespace=\"trim\"` to auto trim input value\n  _handleWhitespace: function (value) {\n    if (true === this.options.trimValue)\n      Utils.warnOnce('data-parsley-trim-value=\"true\" is deprecated, please use data-parsley-whitespace=\"trim\"');\n\n    if ('squish' === this.options.whitespace)\n      value = value.replace(/\\s{2,}/g, ' ');\n\n    if (('trim' === this.options.whitespace) || ('squish' === this.options.whitespace) || (true === this.options.trimValue))\n      value = Utils.trimString(value);\n\n    return value;\n  },\n\n  _isDateInput: function() {\n    var c = this.constraintsByName.type;\n    return c && c.requirements === 'date';\n  },\n\n  // Internal only.\n  // Returns the constraints, grouped by descending priority.\n  // The result is thus an array of arrays of constraints.\n  _getGroupedConstraints: function () {\n    if (false === this.options.priorityEnabled)\n      return [this.constraints];\n\n    var groupedConstraints = [];\n    var index = {};\n\n    // Create array unique of priorities\n    for (var i = 0; i < this.constraints.length; i++) {\n      var p = this.constraints[i].priority;\n      if (!index[p])\n        groupedConstraints.push(index[p] = []);\n      index[p].push(this.constraints[i]);\n    }\n    // Sort them by priority DESC\n    groupedConstraints.sort(function (a, b) { return b[0].priority - a[0].priority; });\n\n    return groupedConstraints;\n  }\n\n};\n\nexport default Field;\n","import $ from 'jquery';\nimport Utils from './utils';\n\nvar Multiple = function () {\n  this.__class__ = 'FieldMultiple';\n};\n\nMultiple.prototype = {\n  // Add new `$element` sibling for multiple field\n  addElement: function ($element) {\n    this.$elements.push($element);\n\n    return this;\n  },\n\n  // See `Field._refreshConstraints()`\n  _refreshConstraints: function () {\n    var fieldConstraints;\n\n    this.constraints = [];\n\n    // Select multiple special treatment\n    if (this.element.nodeName === 'SELECT') {\n      this.actualizeOptions()._bindConstraints();\n\n      return this;\n    }\n\n    // Gather all constraints for each input in the multiple group\n    for (var i = 0; i < this.$elements.length; i++) {\n\n      // Check if element have not been dynamically removed since last binding\n      if (!$('html').has(this.$elements[i]).length) {\n        this.$elements.splice(i, 1);\n        continue;\n      }\n\n      fieldConstraints = this.$elements[i].data('FieldMultiple')._refreshConstraints().constraints;\n\n      for (var j = 0; j < fieldConstraints.length; j++)\n        this.addConstraint(fieldConstraints[j].name, fieldConstraints[j].requirements, fieldConstraints[j].priority, fieldConstraints[j].isDomConstraint);\n    }\n\n    return this;\n  },\n\n  // See `Field.getValue()`\n  getValue: function () {\n    // Value could be overriden in DOM\n    if ('function' === typeof this.options.value)\n      return this.options.value(this);\n    else if ('undefined' !== typeof this.options.value)\n      return this.options.value;\n\n    // Radio input case\n    if (this.element.nodeName === 'INPUT') {\n      var type = Utils.getType(this.element);\n      if (type === 'radio')\n        return this._findRelated().filter(':checked').val() || '';\n\n      // checkbox input case\n      if (type === 'checkbox') {\n        var values = [];\n\n        this._findRelated().filter(':checked').each(function () {\n          values.push($(this).val());\n        });\n\n        return values;\n      }\n    }\n\n    // Select multiple case\n    if (this.element.nodeName === 'SELECT' && null === this.$element.val())\n      return [];\n\n    // Default case that should never happen\n    return this.$element.val();\n  },\n\n  _init: function () {\n    this.$elements = [this.$element];\n\n    return this;\n  }\n};\n\nexport default Multiple;\n","import $ from 'jquery';\nimport Utils from './utils';\nimport Base from './base';\nimport Form from './form';\nimport Field from './field';\nimport Multiple from './multiple';\n\nvar Factory = function (element, options, parsleyFormInstance) {\n  this.element = element;\n  this.$element = $(element);\n\n  // If the element has already been bound, returns its saved Parsley instance\n  var savedparsleyFormInstance = this.$element.data('Parsley');\n  if (savedparsleyFormInstance) {\n\n    // If the saved instance has been bound without a Form parent and there is one given in this call, add it\n    if ('undefined' !== typeof parsleyFormInstance && savedparsleyFormInstance.parent === window.Parsley) {\n      savedparsleyFormInstance.parent = parsleyFormInstance;\n      savedparsleyFormInstance._resetOptions(savedparsleyFormInstance.options);\n    }\n\n    if ('object' === typeof options) {\n      Object.assign(savedparsleyFormInstance.options, options);\n    }\n\n    return savedparsleyFormInstance;\n  }\n\n  // Parsley must be instantiated with a DOM element or jQuery $element\n  if (!this.$element.length)\n    throw new Error('You must bind Parsley on an existing element.');\n\n  if ('undefined' !== typeof parsleyFormInstance && 'Form' !== parsleyFormInstance.__class__)\n    throw new Error('Parent instance must be a Form instance');\n\n  this.parent = parsleyFormInstance || window.Parsley;\n  return this.init(options);\n};\n\nFactory.prototype = {\n  init: function (options) {\n    this.__class__ = 'Parsley';\n    this.__version__ = 'VERSION';\n    this.__id__ = Utils.generateID();\n\n    // Pre-compute options\n    this._resetOptions(options);\n\n    // A Form instance is obviously a `<form>` element but also every node that is not an input and has the `data-parsley-validate` attribute\n    if (this.element.nodeName === 'FORM' || (Utils.checkAttr(this.element, this.options.namespace, 'validate') && !this.$element.is(this.options.inputs)))\n      return this.bind('parsleyForm');\n\n    // Every other element is bound as a `Field` or `FieldMultiple`\n    return this.isMultiple() ? this.handleMultiple() : this.bind('parsleyField');\n  },\n\n  isMultiple: function () {\n    var type = Utils.getType(this.element);\n    return ((type === 'radio' || type === 'checkbox') ||\n      (this.element.nodeName === 'SELECT' && null !== this.element.getAttribute('multiple')));\n  },\n\n  // Multiples fields are a real nightmare :(\n  // Maybe some refactoring would be appreciated here...\n  handleMultiple: function () {\n    var name;\n    var multiple;\n    var parsleyMultipleInstance;\n\n    // Handle multiple name\n    this.options.multiple = this.options.multiple ||\n      (name = this.element.getAttribute('name')) ||\n      this.element.getAttribute('id');\n\n    // Special select multiple input\n    if (this.element.nodeName === 'SELECT' && null !== this.element.getAttribute('multiple')) {\n      this.options.multiple = this.options.multiple || this.__id__;\n      return this.bind('parsleyFieldMultiple');\n\n    // Else for radio / checkboxes, we need a `name` or `data-parsley-multiple` to properly bind it\n    } else if (!this.options.multiple) {\n      Utils.warn('To be bound by Parsley, a radio, a checkbox and a multiple select input must have either a name or a multiple option.', this.$element);\n      return this;\n    }\n\n    // Remove special chars\n    this.options.multiple = this.options.multiple.replace(/(:|\\.|\\[|\\]|\\{|\\}|\\$)/g, '');\n\n    // Add proper `data-parsley-multiple` to siblings if we have a valid multiple name\n    if (name) {\n      $('input[name=\"' + name + '\"]').each((i, input) => {\n        var type = Utils.getType(input);\n        if ((type === 'radio' || type === 'checkbox'))\n          input.setAttribute(this.options.namespace + 'multiple', this.options.multiple);\n      });\n    }\n\n    // Check here if we don't already have a related multiple instance saved\n    var $previouslyRelated = this._findRelated();\n    for (var i = 0; i < $previouslyRelated.length; i++) {\n      parsleyMultipleInstance = $($previouslyRelated.get(i)).data('Parsley');\n      if ('undefined' !== typeof parsleyMultipleInstance) {\n\n        if (!this.$element.data('FieldMultiple')) {\n          parsleyMultipleInstance.addElement(this.$element);\n        }\n\n        break;\n      }\n    }\n\n    // Create a secret Field instance for every multiple field. It will be stored in `data('FieldMultiple')`\n    // And will be useful later to access classic `Field` stuff while being in a `FieldMultiple` instance\n    this.bind('parsleyField', true);\n\n    return parsleyMultipleInstance || this.bind('parsleyFieldMultiple');\n  },\n\n  // Return proper `Form`, `Field` or `FieldMultiple`\n  bind: function (type, doNotStore) {\n    var parsleyInstance;\n\n    switch (type) {\n      case 'parsleyForm':\n        parsleyInstance = $.extend(\n          new Form(this.element, this.domOptions, this.options),\n          new Base(),\n          window.ParsleyExtend\n        )._bindFields();\n        break;\n      case 'parsleyField':\n        parsleyInstance = $.extend(\n          new Field(this.element, this.domOptions, this.options, this.parent),\n          new Base(),\n          window.ParsleyExtend\n        );\n        break;\n      case 'parsleyFieldMultiple':\n        parsleyInstance = $.extend(\n          new Field(this.element, this.domOptions, this.options, this.parent),\n          new Multiple(),\n          new Base(),\n          window.ParsleyExtend\n        )._init();\n        break;\n      default:\n        throw new Error(type + 'is not a supported Parsley type');\n    }\n\n    if (this.options.multiple)\n      Utils.setAttr(this.element, this.options.namespace, 'multiple', this.options.multiple);\n\n    if ('undefined' !== typeof doNotStore) {\n      this.$element.data('FieldMultiple', parsleyInstance);\n\n      return parsleyInstance;\n    }\n\n    // Store the freshly bound instance in a DOM element for later access using jQuery `data()`\n    this.$element.data('Parsley', parsleyInstance);\n\n    // Tell the world we have a new Form or Field instance!\n    parsleyInstance._actualizeTriggers();\n    parsleyInstance._trigger('init');\n\n    return parsleyInstance;\n  }\n};\n\nexport default Factory;\n","import $ from 'jquery';\nimport Utils from './utils';\nimport Defaults from './defaults';\nimport Base from './base';\nimport ValidatorRegistry from './validator_registry';\nimport UI from './ui';\nimport Form from './form';\nimport Field from './field';\nimport Multiple from './multiple';\nimport Factory from './factory';\n\nvar vernums = $.fn.jquery.split('.');\nif (parseInt(vernums[0]) <= 1 && parseInt(vernums[1]) < 8) {\n  throw \"The loaded version of jQuery is too old. Please upgrade to 1.8.x or better.\";\n}\nif (!vernums.forEach) {\n  Utils.warn('Parsley requires ES5 to run properly. Please include https://github.com/es-shims/es5-shim');\n}\n// Inherit `on`, `off` & `trigger` to Parsley:\nvar Parsley = Object.assign(new Base(), {\n    element: document,\n    $element: $(document),\n    actualizeOptions: null,\n    _resetOptions: null,\n    Factory: Factory,\n    version: 'VERSION'\n  });\n\n// Supplement Field and Form with Base\n// This way, the constructors will have access to those methods\nObject.assign(Field.prototype, UI.Field, Base.prototype);\nObject.assign(Form.prototype, UI.Form, Base.prototype);\n// Inherit actualizeOptions and _resetOptions:\nObject.assign(Factory.prototype, Base.prototype);\n\n// ### jQuery API\n// `$('.elem').parsley(options)` or `$('.elem').psly(options)`\n$.fn.parsley = $.fn.psly = function (options) {\n  if (this.length > 1) {\n    var instances = [];\n\n    this.each(function () {\n      instances.push($(this).parsley(options));\n    });\n\n    return instances;\n  }\n\n  // Return undefined if applied to non existing DOM element\n  if (this.length == 0) {\n    return;\n  }\n\n  return new Factory(this[0], options);\n};\n\n// ### Field and Form extension\n// Ensure the extension is now defined if it wasn't previously\nif ('undefined' === typeof window.ParsleyExtend)\n  window.ParsleyExtend = {};\n\n// ### Parsley config\n// Inherit from ParsleyDefault, and copy over any existing values\nParsley.options = Object.assign(Utils.objectCreate(Defaults), window.ParsleyConfig);\nwindow.ParsleyConfig = Parsley.options; // Old way of accessing global options\n\n// ### Globals\nwindow.Parsley = window.psly = Parsley;\nParsley.Utils = Utils;\nwindow.ParsleyUtils = {};\n$.each(Utils, (key, value) => {\n  if ('function' === typeof value) {\n    window.ParsleyUtils[key] = (...args) => {\n      Utils.warnOnce('Accessing `window.ParsleyUtils` is deprecated. Use `window.Parsley.Utils` instead.');\n      return Utils[key](...args);\n    };\n  }\n});\n\n// ### Define methods that forward to the registry, and deprecate all access except through window.Parsley\nvar registry = window.Parsley._validatorRegistry = new ValidatorRegistry(window.ParsleyConfig.validators, window.ParsleyConfig.i18n);\nwindow.ParsleyValidator = {};\n$.each('setLocale addCatalog addMessage addMessages getErrorMessage formatMessage addValidator updateValidator removeValidator hasValidator'.split(' '), function (i, method) {\n  window.Parsley[method] = (...args) => registry[method](...args);\n  window.ParsleyValidator[method] = function () {\n    Utils.warnOnce(`Accessing the method '${method}' through Validator is deprecated. Simply call 'window.Parsley.${method}(...)'`);\n    return window.Parsley[method](...arguments);\n  };\n});\n\n// ### UI\n// Deprecated global object\nwindow.Parsley.UI = UI;\nwindow.ParsleyUI = {\n  removeError: function (instance, name, doNotUpdateClass) {\n    var updateClass = true !== doNotUpdateClass;\n    Utils.warnOnce(`Accessing UI is deprecated. Call 'removeError' on the instance directly. Please comment in issue 1073 as to your need to call this method.`);\n    return instance.removeError(name, {updateClass});\n  },\n  getErrorsMessages: function (instance) {\n    Utils.warnOnce(`Accessing UI is deprecated. Call 'getErrorsMessages' on the instance directly.`);\n    return instance.getErrorsMessages();\n  }\n};\n$.each('addError updateError'.split(' '), function (i, method) {\n  window.ParsleyUI[method] = function (instance, name, message, assert, doNotUpdateClass) {\n    var updateClass = true !== doNotUpdateClass;\n    Utils.warnOnce(`Accessing UI is deprecated. Call '${method}' on the instance directly. Please comment in issue 1073 as to your need to call this method.`);\n    return instance[method](name, {message, assert, updateClass});\n  };\n});\n\n// ### PARSLEY auto-binding\n// Prevent it by setting `ParsleyConfig.autoBind` to `false`\nif (false !== window.ParsleyConfig.autoBind) {\n  $(function () {\n    // Works only on `data-parsley-validate`.\n    if ($('[data-parsley-validate]').length)\n      $('[data-parsley-validate]').parsley();\n  });\n}\n\nexport default Parsley;\n","import $ from 'jquery';\nimport Field from './field';\nimport Form from './form';\nimport Utils from './utils';\n\nvar o = $({});\nvar deprecated = function () {\n  Utils.warnOnce(\"Parsley's pubsub module is deprecated; use the 'on' and 'off' methods on parsley instances or window.Parsley\");\n};\n\n// Returns an event handler that calls `fn` with the arguments it expects\nfunction adapt(fn, context) {\n  // Store to allow unbinding\n  if (!fn.parsleyAdaptedCallback) {\n    fn.parsleyAdaptedCallback = function () {\n      var args = Array.prototype.slice.call(arguments, 0);\n      args.unshift(this);\n      fn.apply(context || o, args);\n    };\n  }\n  return fn.parsleyAdaptedCallback;\n}\n\nvar eventPrefix = 'parsley:';\n// Converts 'parsley:form:validate' into 'form:validate'\nfunction eventName(name) {\n  if (name.lastIndexOf(eventPrefix, 0) === 0)\n    return name.substr(eventPrefix.length);\n  return name;\n}\n\n// $.listen is deprecated. Use Parsley.on instead.\n$.listen = function (name, callback) {\n  var context;\n  deprecated();\n  if ('object' === typeof arguments[1] && 'function' === typeof arguments[2]) {\n    context = arguments[1];\n    callback = arguments[2];\n  }\n\n  if ('function' !== typeof callback)\n    throw new Error('Wrong parameters');\n\n  window.Parsley.on(eventName(name), adapt(callback, context));\n};\n\n$.listenTo = function (instance, name, fn) {\n  deprecated();\n  if (!(instance instanceof Field) && !(instance instanceof Form))\n    throw new Error('Must give Parsley instance');\n\n  if ('string' !== typeof name || 'function' !== typeof fn)\n    throw new Error('Wrong parameters');\n\n  instance.on(eventName(name), adapt(fn));\n};\n\n$.unsubscribe = function (name, fn) {\n  deprecated();\n  if ('string' !== typeof name || 'function' !== typeof fn)\n    throw new Error('Wrong arguments');\n  window.Parsley.off(eventName(name), fn.parsleyAdaptedCallback);\n};\n\n$.unsubscribeTo = function (instance, name) {\n  deprecated();\n  if (!(instance instanceof Field) && !(instance instanceof Form))\n    throw new Error('Must give Parsley instance');\n  instance.off(eventName(name));\n};\n\n$.unsubscribeAll = function (name) {\n  deprecated();\n  window.Parsley.off(eventName(name));\n  $('form,input,textarea,select').each(function () {\n    var instance = $(this).data('Parsley');\n    if (instance) {\n      instance.off(eventName(name));\n    }\n  });\n};\n\n// $.emit is deprecated. Use jQuery events instead.\n$.emit = function (name, instance) {\n  deprecated();\n  var instanceGiven = (instance instanceof Field) || (instance instanceof Form);\n  var args = Array.prototype.slice.call(arguments, instanceGiven ? 2 : 1);\n  args.unshift(eventName(name));\n  if (!instanceGiven) {\n    instance = window.Parsley;\n  }\n  instance.trigger(...args);\n};\n\nexport default {};\n","import $ from 'jquery';\nimport Utils from './utils';\nimport Base from './base';\n\nimport Parsley from './main';\n\n$.extend(true, Parsley, {\n  asyncValidators: {\n    'default': {\n      fn: function (xhr) {\n        // By default, only status 2xx are deemed successful.\n        // Note: we use status instead of state() because responses with status 200\n        // but invalid messages (e.g. an empty body for content type set to JSON) will\n        // result in state() === 'rejected'.\n        return xhr.status >= 200 && xhr.status < 300;\n      },\n      url: false\n    },\n    reverse: {\n      fn: function (xhr) {\n        // If reverse option is set, a failing ajax request is considered successful\n        return xhr.status < 200 || xhr.status >= 300;\n      },\n      url: false\n    }\n  },\n\n  addAsyncValidator: function (name, fn, url, options) {\n    Parsley.asyncValidators[name] = {\n      fn: fn,\n      url: url || false,\n      options: options || {}\n    };\n\n    return this;\n  }\n\n});\n\nParsley.addValidator('remote', {\n  requirementType: {\n    '': 'string',\n    'validator': 'string',\n    'reverse': 'boolean',\n    'options': 'object'\n  },\n\n  validateString: function (value, url, options, instance) {\n    var data = {};\n    var ajaxOptions;\n    var csr;\n    var validator = options.validator || (true === options.reverse ? 'reverse' : 'default');\n\n    if ('undefined' === typeof Parsley.asyncValidators[validator])\n      throw new Error('Calling an undefined async validator: `' + validator + '`');\n\n    url = Parsley.asyncValidators[validator].url || url;\n\n    // Fill current value\n    if (url.indexOf('{value}') > -1) {\n      url = url.replace('{value}', encodeURIComponent(value));\n    } else {\n      data[instance.element.getAttribute('name') || instance.element.getAttribute('id')] = value;\n    }\n\n    // Merge options passed in from the function with the ones in the attribute\n    var remoteOptions = $.extend(true, options.options || {} , Parsley.asyncValidators[validator].options);\n\n    // All `$.ajax(options)` could be overridden or extended directly from DOM in `data-parsley-remote-options`\n    ajaxOptions = $.extend(true, {}, {\n      url: url,\n      data: data,\n      type: 'GET'\n    }, remoteOptions);\n\n    // Generate store key based on ajax options\n    instance.trigger('field:ajaxoptions', instance, ajaxOptions);\n\n    csr = $.param(ajaxOptions);\n\n    // Initialise querry cache\n    if ('undefined' === typeof Parsley._remoteCache)\n      Parsley._remoteCache = {};\n\n    // Try to retrieve stored xhr\n    var xhr = Parsley._remoteCache[csr] = Parsley._remoteCache[csr] || $.ajax(ajaxOptions);\n\n    var handleXhr = function () {\n      var result = Parsley.asyncValidators[validator].fn.call(instance, xhr, url, options);\n      if (!result) // Map falsy results to rejected promise\n        result = $.Deferred().reject();\n      return $.when(result);\n    };\n\n    return xhr.then(handleXhr, handleXhr);\n  },\n\n  priority: -1\n});\n\nParsley.on('form:submit', function () {\n  Parsley._remoteCache = {};\n});\n\nBase.prototype.addAsyncValidator = function () {\n  Utils.warnOnce('Accessing the method `addAsyncValidator` through an instance is deprecated. Simply call `Parsley.addAsyncValidator(...)`');\n  return Parsley.addAsyncValidator(...arguments);\n};\n","// This is included with the Parsley library itself,\n// thus there is no use in adding it to your project.\nimport Parsley from '../parsley/main';\n\nParsley.addMessages('en', {\n  defaultMessage: \"This value seems to be invalid.\",\n  type: {\n    email:        \"This value should be a valid email.\",\n    url:          \"This value should be a valid url.\",\n    number:       \"This value should be a valid number.\",\n    integer:      \"This value should be a valid integer.\",\n    digits:       \"This value should be digits.\",\n    alphanum:     \"This value should be alphanumeric.\"\n  },\n  notblank:       \"This value should not be blank.\",\n  required:       \"This value is required.\",\n  pattern:        \"This value seems to be invalid.\",\n  min:            \"This value should be greater than or equal to %s.\",\n  max:            \"This value should be lower than or equal to %s.\",\n  range:          \"This value should be between %s and %s.\",\n  minlength:      \"This value is too short. It should have %s characters or more.\",\n  maxlength:      \"This value is too long. It should have %s characters or fewer.\",\n  length:         \"This value length is invalid. It should be between %s and %s characters long.\",\n  mincheck:       \"You must select at least %s choices.\",\n  maxcheck:       \"You must select %s choices or fewer.\",\n  check:          \"You must select between %s and %s choices.\",\n  equalto:        \"This value should be the same.\",\n  euvatin:        \"It's not a valid VAT Identification Number.\",\n});\n\nParsley.setLocale('en');\n","/**\n * inputevent - Alleviate browser bugs for input events\n * https://github.com/marcandre/inputevent\n * @version v0.0.3 - (built Thu, Apr 14th 2016, 5:58 pm)\n * @author Marc-Andre Lafortune <github@marc-andre.ca>\n * @license MIT\n */\n\nimport $ from 'jquery';\n\nfunction InputEvent() {\n  let globals = window || global;\n\n  // Slightly odd way construct our object. This way methods are force bound.\n  // Used to test for duplicate library.\n  Object.assign(this, {\n\n    // For browsers that do not support isTrusted, assumes event is native.\n    isNativeEvent: evt => {\n      return evt.originalEvent && evt.originalEvent.isTrusted !== false;\n    },\n\n    fakeInputEvent: evt => {\n      if (this.isNativeEvent(evt)) {\n        $(evt.target).trigger('input');\n      }\n    },\n\n    misbehaves: evt => {\n      if (this.isNativeEvent(evt)) {\n        this.behavesOk(evt);\n        $(document)\n          .on('change.inputevent', evt.data.selector, this.fakeInputEvent);\n        this.fakeInputEvent(evt);\n      }\n    },\n\n    behavesOk: evt => {\n      if (this.isNativeEvent(evt)) {\n        $(document) // Simply unbinds the testing handler\n          .off('input.inputevent', evt.data.selector, this.behavesOk)\n          .off('change.inputevent', evt.data.selector, this.misbehaves);\n      }\n    },\n\n    // Bind the testing handlers\n    install: () => {\n      if (globals.inputEventPatched) {\n        return;\n      }\n      globals.inputEventPatched = '0.0.3';\n      for (let selector of ['select', 'input[type=\"checkbox\"]', 'input[type=\"radio\"]', 'input[type=\"file\"]']) {\n        $(document)\n          .on('input.inputevent', selector, {selector}, this.behavesOk)\n          .on('change.inputevent', selector, {selector}, this.misbehaves);\n      }\n    },\n\n    uninstall: () => {\n      delete globals.inputEventPatched;\n      $(document).off('.inputevent');\n    }\n\n  });\n};\n\nexport default new InputEvent();\n","import $ from 'jquery';\nimport Parsley from './parsley/main';\nimport './parsley/pubsub';\nimport './parsley/remote';\nimport './i18n/en';\nimport inputevent from './vendor/inputevent';\n\ninputevent.install();\n\nexport default Parsley;\n"],"names":["globalID","pastWarnings","Utils","attr","element","namespace","obj","i","attribute","attributes","regex","RegExp","hasOwnProperty","length","specified","test","name","this","camelize","slice","deserializeValue","value","checkAttr","hasAttribute","setAttr","setAttribute","dasherize","String","getType","getAttribute","generateID","num","isNaN","Number","JSON","parse","e","str","replace","match","chr","toUpperCase","toLowerCase","warn","window","console","arguments","warnOnce","msg","_resetWarnings","trimString","string","date","parsed","map","x","parseInt","year","month","day","Date","getFullYear","getMonth","getDate","integer","number","parseFloat","object","regexp","flags","parseRequirement","requirementType","converter","converted","namespaceEvents","events","split","$","evt","join","difference","array","remove","result","each","_","elem","indexOf","push","all","promises","when","objectCreate","Object","create","prototype","Error","_typeof","TypeError","_SubmitSelector","Base","__id__","Defaults","inputs","excluded","priorityEnabled","multiple","group","uiEnabled","validationThreshold","focus","trigger","triggerAfterFailure","errorClass","successClass","classHandler","errorsContainer","errorsWrapper","errorTemplate","asyncSupport","_pipeAccordingToValidationResult","pipe","r","Deferred","_this","validationResult","reject","resolve","promise","actualizeOptions","options","domOptions","parent","_resetOptions","initOptions","_listeners","on","fn","subscribe","listenTo","off","queue","splice","unsubscribe","unsubscribeTo","target","extraArg","call","asyncIsValid","force","whenValid","_findRelated","querySelectorAll","$element","Validator","spec","extend","validate","requirementFirstArg","Array","isArray","validateMultiple","instance","validateDate","_isDateInput","validateNumber","validateString","parseRequirements","requirements","extraOptionReader","type","values","m","convertArrayRequirement","isPlainObject","requirementSpec","main","extra","key","convertExtraOptionRequirement","priority","ValidatorRegistry","validators","catalog","__class__","locale","init","typeTesters","email","digits","alphanum","url","range","decimalPlaces","Math","max","operatorToValidator","operator","requirementsAndInput","pop","comparisonOperator","_extends","addValidator","Parsley","setLocale","addCatalog","messages","set","addMessage","message","addMessages","nameMessageObject","arg1","arg2","_setValidator","hasValidator","updateValidator","removeValidator","validator","getErrorMessage","constraint","formatMessage","defaultMessage","en","parameters","notblank","required","step","base","tester","nb","decimals","toInt","f","round","pow","pattern","minlength","requirement","maxlength","min","mincheck","maxcheck","check","equalto","refOrValue","$reference","val","euvatin","UI","Form","_actualizeTriggers","onSubmitValidate","onSubmitButton","_focusedField","fields","field","noFocus","_destroyUI","Field","_reflowUI","_buildUI","_ui","diff","diffResults","newResult","oldResult","deep","added","kept","found","j","assert","removed","lastValidationResult","_manageStatusClass","_manageErrorsMessages","_failedOnce","getErrorsMessages","errorMessage","_getErrorMessage","addError","updateClass","_addError","_errorClass","updateError","_updateError","removeError","_removeError","hasConstraints","needsValidation","_successClass","_resetClass","errorsMessagesDisabled","_insertErrorWrapper","$errorsWrapper","find","append","addClass","$errorClassHandler","errorsWrapperId","html","removeAttr","removeClass","customConstraintErrorMessage","_manageClassHandler","validationInformationVisible","$handlerFunction","$handler","jQuery","_inputHolder","nodeName","$errorsContainer","after","$toBind","_this2","_validateIfNeeded","event","getValue","debounce","clearTimeout","_debounced","setTimeout","_this3","_resetUI","children","statusMapping","pending","resolved","rejected","parsley","submitSource","_submitSource","prop","_remoteCache","whenValidate","state","_trigger","stopImmediatePropagation","preventDefault","done","_submit","currentTarget","$synthetic","appendTo","Event","submitEvent","_refreshFields","_withoutReactualizingFormOptions","fail","always","isValid","refresh","reset","destroy","removeData","_bindFields","oldFields","fieldsMappedById","_this4","not","fieldInstance","Factory","uniqueId","oldActualizeOptions","eventName","Constraint","parsleyField","isDomConstraint","validatorSpec","_validatorRegistry","_parseRequirements","parsleyFormInstance","constraints","constraintsByName","_bindConstraints","requirementList","_isInGroup","_refreshed","_isRequired","validateIfEmpty","inArray","groupedConstraints","_getGroupedConstraints","_validateConstraint","_handleWhitespace","_refreshConstraints","refreshConstraints","addConstraint","removeConstraint","updateConstraint","undefined","_bindHtml5Constraints","trimValue","whitespace","c","index","p","sort","a","b","Multiple","addElement","$elements","fieldConstraints","has","data","filter","_init","savedparsleyFormInstance","__version__","is","bind","isMultiple","handleMultiple","parsleyMultipleInstance","input","$previouslyRelated","get","doNotStore","parsleyInstance","ParsleyExtend","vernums","jquery","forEach","document","version","psly","instances","ParsleyConfig","ParsleyUtils","registry","i18n","ParsleyValidator","method","ParsleyUI","doNotUpdateClass","autoBind","deprecated","o","adapt","context","parsleyAdaptedCallback","args","unshift","apply","eventPrefix","lastIndexOf","substr","listen","callback","unsubscribeAll","emit","instanceGiven","asyncValidators","xhr","status","reverse","addAsyncValidator","ajaxOptions","csr","encodeURIComponent","remoteOptions","param","handleXhr","ajax","then","globals","global","isNativeEvent","originalEvent","isTrusted","fakeInputEvent","misbehaves","behavesOk","selector","install","inputEventPatched","uninstall"],"mappings":"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"}
\ No newline at end of file