<table class="form-table">
  <tbody>
    <!-- bounce email -->
    <tr>
      <th scope="row">
        <label for="settings[bounce_email]">
          <%= __('Bounce email') %>
        </label>
        <p class="description">
          <%= __('Your bounced emails will be sent to this address.') %>
        </p>
      </th>
      <td>
        <p>
          <input type="text"
            id="settings[bounce_email]"
            name="bounce[address]"
            value="<%= settings.bounce.address %>"
            placeholder="bounce@mydomain.com"
          />
        </p>
      </td>
    </tr>
    <!-- task scheduler -->
    <tr>
      <th scope="row">
        <label>
          <%= __('Newsletter task scheduler') %>
        </label>
        <p class="description">
          <%= __('Select what will activate your newsletter queue.') %>
          <a href="#TODO"
             target="_blank"
          ><%= __('Read more.') %></a>
        </p>
      </th>
      <td>
        <p>
          <label>
            <input
              type="radio"
              name="task_scheduler[method]"
              value="WordPress"
              <% if (settings.task_scheduler.method == 'WordPress') %>
              checked="checked"
              <% endif %>
            /><%= __('Visitors to your website (recommended)') %>
          </label>
        </p>
        <p>
          <label>
            <input
              type="radio"
              name="task_scheduler[method]"
              value="MailPoet"
              <% if (settings.task_scheduler.method == 'MailPoet') %>
                checked="checked"
                <% endif %>
              /><%= __("MailPoet's own script. Doesn't work with [link]these hosts[/link].")
                    |replace({
                      '[link]': '<a target="_blank" href="#TODO">',
                      '[/link]': '</a>'
                      })
                    |raw
                 %>
          </label>
        </p>
      </td>
    </tr>
    <!-- link tracking -->
    <tr>
      <th scope="row">
        <label>
          <%= __('Open and click tracking') %>
        </label>
        <p class="description">
          <%= __('Some users prefer to not track their subscribers.') %>
        </p>
      </th>
      <td>
        <p>
          <label>
            <input
              type="radio"
              name="tracking[enabled]"
              value="1"
              <% if(settings.tracking.enabled) %>
              checked="checked"
              <% endif %>
            /><%= __('Yes') %>
          </label>
          &nbsp;
          <label>
            <input
              type="radio"
              name="tracking[enabled]"
              value=""
              <% if not(settings.tracking.enabled) %>
              checked="checked"
              <% endif %>
            /><%= __('No') %>
          </label>
        </p>
      </td>
    </tr>
    <!-- share anonymous data? -->
    <tr>
      <th scope="row">
        <label>
          <%= __('Share anonymous data') %>
        </label>
        <p class="description">
          <%= __('Share anonymous data and help us improve the plugin! We appreciate your help.') %>
          <a
            href="http://support.mailpoet.com/knowledgebase/share-your-data/?utm_source=wpadmin&utm_campaign=advanced_settings"
            target="_blank"
          ><%= __('Read more.') %></a>
        </p>
      </th>
      <td>
        <p>
          <label>
            <input
              type="radio"
              name="analytics[enabled]"
              value="1"
              <% if(settings.analytics.enabled) %>
                checked="checked"
              <% endif %>
            /><%= __('Yes') %>
          </label>
          &nbsp;
          <label>
            <input
              type="radio"
              name="analytics[enabled]"
              value=""
              <% if not(settings.analytics.enabled) %>
                checked="checked"
              <% endif %>
            /><%= __('No') %>
          </label>
        </p>
      </td>
    </tr>
    <!-- reinstall -->
    <tr>
      <th scope="row">
        <label><%= __('Reinstall from scratch') %></label>
        <p class="description">
          <%= __('Want to start from the beginning? This will completely wipe out MailPoet and reinstall from scratch.') %>
        </p>
      </th>
      <td>
        <p>
          <a
            id="mailpoet_reinstall"
            class="button"
            href="javascript:;"><%= __('Reinstall now...') %></a>
        </p>
      </td>
    </tr>
  </tbody>
</table>

<script type="text/javascript">
  jQuery(function($) {
    $(function() {
      $('#mailpoet_reinstall').on('click', function() {
        if(confirm(
          "<%= __('If you continue, all of your current MailPoet data will be permanently erased (newsletters, statistics, subscribers, etc...)') %>"
        )) {
          MailPoet.Modal.loading(true);
          MailPoet.Ajax.post({
            'endpoint': 'setup',
            'action': 'reset'
          }).done(function(response) {
            if(response.result === true) {
              window.location = "<%= admin_url('admin.php?page=mailpoet-newsletters') %>";
            } else {
              MailPoet.Notice.error(
                "<%= __('MailPoet could not be reinstalled. You may need to remove it manually first.') %>",
              { scroll: true });
            }
          });
        }
        return false;
      });
    });
  });
</script>