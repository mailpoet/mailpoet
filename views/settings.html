<% extends 'layout.html' %>

<% block content %>
  <h1><%= 'Settings' %></h1>

  <form id="mailpoet_settings" novalidate>

  </form>

  <script type="text/javascript">
  jQuery(function($) {
    function saveSettings() {
      console.log('save settings...');

      return false;
    }

    // save settings on form submission
    $(document).on('submit', '#mailpoet_settings', saveSettings);

    // on dom loaded
    $(function() {

      function loadSettings() {
        MailPoet.Ajax.get({
          endpoint: 'settings',
          action: 'get',
          onSuccess: function(response) {
            var template = Handlebars.compile($('#settings_basics').html());
            $('#mailpoet_settings').html(template(response));
          }
        });
      }

      loadSettings();
    });
  });
  </script>
<% endblock %>

<% block templates %>
  <%= partial('settings_basics', 'settings/templates/basics.hbs') %>
<% endblock %>