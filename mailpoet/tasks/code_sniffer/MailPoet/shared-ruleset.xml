<?xml version="1.0"?>
<ruleset name="MailPoet">
  <description>MailPoet specific rule set</description>
  <exclude-pattern>*/phpstan/woocommerce.php</exclude-pattern>

  <!-- WordPress Coding Standards (WPCS) -->
  <rule ref="WordPress-Extra" />

  <!--
    Disabled WPCS rules.
    These rules are disabled because our current codebase does not comply with them.
    We can gradually enable them and make this list shorter and shorter.
  -->
  <rule ref="Generic.CodeAnalysis.AssignmentInCondition.FoundInWhileCondition"><severity>0</severity></rule>
  <rule ref="Generic.CodeAnalysis.EmptyPHPStatement.SemicolonWithoutCodeDetected"><severity>0</severity></rule>
  <rule ref="Generic.CodeAnalysis.EmptyStatement.DetectedCatch"><severity>0</severity></rule>
  <rule ref="Generic.CodeAnalysis.EmptyStatement.DetectedIf"><severity>0</severity></rule>
  <rule ref="Generic.CodeAnalysis.EmptyStatement.DetectedWhile"><severity>0</severity></rule>
  <rule ref="Generic.CodeAnalysis.ForLoopWithTestFunctionCall.NotAllowed"><severity>0</severity></rule>
  <rule ref="Generic.CodeAnalysis.RequireExplicitBooleanOperatorPrecedence.MissingParentheses"><severity>0</severity></rule>
  <rule ref="Generic.CodeAnalysis.UnusedFunctionParameter.Found"><severity>0</severity></rule>
  <rule ref="Generic.CodeAnalysis.UnusedFunctionParameter.FoundAfterLastUsed"><severity>0</severity></rule>
  <rule ref="Generic.CodeAnalysis.UselessOverridingMethod.Found"><severity>0</severity></rule>
  <rule ref="Generic.ControlStructures.InlineControlStructure.NotAllowed"><severity>0</severity></rule>
  <rule ref="Generic.Files.OneObjectStructurePerFile.MultipleFound"><severity>0</severity></rule>
  <rule ref="Generic.Formatting.MultipleStatementAlignment.NotSameWarning"><severity>0</severity></rule>
  <rule ref="Generic.Formatting.SpaceAfterCast.NoSpace"><severity>0</severity></rule>
  <rule ref="Generic.Strings.UnnecessaryStringConcat.Found"><severity>0</severity></rule>
  <rule ref="Generic.WhiteSpace.ArbitraryParenthesesSpacing.SpaceAfterOpen"><severity>0</severity></rule>
  <rule ref="Generic.WhiteSpace.ArbitraryParenthesesSpacing.SpaceBeforeClose"><severity>0</severity></rule>
  <rule ref="Generic.WhiteSpace.DisallowSpaceIndent.SpacesUsed"><severity>0</severity></rule>
  <rule ref="Generic.WhiteSpace.IncrementDecrementSpacing.SpaceAfterIncrement"><severity>0</severity></rule>
  <rule ref="Modernize.FunctionCalls.Dirname.FileConstant"><severity>0</severity></rule>
  <rule ref="NormalizedArrays.Arrays.ArrayBraceSpacing.EmptyArraySpacing"><severity>0</severity></rule>
  <rule ref="NormalizedArrays.Arrays.ArrayBraceSpacing.SpaceAfterArrayOpenerMultiLine"><severity>0</severity></rule>
  <rule ref="NormalizedArrays.Arrays.ArrayBraceSpacing.SpaceAfterArrayOpenerSingleLine"><severity>0</severity></rule>
  <rule ref="NormalizedArrays.Arrays.ArrayBraceSpacing.SpaceBeforeArrayCloserMultiLine"><severity>0</severity></rule>
  <rule ref="NormalizedArrays.Arrays.ArrayBraceSpacing.SpaceBeforeArrayCloserSingleLine"><severity>0</severity></rule>
  <rule ref="NormalizedArrays.Arrays.CommaAfterLast.FoundSingleLine"><severity>0</severity></rule>
  <rule ref="NormalizedArrays.Arrays.CommaAfterLast.MissingMultiLineCloserSameLine"><severity>0</severity></rule>
  <rule ref="PEAR.Files.IncludingFile.BracketsNotRequired"><severity>0</severity></rule>
  <rule ref="PEAR.Files.IncludingFile.UseRequire"><severity>0</severity></rule>
  <rule ref="PEAR.Functions.FunctionCallSignature.CloseBracketLine"><severity>0</severity></rule>
  <rule ref="PEAR.Functions.FunctionCallSignature.ContentAfterOpenBracket"><severity>0</severity></rule>
  <rule ref="PEAR.Functions.FunctionCallSignature.Indent"><severity>0</severity></rule>
  <rule ref="PEAR.Functions.FunctionCallSignature.MultipleArguments"><severity>0</severity></rule>
  <rule ref="PEAR.Functions.FunctionCallSignature.OpeningIndent"><severity>0</severity></rule>
  <rule ref="PEAR.Functions.FunctionCallSignature.SpaceAfterOpenBracket"><severity>0</severity></rule>
  <rule ref="PEAR.Functions.FunctionCallSignature.SpaceBeforeCloseBracket"><severity>0</severity></rule>
  <rule ref="PEAR.NamingConventions.ValidClassName.StartWithCapital"><severity>0</severity></rule>
  <rule ref="PSR12.Classes.ClassInstantiation.MissingParentheses"><severity>0</severity></rule>
  <rule ref="PSR12.Files.FileHeader.IncorrectOrder"><severity>0</severity></rule>
  <rule ref="PSR12.Keywords.ShortFormTypeKeywords.LongFound"><severity>0</severity></rule>
  <rule ref="PSR2.ControlStructures.ElseIfDeclaration.NotAllowed"><severity>0</severity></rule>
  <rule ref="PSR2.ControlStructures.SwitchDeclaration.BreakIndent"><severity>0</severity></rule>
  <rule ref="PSR2.ControlStructures.SwitchDeclaration.TerminatingComment"><severity>0</severity></rule>
  <rule ref="PSR2.Methods.FunctionClosingBrace.SpacingBeforeClose"><severity>0</severity></rule>
  <rule ref="PSR2.Methods.MethodDeclaration.AbstractAfterVisibility"><severity>0</severity></rule>
  <rule ref="PSR2.Methods.MethodDeclaration.StaticBeforeVisibility"><severity>0</severity></rule>
  <rule ref="PSR2.Methods.MethodDeclaration.Underscore"><severity>0</severity></rule>
  <rule ref="Squiz.Classes.SelfMemberReference.NotUsed"><severity>0</severity></rule>
  <rule ref="Squiz.ControlStructures.ControlSignature.SpaceAfterCloseBrace"><severity>0</severity></rule>
  <rule ref="Squiz.ControlStructures.ControlSignature.SpaceAfterKeyword"><severity>0</severity></rule>
  <rule ref="Squiz.Functions.FunctionDeclarationArgumentSpacing.SpacingAfterOpen"><severity>0</severity></rule>
  <rule ref="Squiz.Functions.FunctionDeclarationArgumentSpacing.SpacingBeforeClose"><severity>0</severity></rule>
  <rule ref="Squiz.Functions.MultiLineFunctionDeclaration.ContentAfterBrace"><severity>0</severity></rule>
  <rule ref="Squiz.Functions.MultiLineFunctionDeclaration.Indent"><severity>0</severity></rule>
  <rule ref="Squiz.Functions.MultiLineFunctionDeclaration.OneParamPerLine"><severity>0</severity></rule>
  <rule ref="Squiz.Functions.MultiLineFunctionDeclaration.SpaceAfterFunction"><severity>0</severity></rule>
  <rule ref="Squiz.Functions.MultiLineFunctionDeclaration.SpaceAfterUse"><severity>0</severity></rule>
  <rule ref="Squiz.Functions.MultiLineFunctionDeclaration.SpaceBeforeBrace"><severity>0</severity></rule>
  <rule ref="Squiz.Functions.MultiLineFunctionDeclaration.SpaceBeforeOpenParen"><severity>0</severity></rule>
  <rule ref="Squiz.Functions.MultiLineFunctionDeclaration.UseOneParamPerLine"><severity>0</severity></rule>
  <rule ref="Squiz.Operators.IncrementDecrementUsage.Found"><severity>0</severity></rule>
  <rule ref="Squiz.Operators.ValidLogicalOperators.NotAllowed"><severity>0</severity></rule>
  <rule ref="Squiz.PHP.DisallowMultipleAssignments.Found"><severity>0</severity></rule>
  <rule ref="Squiz.PHP.DisallowSizeFunctionsInLoops.Found"><severity>0</severity></rule>
  <rule ref="Squiz.PHP.EmbeddedPhp.NoSemicolon"><severity>0</severity></rule>
  <rule ref="Squiz.Strings.DoubleQuoteUsage.NotRequired"><severity>0</severity></rule>
  <rule ref="Squiz.WhiteSpace.SemicolonSpacing.Incorrect"><severity>0</severity></rule>
  <rule ref="Squiz.WhiteSpace.SuperfluousWhitespace.EmptyLines"><severity>0</severity></rule>
  <rule ref="Squiz.WhiteSpace.SuperfluousWhitespace.EndLine"><severity>0</severity></rule>
  <rule ref="Universal.Arrays.DisallowShortArraySyntax.Found"><severity>0</severity></rule>
  <rule ref="Universal.Arrays.DuplicateArrayKey.Found"><severity>0</severity></rule>
  <rule ref="Universal.Classes.RequireAnonClassParentheses.Missing"><severity>0</severity></rule>
  <rule ref="Universal.CodeAnalysis.NoDoubleNegative.FoundDouble"><severity>0</severity></rule>
  <rule ref="Universal.CodeAnalysis.NoEchoSprintf.Found"><severity>0</severity></rule>
  <rule ref="Universal.ControlStructures.DisallowLonelyIf.Found"><severity>0</severity></rule>
  <rule ref="Universal.Files.SeparateFunctionsFromOO.Mixed"><severity>0</severity></rule>
  <rule ref="Universal.NamingConventions.NoReservedKeywordParameterNames.arrayFound"><severity>0</severity></rule>
  <rule ref="Universal.NamingConventions.NoReservedKeywordParameterNames.classFound"><severity>0</severity></rule>
  <rule ref="Universal.NamingConventions.NoReservedKeywordParameterNames.defaultFound"><severity>0</severity></rule>
  <rule ref="Universal.NamingConventions.NoReservedKeywordParameterNames.fnFound"><severity>0</severity></rule>
  <rule ref="Universal.NamingConventions.NoReservedKeywordParameterNames.functionFound"><severity>0</severity></rule>
  <rule ref="Universal.NamingConventions.NoReservedKeywordParameterNames.includeFound"><severity>0</severity></rule>
  <rule ref="Universal.NamingConventions.NoReservedKeywordParameterNames.listFound"><severity>0</severity></rule>
  <rule ref="Universal.NamingConventions.NoReservedKeywordParameterNames.namespaceFound"><severity>0</severity></rule>
  <rule ref="Universal.NamingConventions.NoReservedKeywordParameterNames.objectFound"><severity>0</severity></rule>
  <rule ref="Universal.NamingConventions.NoReservedKeywordParameterNames.parentFound"><severity>0</severity></rule>
  <rule ref="Universal.NamingConventions.NoReservedKeywordParameterNames.readonlyFound"><severity>0</severity></rule>
  <rule ref="Universal.NamingConventions.NoReservedKeywordParameterNames.returnFound"><severity>0</severity></rule>
  <rule ref="Universal.NamingConventions.NoReservedKeywordParameterNames.stringFound"><severity>0</severity></rule>
  <rule ref="Universal.NamingConventions.NoReservedKeywordParameterNames.varFound"><severity>0</severity></rule>
  <rule ref="Universal.Operators.DisallowShortTernary.Found"><severity>0</severity></rule>
  <rule ref="Universal.Operators.DisallowStandalonePostIncrementDecrement.PostDecrementFound"><severity>0</severity></rule>
  <rule ref="Universal.Operators.DisallowStandalonePostIncrementDecrement.PostIncrementFound"><severity>0</severity></rule>
  <rule ref="Universal.Operators.StrictComparisons.LooseEqual"><severity>0</severity></rule>
  <rule ref="Universal.Operators.StrictComparisons.LooseNotEqual"><severity>0</severity></rule>
  <rule ref="Universal.WhiteSpace.CommaSpacing.CommaAfterComment"><severity>0</severity></rule>
  <rule ref="Universal.WhiteSpace.CommaSpacing.NoSpaceAfter"><severity>0</severity></rule>
  <rule ref="Universal.WhiteSpace.PrecisionAlignment.Found"><severity>0</severity></rule>
  <rule ref="WordPress.Arrays.ArrayDeclarationSpacing.ArrayItemNoNewLine"><severity>0</severity></rule>
  <rule ref="WordPress.Arrays.ArrayDeclarationSpacing.AssociativeArrayFound"><severity>0</severity></rule>
  <rule ref="WordPress.Arrays.ArrayIndentation.CloseBraceNotAligned"><severity>0</severity></rule>
  <rule ref="WordPress.Arrays.ArrayIndentation.ItemNotAligned"><severity>0</severity></rule>
  <rule ref="WordPress.Arrays.ArrayIndentation.MultiLineArrayItemNotAligned"><severity>0</severity></rule>
  <rule ref="WordPress.Arrays.ArrayKeySpacingRestrictions.NoSpacesAroundArrayKeys"><severity>0</severity></rule>
  <rule ref="WordPress.Arrays.MultipleStatementAlignment.DoubleArrowNotAligned"><severity>0</severity></rule>
  <rule ref="WordPress.CodeAnalysis.AssignmentInTernaryCondition.FoundInTernaryCondition"><severity>0</severity></rule>
  <rule ref="WordPress.DateTime.CurrentTimeTimestamp.Requested"><severity>0</severity></rule>
  <rule ref="WordPress.DateTime.RestrictedFunctions.date_date"><severity>0</severity></rule>
  <rule ref="WordPress.DB.RestrictedClasses.mysql__mysqli"><severity>0</severity></rule>
  <rule ref="WordPress.DB.RestrictedFunctions.mysql_mysqli_report"><severity>0</severity></rule>
  <rule ref="WordPress.DB.SlowDBQuery.slow_db_query_meta_key"><severity>0</severity></rule>
  <rule ref="WordPress.DB.SlowDBQuery.slow_db_query_meta_value"><severity>0</severity></rule>
  <rule ref="WordPress.DB.SlowDBQuery.slow_db_query_tax_query"><severity>0</severity></rule>
  <rule ref="WordPress.Files.FileName.InvalidClassFileName"><severity>0</severity></rule>
  <rule ref="WordPress.Files.FileName.NotHyphenatedLowercase"><severity>0</severity></rule>
  <rule ref="WordPress.NamingConventions.ValidFunctionName.FunctionNameInvalid"><severity>0</severity></rule>
  <rule ref="WordPress.NamingConventions.ValidFunctionName.MethodNameInvalid"><severity>0</severity></rule>
  <rule ref="WordPress.NamingConventions.ValidPostTypeSlug.Reserved"><severity>0</severity></rule>
  <rule ref="WordPress.NamingConventions.ValidVariableName.InterpolatedVariableNotSnakeCase"><severity>0</severity></rule>
  <rule ref="WordPress.NamingConventions.ValidVariableName.PropertyNotSnakeCase"><severity>0</severity></rule>
  <rule ref="WordPress.NamingConventions.ValidVariableName.UsedPropertyNotSnakeCase"><severity>0</severity></rule>
  <rule ref="WordPress.NamingConventions.ValidVariableName.VariableNotSnakeCase"><severity>0</severity></rule>
  <rule ref="WordPress.PHP.DevelopmentFunctions.error_log_error_log"><severity>0</severity></rule>
  <rule ref="WordPress.PHP.DevelopmentFunctions.error_log_print_r"><severity>0</severity></rule>
  <rule ref="WordPress.PHP.DevelopmentFunctions.error_log_set_error_handler"><severity>0</severity></rule>
  <rule ref="WordPress.PHP.DevelopmentFunctions.error_log_var_export"><severity>0</severity></rule>
  <rule ref="WordPress.PHP.DevelopmentFunctions.prevent_path_disclosure_error_reporting"><severity>0</severity></rule>
  <rule ref="WordPress.PHP.DiscouragedPHPFunctions.obfuscation_base64_decode"><severity>0</severity></rule>
  <rule ref="WordPress.PHP.DiscouragedPHPFunctions.obfuscation_base64_encode"><severity>0</severity></rule>
  <rule ref="WordPress.PHP.DiscouragedPHPFunctions.runtime_configuration_error_reporting"><severity>0</severity></rule>
  <rule ref="WordPress.PHP.DiscouragedPHPFunctions.serialize_serialize"><severity>0</severity></rule>
  <rule ref="WordPress.PHP.DiscouragedPHPFunctions.serialize_unserialize"><severity>0</severity></rule>
  <rule ref="WordPress.PHP.DiscouragedPHPFunctions.system_calls_exec"><severity>0</severity></rule>
  <rule ref="WordPress.PHP.DiscouragedPHPFunctions.system_calls_passthru"><severity>0</severity></rule>
  <rule ref="WordPress.PHP.DiscouragedPHPFunctions.urlencode_urlencode"><severity>0</severity></rule>
  <rule ref="WordPress.PHP.IniSet.display_errors_Disallowed"><severity>0</severity></rule>
  <rule ref="WordPress.PHP.IniSet.max_execution_time_Disallowed"><severity>0</severity></rule>
  <rule ref="WordPress.PHP.IniSet.memory_limit_Disallowed"><severity>0</severity></rule>
  <rule ref="WordPress.PHP.NoSilencedErrors.Discouraged"><severity>0</severity></rule>
  <rule ref="WordPress.PHP.PregQuoteDelimiter.Missing"><severity>0</severity></rule>
  <rule ref="WordPress.PHP.StrictInArray.MissingTrueStrict"><severity>0</severity></rule>
  <rule ref="WordPress.PHP.YodaConditions.NotYoda"><severity>0</severity></rule>
  <rule ref="WordPress.Security.EscapeOutput.ExceptionNotEscaped"><severity>0</severity></rule>
  <rule ref="WordPress.Security.NonceVerification.Missing"><severity>0</severity></rule>
  <rule ref="WordPress.Security.NonceVerification.Recommended"><severity>0</severity></rule>
  <rule ref="WordPress.WhiteSpace.CastStructureSpacing.NoSpaceBeforeOpenParenthesis"><severity>0</severity></rule>
  <rule ref="WordPress.WhiteSpace.ControlStructureSpacing.BlankLineAfterEnd"><severity>0</severity></rule>
  <rule ref="WordPress.WhiteSpace.ControlStructureSpacing.NoSpaceAfterOpenParenthesis"><severity>0</severity></rule>
  <rule ref="WordPress.WhiteSpace.ControlStructureSpacing.NoSpaceAfterStructureOpen"><severity>0</severity></rule>
  <rule ref="WordPress.WhiteSpace.ControlStructureSpacing.NoSpaceBeforeCloseParenthesis"><severity>0</severity></rule>
  <rule ref="WordPress.WhiteSpace.ObjectOperatorSpacing.After"><severity>0</severity></rule>
  <rule ref="WordPress.WhiteSpace.OperatorSpacing.NoSpaceAfter"><severity>0</severity></rule>
  <rule ref="WordPress.WhiteSpace.OperatorSpacing.NoSpaceBefore"><severity>0</severity></rule>
  <rule ref="WordPress.WP.AlternativeFunctions.curl_curl_errno"><severity>0</severity></rule>
  <rule ref="WordPress.WP.AlternativeFunctions.curl_curl_error"><severity>0</severity></rule>
  <rule ref="WordPress.WP.AlternativeFunctions.curl_curl_getinfo"><severity>0</severity></rule>
  <rule ref="WordPress.WP.AlternativeFunctions.file_get_contents_file_get_contents"><severity>0</severity></rule>
  <rule ref="WordPress.WP.AlternativeFunctions.file_system_operations_chmod"><severity>0</severity></rule>
  <rule ref="WordPress.WP.AlternativeFunctions.file_system_operations_fclose"><severity>0</severity></rule>
  <rule ref="WordPress.WP.AlternativeFunctions.file_system_operations_file_put_contents"><severity>0</severity></rule>
  <rule ref="WordPress.WP.AlternativeFunctions.file_system_operations_fopen"><severity>0</severity></rule>
  <rule ref="WordPress.WP.AlternativeFunctions.file_system_operations_fsockopen"><severity>0</severity></rule>
  <rule ref="WordPress.WP.AlternativeFunctions.file_system_operations_fwrite"><severity>0</severity></rule>
  <rule ref="WordPress.WP.AlternativeFunctions.file_system_operations_is_writable"><severity>0</severity></rule>
  <rule ref="WordPress.WP.AlternativeFunctions.file_system_operations_mkdir"><severity>0</severity></rule>
  <rule ref="WordPress.WP.AlternativeFunctions.file_system_operations_readfile"><severity>0</severity></rule>
  <rule ref="WordPress.WP.AlternativeFunctions.file_system_operations_rmdir"><severity>0</severity></rule>
  <rule ref="WordPress.WP.AlternativeFunctions.file_system_operations_touch"><severity>0</severity></rule>
  <rule ref="WordPress.WP.AlternativeFunctions.json_encode_json_encode"><severity>0</severity></rule>
  <rule ref="WordPress.WP.AlternativeFunctions.parse_url_parse_url"><severity>0</severity></rule>
  <rule ref="WordPress.WP.AlternativeFunctions.rand_mt_rand"><severity>0</severity></rule>
  <rule ref="WordPress.WP.AlternativeFunctions.rand_rand"><severity>0</severity></rule>
  <rule ref="WordPress.WP.AlternativeFunctions.rename_rename"><severity>0</severity></rule>
  <rule ref="WordPress.WP.AlternativeFunctions.strip_tags_strip_tags"><severity>0</severity></rule>
  <rule ref="WordPress.WP.AlternativeFunctions.unlink_unlink"><severity>0</severity></rule>
  <rule ref="WordPress.WP.Capabilities.Unknown"><severity>0</severity></rule>
  <rule ref="WordPress.WP.CapitalPDangit.MisspelledInComment"><severity>0</severity></rule>
  <rule ref="WordPress.WP.CapitalPDangit.MisspelledInText"><severity>0</severity></rule>
  <rule ref="WordPress.WP.EnqueuedResourceParameters.MissingVersion"><severity>0</severity></rule>
  <rule ref="WordPress.WP.EnqueuedResourceParameters.NotInFooter"><severity>0</severity></rule>
  <rule ref="WordPress.WP.EnqueuedResources.NonEnqueuedScript"><severity>0</severity></rule>
  <rule ref="WordPress.WP.EnqueuedResources.NonEnqueuedStylesheet"><severity>0</severity></rule>
  <rule ref="WordPress.WP.GlobalVariablesOverride.Prohibited"><severity>0</severity></rule>

  <!-- Files -->
  <rule ref="Generic.Files.ByteOrderMark"/> <!-- Disallow usage of BOMs -->
  <rule ref="Generic.Files.LineEndings"> <!-- Use Unix newlines -->
    <properties>
      <property name="eolChar" value="\n"/>
    </properties>
  </rule>
  <rule ref="PSR2.Files.EndFileNewline"/>
  <rule ref="Generic.Files.InlineHTML"/> <!-- Enforce strict types for Automation -->
  <rule ref="SlevomatCodingStandard.TypeHints.DeclareStrictTypes">
    <properties>
      <property name="declareOnFirstLine" value="true" />
      <property name="spacesCountAroundEqualsSign" value="1" />
    </properties>
  </rule>

  <!-- Namespaces -->
  <rule ref="PSR2.Namespaces.NamespaceDeclaration"/>
  <rule ref="SlevomatCodingStandard.Namespaces.NamespaceDeclaration"/>
  <rule ref="SlevomatCodingStandard.Namespaces.NamespaceSpacing">
    <properties>
      <property name="linesCountBeforeNamespace" value="1" />
      <property name="linesCountAfterNamespace" value="1" />
    </properties>
  </rule>
  <rule ref="SlevomatCodingStandard.Namespaces.RequireOneNamespaceInFile"/>

  <rule ref="Generic.PHP.ForbiddenFunctions">
    <properties>
      <property name="forbiddenFunctions" type="array" value="assert=>null"/>
    </properties>
  </rule>

  <!-- Namespaces - "use" statements -->
  <rule ref="PSR2.Namespaces.UseDeclaration"/> <!-- One namespace per use, one blank line after final use statement -->
  <rule ref="SlevomatCodingStandard.Namespaces.UseDoesNotStartWithBackslash"/>
  <rule ref="SlevomatCodingStandard.Namespaces.MultipleUsesPerLine"/> <!-- Prohibits multiple uses separated by commas -->
  <rule ref="SlevomatCodingStandard.Namespaces.DisallowGroupUse"/>
  <rule ref="SlevomatCodingStandard.Namespaces.UselessAlias"/>
  <rule ref="SlevomatCodingStandard.Namespaces.AlphabeticallySortedUses"/>
  <rule ref="SlevomatCodingStandard.Namespaces.UseSpacing">
    <properties>
      <property name="linesCountBeforeFirstUse" value="1" />
      <property name="linesCountAfterLastUse" value="1" />
      <property name="linesCountBetweenUseTypes" value="1" />
    </properties>
  </rule>
  <rule ref="SlevomatCodingStandard.Namespaces.UnusedUses"> <!-- Disallow unused "use" statements -->
    <properties>
      <property name="searchAnnotations" value="true"/>
    </properties>
  </rule>

  <!-- Classes, interfaces, traits -->
  <rule ref="Generic.Files.OneClassPerFile"/> <!-- Limit classes to one per file -->
  <rule ref="Generic.Files.OneInterfacePerFile"/> <!-- Limit interfaces to one per file -->
  <rule ref="Generic.Classes.DuplicateClassName"/> <!-- Disallow same class or interface name in multiple files -->
  <rule ref="Generic.Classes.OpeningBraceSameLine"/> <!-- Opening brace of a class/interface/trait must be on the same line as declaration -->
  <rule ref="Squiz.Classes.ClassFileName"/> <!-- Class name and file name must match -->
  <rule ref="Squiz.Classes.ValidClassName"> <!-- Classes should be named camel case with first letter capitalised -->
    <exclude-pattern>lib/Migrations</exclude-pattern>
  </rule>
  <rule ref="Squiz.Classes.LowercaseClassKeywords"/> <!-- The "class" keyword must be lowercased -->
  <rule ref="PSR1.Classes.ClassDeclaration"/> <!-- Each class must be in a file by itself and must be under a namespace -->
  <rule ref="PSR2.Classes.PropertyDeclaration"/> <!-- Properties must have visibility, no trailing "_", one property per statement, "static" before visibility -->
  <rule ref="SlevomatCodingStandard.Classes.RequireMultiLineMethodSignature"> <!-- Constructor signature must be always on multi lines -->
    <properties>
      <property name="minLineLength" value="0" /> <!-- Always -->
      <property name="includedMethodPatterns" type="array">
        <element value="/__construct/" />
      </property>
    </properties>
  </rule>

  <!-- Indentation -->
  <rule ref="Generic.WhiteSpace.DisallowTabIndent"/> <!-- Disallow indenting with tabs -->
  <rule ref="Generic.WhiteSpace.ScopeIndent"> <!-- Control structures, classes, functions indent 2 spaces per level -->
    <properties>
      <property name="indent" value="2"/>
      <property name="tabIndent" value="false"/>
    </properties>
  </rule>
  <rule ref="PEAR.WhiteSpace.ScopeClosingBrace"> <!-- Closing brace should be at the same level as opening brace -->
    <properties>
      <property name="indent" value="2"/>
    </properties>
  </rule>
  <!-- Enforce indentation on multiline function declarations -->
  <rule ref="MailPoet.ControlStructures.FunctionDeclaration"/>

  <!-- Spacing -->
  <rule ref="Squiz.WhiteSpace.FunctionSpacing">
    <properties>
      <property name="spacing" value="1" /> <!-- 1 space between methods -->
      <property name="spacingBeforeFirst" value="0" /> <!-- no spaces before first method -->
      <property name="spacingAfterLast" value="0" /> <!-- no spaces after last method -->
    </properties>
  </rule>
  <rule ref="Squiz.Functions.FunctionDeclarationArgumentSpacing"> <!-- 1 space between assignment in function declarations -->
    <properties>
      <property name="equalsSpacing" value="1" />
    </properties>
  </rule>
  <rule ref="SlevomatCodingStandard.Whitespaces.DuplicateSpaces"> <!-- Checks duplicate spaces anywhere -->
    <properties>
      <property name="ignoreSpacesInAnnotation" value="1" /> <!-- to allow multiple spaces to align annotations -->
      <property name="ignoreSpacesInComment" value="1" /> <!-- to allow multiple spaces to align content of the comment -->
    </properties>
  </rule>
  <rule ref="PSR12.ControlStructures.ControlStructureSpacing"> <!-- No space after opening brackets and before closing brackets -->
    <properties>
      <property name="indent" value="2" />
    </properties>
  </rule>
  <rule ref="Generic.Formatting.SpaceAfterNot"> <!-- No space after NOT operator -->
    <properties>
      <property name="spacing" value="0" />
    </properties>
  </rule>
  <rule ref="SlevomatCodingStandard.Arrays.SingleLineArrayWhitespace"> <!-- No space after opening brackets and before closing brackets -->
    <properties>
      <property name="spacesAroundBrackets" value="0" />
    </properties>
  </rule>

  <!-- Typehints -->
  <rule ref="Generic.PHP.LowerCaseType"/> <!-- Force PHP 7 param and return types to be lowercased -->
  <rule ref="SlevomatCodingStandard.TypeHints.LongTypeHints"/> <!-- Enforces short scalar typehint variants ("int", not "integer", etc.) -->
  <rule ref="SlevomatCodingStandard.TypeHints.ParameterTypeHintSpacing"/> <!-- Space between type and name, no space between "?" and type -->
  <rule ref="SlevomatCodingStandard.TypeHints.PropertyTypeHint">
    <exclude name="SlevomatCodingStandard.TypeHints.PropertyTypeHint.MissingNativeTypeHint"/>
    <exclude name="SlevomatCodingStandard.TypeHints.PropertyTypeHint.MissingAnyTypeHint"/>
    <exclude name="SlevomatCodingStandard.TypeHints.PropertyTypeHint.MissingTraversableTypeHintSpecification"/>
  </rule> <!-- Space between type and name, no space between "?" and type -->
  <rule ref="SlevomatCodingStandard.TypeHints.ReturnTypeHintSpacing"/> <!-- No space before colon, one space before "?", no space after -->
  <!-- Reports empty comments -->
  <rule ref="SlevomatCodingStandard.Commenting.EmptyComment"/>
  <!-- This sniff enforces trailing commas in multi-line arrays -->
  <rule ref="SlevomatCodingStandard.Arrays.TrailingArrayComma"/>
  <!-- Disallows assignments in if, elseif and do-while loop conditions -->
  <rule ref="SlevomatCodingStandard.ControlStructures.AssignmentInCondition"/>
  <!-- Disallows use of continue without integer operand in switch because it emits a warning in PHP 7.3 and higher. -->
  <rule ref="SlevomatCodingStandard.ControlStructures.DisallowContinueWithoutIntegerOperandInSwitch"/>
  <!-- Control structures must have at least one statement in the body -->
  <!--<rule ref="Generic.CodeAnalysis.EmptyStatement"/>-->
  <!-- For loops with only second expression should be while loops -->
  <rule ref="Generic.CodeAnalysis.ForLoopShouldBeWhileLoop"/>
  <!-- Same variable should not be used for two nested loops as incrementers -->
  <rule ref="Generic.CodeAnalysis.JumbledIncrementer"/>
  <!-- Shouldn't use if statements that are always evaluated -->
  <rule ref="Generic.CodeAnalysis.UnconditionalIfStatement"/>
  <!-- Final methods don't need final in classes marked as final -->
  <rule ref="Generic.CodeAnalysis.UnnecessaryFinalModifier"/>
  <!-- All parameters in function signature should be used within the function -->
  <!--<rule ref="Generic.CodeAnalysis.UnusedFunctionParameter"/>-->
  <!-- Don't use methods that extend and only call the parent method -->
  <!--<rule ref="Generic.CodeAnalysis.UselessOverridingMethod"/>-->

  <!-- Only short array syntax is allowed -->
  <rule ref="Generic.Arrays.DisallowLongArraySyntax"/>
  <rule ref="Squiz.Strings.ConcatenationSpacing">
    <properties>
      <property name="ignoreNewlines" value="true" />
      <property name="spacing" value="1" />
    </properties>
  </rule>
  <rule ref="Squiz.WhiteSpace.OperatorSpacing">
    <properties>
      <property name="ignoreNewlines" value="true" />
    </properties>
  </rule>

  <!-- Disallow multiple statements on a single line -->
  <rule ref="Generic.Formatting.DisallowMultipleStatements"/>
  <!-- There should be no space after cast -->
  <rule ref="Generic.Formatting.NoSpaceAfterCast"/>

  <!-- Function calls should have one space after comma -->
  <!-- And single spaces should surround equals sign for default values -->
  <rule ref="Generic.Functions.FunctionCallArgumentSpacing"/>
  <rule ref="PSR2.Methods.FunctionCallSignature">
    <properties>
      <property name="indent" value="2"/>
    </properties>
  </rule>

  <!-- Opening brace should be on the same line as the function declaration -->
  <rule ref="Generic.Functions.OpeningFunctionBraceKernighanRitchie"/>

  <!-- Nesting level should be kept under 5, not more than 10 -->
  <rule ref="Generic.Metrics.NestingLevel"/>

  <!-- Method names should use camelCaps -->
  <rule ref="PSR1.Methods.CamelCapsMethodName"/>
  <!-- Constants should be all uppercase with underscores separating words -->
  <rule ref="Generic.NamingConventions.UpperCaseConstantName"/>

  <!-- Disallow characters before PHP opening tag -->
  <rule ref="Generic.PHP.CharacterBeforePHPOpeningTag"/>
  <rule ref="Generic.PHP.DisallowShortOpenTag"/>
  <!-- true, false, null should always be lower case -->
  <rule ref="Generic.PHP.LowerCaseConstant"/>
  <!-- System keywords should always be lower case -->
  <rule ref="Generic.PHP.LowerCaseKeyword"/>
  <!-- Disallow silencing errors with @ -->
  <!--<rule ref="Generic.PHP.NoSilencedErrors"/>-->

  <!-- When referencing arrays there should be no whitespace between brackets -->
  <rule ref="Squiz.Arrays.ArrayBracketSpacing"/>
  <!-- Checks for empty catch statements. It must at least have a comment -->
  <rule ref="Squiz.Commenting.EmptyCatchComment"/>
  <!-- There should be a space between each foreach condition -->
  <rule ref="Squiz.ControlStructures.ForEachLoopDeclaration"/>
  <!-- There should be a space between each for condition -->
  <rule ref="Squiz.ControlStructures.ForLoopDeclaration"/>

  <!-- There should not be commented out code -->
  <rule ref="Squiz.PHP.CommentedOutCode">
    <properties>
      <property name="maxPercentage" value="50"/>
    </properties>
  </rule>
  <!-- Discourage use of debug functions -->
  <rule ref="Squiz.PHP.DiscouragedFunctions"/>
  <!-- Discourage use of eval -->
  <rule ref="Squiz.PHP.Eval"/>
  <!-- Warn about non executable code -->
  <rule ref="Squiz.PHP.NonExecutableCode"/>

  <!-- Warn about usage of "$this" in static methods -->
  <rule ref="Squiz.Scope.StaticThisUsage"/>

  <!-- Remove space between if/for/while and opening parenthesis -->
  <rule ref="MailPoet.ControlStructures.ControlSignature" />

  <!-- Run against the PHPCompatibility ruleset -->
  <rule ref="PHPCompatibility" />

  <!-- Visibility MUST be declared on all methods. -->
  <rule ref="Squiz.Scope.MethodScope"/>

  <!-- Enforce camelCase naming of variables and properties -->
  <rule ref="Squiz.NamingConventions.ValidVariableName.MemberNotCamelCaps"/>
  <rule ref="Squiz.NamingConventions.ValidVariableName.MemberNotCamelCaps"/>
  <rule ref="Squiz.NamingConventions.ValidVariableName.StringNotCamelCaps"/>

  <!-- WordPress.org Code Analysis -->
  <config name="minimum_supported_wp_version" value="5.3"/>
  <config name="prefixes" value=""/>
  <rule ref="WordPress.Security.ValidatedSanitizedInput"/>
  <!--
    Instead of directly using <config name="testVersion" value="7.2-"/>, this
    needs to be included to override what MinimalPluginStandard set before.

    See: https://github.com/squizlabs/PHP_CodeSniffer/issues/2197
  -->
  <rule ref="./php-version.xml"/>
</ruleset>
