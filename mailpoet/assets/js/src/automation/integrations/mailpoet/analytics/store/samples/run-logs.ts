import { __ } from '@wordpress/i18n';
import { RunData } from '../types';

const year = new Date().getFullYear();
const month = new Date().getMonth();
const datePrefix = `${year}-${(month + 1).toString().padStart(2, '0')}`;

const emptyAvatarUrl =
  'https://www.gravatar.com/avatar/205e460b479e2e5b48aec07710c08d50?s=40&d=mp&r=g&f=y';

const subjects = {
  // translators: a sample abandoned cart email subject
  abandonedCart: __('Did you forget something?', 'mailpoet'),
} as const;

type RunLogsProps = {
  [key: number]: RunData;
};

export const runLogs: RunLogsProps = {
  1: {
    run: {
      id: 1,
      automation_id: 1,
      status: 'complete',
      is_past_due: false,
    },
    logs: [
      {
        id: 1,
        automation_run_id: 1,
        step_id: '1',
        step_type: 'trigger',
        step_key: 'woocommerce:abandoned-cart',
        step_name: 'User abandons cart',
        status: 'complete',
        started_at: `${datePrefix}-26T14:22:02.000Z`,
        updated_at: `${datePrefix}-26T14:22:02.000Z`,
        run_number: 1,
        data: '{}',
        time_left: null,
        error: null,
      },
      {
        id: 2,
        automation_run_id: 1,
        step_id: '2',
        step_type: 'action',
        step_key: 'mailpoet:update-subscriber',
        step_name: 'Update subscriber',
        status: 'complete',
        started_at: `${datePrefix}-26T14:22:02.000Z`,
        updated_at: `${datePrefix}-26T14:22:02.000Z`,
        run_number: 1,
        data: '{}',
        time_left: null,
        error: null,
      },
      {
        id: 3,
        automation_run_id: 1,
        step_id: '3',
        step_type: 'action',
        step_key: 'core:delay',
        step_name: 'Delay',
        status: 'complete',
        started_at: `${datePrefix}-26T14:22:02.000Z`,
        updated_at: `${datePrefix}-26T15:22:02.000Z`,
        run_number: 1,
        data: '{}',
        time_left: null,
        error: null,
      },
      {
        id: 4,
        automation_run_id: 1,
        step_id: '4',
        step_type: 'action',
        step_key: 'mailpoet:send-email',
        step_name: 'Send email',
        status: 'complete',
        started_at: `${datePrefix}-26T15:22:02.000Z`,
        updated_at: `${datePrefix}-26T15:22:02.000Z`,
        run_number: 1,
        data: '{}',
        time_left: null,
        error: null,
      },
    ],
    automation: {
      steps: {
        root: {
          id: 'root',
          type: 'root',
          key: 'core:root',
          args: {},
          next_steps: [],
          filters: null,
        },
        '1': {
          id: '1',
          type: 'trigger',
          key: 'woocommerce:abandoned-cart',
          args: {
            wait: 30,
          },
          next_steps: [{ id: '2' }],
          filters: null,
        },
        '2': {
          id: '2',
          type: 'action',
          key: 'mailpoet:update-subscriber',
          args: {},
          next_steps: [{ id: '3' }],
          filters: null,
        },
        '3': {
          id: '3',
          type: 'action',
          key: 'core:delay',
          args: {
            delay_type: 'HOURS',
            delay: 1,
          },
          next_steps: [{ id: '4' }],
          filters: null,
        },
        '4': {
          id: '4',
          type: 'action',
          key: 'mailpoet:send-email',
          args: { subject: subjects.abandonedCart },
          next_steps: [],
          filters: null,
        },
      },
    },
    subscriber: {
      id: 1,
      email: 'kathlin.nelson@email.com',
      first_name: 'Kathlin',
      last_name: 'Nelson',
      avatar: emptyAvatarUrl,
    },
  },
  2: {
    run: {
      id: 1,
      automation_id: 1,
      status: 'running',
      is_past_due: false,
    },
    logs: [
      {
        id: 1,
        automation_run_id: 1,
        step_id: '1',
        step_type: 'trigger',
        step_key: 'woocommerce:abandoned-cart',
        step_name: 'User abandons cart',
        status: 'complete',
        started_at: `${datePrefix}-26T14:22:02.000Z`,
        updated_at: `${datePrefix}-26T14:22:02.000Z`,
        run_number: 1,
        data: '{}',
        time_left: null,
        error: null,
      },
      {
        id: 2,
        automation_run_id: 1,
        step_id: '2',
        step_type: 'action',
        step_key: 'mailpoet:update-subscriber',
        step_name: 'Update subscriber',
        status: 'complete',
        started_at: `${datePrefix}-26T14:22:02.000Z`,
        updated_at: `${datePrefix}-26T14:22:02.000Z`,
        run_number: 1,
        data: '{}',
        time_left: null,
        error: null,
      },
      {
        id: 3,
        automation_run_id: 1,
        step_id: '3',
        step_type: 'action',
        step_key: 'core:delay',
        step_name: 'Delay',
        status: 'running',
        started_at: `${datePrefix}-26T14:22:02.000Z`,
        updated_at: `${datePrefix}-26T14:22:02.000Z`,
        run_number: 1,
        data: '{}',
        time_left: '8 minutes',
        error: null,
      },
    ],
    automation: {
      steps: {
        root: {
          id: 'root',
          type: 'root',
          key: 'core:root',
          args: {},
          next_steps: [],
          filters: null,
        },
        '1': {
          id: '1',
          type: 'trigger',
          key: 'woocommerce:abandoned-cart',
          args: {
            wait: 30,
          },
          next_steps: [{ id: '2' }],
          filters: null,
        },
        '2': {
          id: '2',
          type: 'action',
          key: 'mailpoet:update-subscriber',
          args: {},
          next_steps: [{ id: '3' }],
          filters: null,
        },
        '3': {
          id: '3',
          type: 'action',
          key: 'core:delay',
          args: {
            delay_type: 'MINUTES',
            delay: 10,
          },
          next_steps: [],
          filters: null,
        },
      },
    },
    subscriber: {
      id: 2,
      email: 'eric.borgol@email.com',
      first_name: 'Eric',
      last_name: 'Borgol',
      avatar: emptyAvatarUrl,
    },
  },
  3: {
    run: {
      id: 1,
      automation_id: 1,
      status: 'failed',
      is_past_due: false,
    },
    logs: [
      {
        id: 1,
        automation_run_id: 1,
        step_id: '1',
        step_type: 'trigger',
        step_key: 'woocommerce:abandoned-cart',
        step_name: 'User abandons cart',
        status: 'complete',
        started_at: `${datePrefix}-26T14:22:02.000Z`,
        updated_at: `${datePrefix}-26T14:22:02.000Z`,
        run_number: 1,
        data: '{}',
        time_left: null,
        error: null,
      },
      {
        id: 2,
        automation_run_id: 1,
        step_id: '2',
        step_type: 'action',
        step_key: 'mailpoet:update-subscriber',
        step_name: 'Update subscriber',
        status: 'complete',
        started_at: `${datePrefix}-26T14:22:02.000Z`,
        updated_at: `${datePrefix}-26T14:22:02.000Z`,
        run_number: 1,
        data: '{}',
        time_left: null,
        error: null,
      },
      {
        id: 3,
        automation_run_id: 1,
        step_id: '3',
        step_type: 'action',
        step_key: 'core:delay',
        step_name: 'Delay',
        status: 'complete',
        started_at: `${datePrefix}-26T14:22:02.000Z`,
        updated_at: `${datePrefix}-26T15:22:02.000Z`,
        run_number: 1,
        data: '{}',
        time_left: null,
        error: null,
      },
      {
        id: 4,
        automation_run_id: 1,
        step_id: '4',
        step_type: 'action',
        step_key: 'mailpoet:send-email',
        step_name: 'Send email',
        status: 'failed',
        started_at: `${datePrefix}-26T15:22:02.000Z`,
        updated_at: `${datePrefix}-26T15:22:02.000Z`,
        run_number: 1,
        data: '{}',
        time_left: null,
        error: {
          message: 'Subscriber is not subscribed to marketing emails.',
          errorClass: '',
          code: 400,
        },
      },
    ],
    automation: {
      steps: {
        root: {
          id: 'root',
          type: 'root',
          key: 'core:root',
          args: {},
          next_steps: [],
          filters: null,
        },
        '1': {
          id: '1',
          type: 'trigger',
          key: 'woocommerce:abandoned-cart',
          args: {
            wait: 30,
          },
          next_steps: [{ id: '2' }],
          filters: null,
        },
        '2': {
          id: '2',
          type: 'action',
          key: 'mailpoet:update-subscriber',
          args: {},
          next_steps: [{ id: '3' }],
          filters: null,
        },
        '3': {
          id: '3',
          type: 'action',
          key: 'core:delay',
          args: {
            delay_type: 'MINUTES',
            delay: 10,
          },
          next_steps: [{ id: '4' }],
          filters: null,
        },
        '4': {
          id: '4',
          type: 'action',
          key: 'mailpoet:send-email',
          args: { subject: subjects.abandonedCart },
          next_steps: [],
          filters: null,
        },
      },
    },
    subscriber: {
      id: 3,
      email: 'elainelu@email.com',
      first_name: null,
      last_name: null,
      avatar: emptyAvatarUrl,
    },
  },
  4: {
    run: {
      id: 1,
      automation_id: 1,
      status: 'complete',
      is_past_due: false,
    },
    logs: [
      {
        id: 1,
        automation_run_id: 1,
        step_id: '1',
        step_type: 'trigger',
        step_key: 'woocommerce:abandoned-cart',
        step_name: 'User abandons cart',
        status: 'complete',
        started_at: `${datePrefix}-26T14:22:02.000Z`,
        updated_at: `${datePrefix}-26T14:22:02.000Z`,
        run_number: 1,
        data: '{}',
        time_left: null,
        error: null,
      },
      {
        id: 2,
        automation_run_id: 1,
        step_id: '2',
        step_type: 'action',
        step_key: 'mailpoet:update-subscriber',
        step_name: 'Update subscriber',
        status: 'complete',
        started_at: `${datePrefix}-26T14:22:02.000Z`,
        updated_at: `${datePrefix}-26T14:22:02.000Z`,
        run_number: 1,
        data: '{}',
        time_left: null,
        error: null,
      },
    ],
    automation: {
      steps: {
        root: {
          id: 'root',
          type: 'root',
          key: 'core:root',
          args: {},
          next_steps: [],
          filters: null,
        },
        '1': {
          id: '1',
          type: 'trigger',
          key: 'woocommerce:abandoned-cart',
          args: {
            wait: 30,
          },
          next_steps: [{ id: '2' }],
          filters: null,
        },
        '2': {
          id: '2',
          type: 'action',
          key: 'mailpoet:update-subscriber',
          args: {},
          next_steps: [],
          filters: null,
        },
      },
    },
    subscriber: {
      id: 4,
      email: 'brian.nelson@email.com',
      first_name: 'Brian',
      last_name: 'Norman',
      avatar: emptyAvatarUrl,
    },
  },
};
